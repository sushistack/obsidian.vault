## **✅ Gherkin 테스트란?**

**Gherkin**은 **Cucumber**에서 사용하는 도메인 중심의 테스트 기술로,
“**사람이 읽을 수 있는 자연어 형식**으로 시나리오를 작성하여 테스트하는 방식”입니다.

📌 핵심 키워드는 다음과 같습니다:

- Feature: – 테스트할 기능 설명
- Scenario: – 하나의 시나리오
- Given – 초기 상태 정의
- When – 행동(행위)
- Then – 결과(검증)
- (선택적으로 And, But)

---

## **✨ Gherkin 예제 (도메인: 상품 주문)**

### **🧠 도메인 설명**

- 도메인은 **상품 주문(Ordering)** 시스템.    
- 유비쿼터스 언어 예시:
    - 고객(Customer)
    - 장바구니(Cart)
    - 상품(Product)
    - 주문(Order)
    - 주문 금액(Order Amount)
    - 재고(Inventory)

---

### **✅ Gherkin 예제**

```
Feature: 상품 주문

  고객은 상품을 장바구니에 담고 주문할 수 있다.

  Scenario: 주문 가능한 상품을 정상 주문
    Given 재고에 "무선 키보드" 상품이 5개 있다
    And 고객 "김철수"가 장바구니에 "무선 키보드"를 1개 담는다
    When 김철수가 주문을 진행한다
    Then 주문이 성공해야 한다
    And 주문 금액은 상품 가격 * 수량이어야 한다
    And 재고는 1개 줄어야 한다
```

---

## **🔄 Gherkin과 유비쿼터스 언어의 연관성**

|**요소**|**설명**|
|---|---|
|**도메인 모델의 용어를 그대로 사용**|예: 고객, 장바구니, 주문, 재고 등 모두 도메인 언어|
|**기획자/운영자/QA도 읽을 수 있음**|→ 개발자와의 소통 장벽 최소화|
|**비즈니스 룰이 시나리오로 명확히 표현됨**|예: “재고가 줄어야 한다”, “금액 계산 로직” 등|
|**코드와 도메인 모델 간의 용어가 일치함**|예: Order, Product, InventoryService 등의 클래스와 일관성 유지|

---

## **✅ 요약**

| **항목**       | **설명**                                                      |
| ------------ | ----------------------------------------------------------- |
| **Gherkin**  | 자연어 기반의 행동 중심 테스트 시나리오                                      |
| **유비쿼터스 언어** | 도메인 전문가와 개발자 간의 공통된 언어 체계                                   |
| **연관성**      | Gherkin의 모든 문장은 **유비쿼터스 언어**를 기반으로 작성되어야 진정한 의미의 도메인 테스트가 됨 |

> **유비쿼터스 언어에 도달하거나 이를 명확히 정립하기 위한 수단 중 하나로 ‘언어집(Glossary)’이라는 도구를 만들고, 이를 구체적인 시나리오로 검증하는 방식으로 Gherkin 테스트를 활용할 수 있습니다.**

  

즉, Gherkin 테스트는 **유비쿼터스 언어를 정제하고, 실제 도메인 지식에 기반한 모델이 정확하게 작동하는지 확인하기 위한 실용적인 수단**이에요.

---

## **🔄 개념 간의 관계 정리**

```
[도메인 전문가 + 개발자 협업]
      ↓
[유비쿼터스 언어 도출]
      ↓
[언어집(Glossary): 핵심 개념과 용어를 정리]
      ↓
[Gherkin 시나리오 작성: 유비쿼터스 언어를 기반으로 Given/When/Then 작성]
      ↓
[자동화 테스트 + 모델 검증]
```

---

## **🔍 각 단계 설명**

  

### **1. 유비쿼터스 언어 도출**

- 도메인 전문가(운영자, 기획자 등)와 개발자가 **공통으로 사용하는 용어 체계** 정립
    
- 예: _주문(Order)_, _주문 금액(Order Amount)_, _결제 실패(Declined Payment)_
    

---

### **2. 언어집(Glossary) 만들기**

- **정의 목록** 형태로 도메인 용어 정리
- 예:

|**용어**|**정의**|**비고**|
|---|---|---|
|고객|서비스를 이용하는 사람|회원 정보와 연결됨|
|장바구니|주문 전 상품 보관 공간|최대 20개까지 가능|
|재고|판매 가능한 수량|실시간 업데이트됨|

- 정제된 언어는 모델명, 필드명, API 스펙, 문서 등 모든 곳에 반영

---

### **3. Gherkin 테스트 작성**

- 위에서 정의한 언어를 기반으로 실제 **행동 시나리오(Behavior)** 작성
- 이를 통해 _정의된 도메인 언어가 실전에서 모호하지 않음을 검증_

```
Scenario: 장바구니에 상품을 담고 주문하기
  Given 고객 "김철수"가 로그인했다
  And "무선 마우스"를 장바구니에 추가했다
  When 주문을 진행한다
  Then 주문이 완료되어야 한다
```

---

## **📌 핵심 요약**

|**도구**|**역할**|
|---|---|
|**유비쿼터스 언어**|도메인 전문가 ↔ 개발자 간 공통 언어|
|**언어집(Glossary)**|도출된 용어와 정의를 명시적으로 정리|
|**Gherkin 테스트**|그 언어로 실제 비즈니스 시나리오를 표현하고 자동화 테스트화|

---

## **🧠 비유적으로 표현하면**

> Glossary는 “사전”이고
> Gherkin은 그 “사전을 활용해 문장을 만드는 연습장”이자
> “그 문장이 진짜 맞는지 확인하는 시험지”에 해당합니다.

