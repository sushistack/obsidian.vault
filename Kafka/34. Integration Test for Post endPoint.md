
- Test combines the different layers of the code and verify the behavior is working as expected.

![](Pasted%20image%2020241118165011.png)

**1. 테스트 대상 플로우**

다음의 흐름을 검증해야 합니다:

1. **Controller Layer**: 클라이언트가 POST /library-event 엔드포인트를 호출하고 요청 본문을 보냅니다.
2. **Kafka Producer Integration**: 컨트롤러가 요청 본문을 Kafka 프로듀서로 전달.
3. **Kafka Topic**: 프로듀서가 메시지를 Kafka 토픽으로 보냅니다.

**2. 통합 테스트 목표**

• **요청 본문**이 컨트롤러에서 Kafka 프로듀서로 올바르게 전달되는지 확인.
• **Kafka 프로듀서**가 Kafka 토픽으로 메시지를 정확히 발행하는지 확인.
• **Kafka 토픽**에서 발행된 메시지를 검증.


**3. 테스트 설정**

  

**1) Spring Boot와 Testcontainers 설정**

  

Kafka 통합 테스트를 위해 **Testcontainers**를 사용하면 실제 Kafka 인스턴스를 Docker 컨테이너로 실행하여 테스트할 수 있습니다.

  

build.gradle.kts에 다음 의존성을 추가합니다: