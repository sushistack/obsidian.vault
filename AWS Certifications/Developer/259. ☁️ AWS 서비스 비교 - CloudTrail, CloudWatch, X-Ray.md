
AWS의 세 가지 주요 모니터링 및 감사 서비스인 **CloudTrail**, **CloudWatch**, **X-Ray**는 각각 다른 목적을 가지고 있습니다. 아래 표는 각 서비스의 주요 기능과 역할을 명확하게 비교합니다.

|서비스|주요 기능|용도|주요 데이터|
|---|---|---|---|
|**CloudTrail**|**API 호출 감사 및 로깅**|누가, 언제, 어떤 API를 호출했는지 추적하여 보안 감사, 거버넌스, 규정 준수 및 문제 해결에 사용|AWS API 호출 로그|
|**CloudWatch**|**자원 및 애플리케이션 모니터링**|시스템 지표(CPU 사용량, 네트워크 I/O), 애플리케이션 로그, 이벤트 등을 수집하여 성능 및 운영 상태 모니터링 및 알람 설정|메트릭, 로그, 이벤트|
|**X-Ray**|**분산 시스템 트레이스 분석**|마이크로서비스 아키텍처에서 요청의 흐름을 추적하고, 지연 시간, 오류 및 병목 현상을 시각화하여 디버깅 및 성능 분석에 사용|분산 트레이스, 서비스 맵|

---

### 🔍 서비스별 상세 설명

#### 1. CloudTrail: 누가 무엇을 했는가?

CloudTrail은 AWS 계정에서 발생하는 모든 API 호출을 기록하는 서비스입니다. 이는 사용자, AWS 서비스 또는 AWS 관리 콘솔에서 수행되는 모든 작업을 감사하는 데 사용됩니다.

- **핵심 역할**: 누가(사용자), 언제(시간), 어디서(IP 주소), 무엇을(API 호출) 했는지에 대한 기록을 제공하여 **보안 감사 및 문제의 근본 원인을 파악**하는 데 유용합니다.

- **예시**: 관리자가 의도치 않게 중요한 S3 버킷을 삭제했을 때, CloudTrail 로그를 분석하여 어떤 사용자가 `DeleteBucket` API를 호출했는지 확인할 수 있습니다.

#### 2. CloudWatch: 지금 시스템 상태는 어떤가?

CloudWatch는 AWS 리소스 및 애플리케이션을 모니터링하고 관리하는 중앙 집중식 서비스입니다.

- **핵심 역할**: **메트릭(Metrics)**, **로그(Logs)**, **이벤트(Events)** 세 가지 기능을 통해 시스템의 현재 상태를 파악하고, 성능 지표에 대한 **경보(Alarms)**를 설정하여 문제가 발생했을 때 알림을 받을 수 있습니다.

- **예시**: EC2 인스턴스의 CPU 사용량이 80%를 초과하면 CloudWatch Alarm을 통해 SNS 알림을 받도록 설정할 수 있습니다. 애플리케이션 로그를 CloudWatch Logs에 저장하여 검색 및 분석할 수도 있습니다.

#### 3. X-Ray: 요청이 어떻게 흘러가는가?

X-Ray는 분산 애플리케이션의 요청 흐름을 시각적으로 추적하고 분석하는 서비스입니다.

- **핵심 역할**: 여러 마이크로서비스 간의 요청이 어떻게 전달되는지 보여주는 **서비스 맵(Service Map)**을 제공하고, 요청이 각 서비스에서 머무는 **지연 시간, 오류, 결함** 등을 분석하여 애플리케이션의 성능 병목 현상을 찾아내는 데 효과적입니다.

- **예시**: 웹 애플리케이션의 요청이 로드 밸런서, API Gateway, Lambda, DynamoDB를 거칠 때, X-Ray를 사용하여 각 단계에서 발생하는 지연 시간을 확인하고, 어느 서비스에서 성능 저하가 발생하는지 정확히 파악할 수 있습니다.

### 📝 요약 비교

간단히 말해, **CloudTrail**은 **감사(Auditing)**, **CloudWatch**는 **모니터링(Monitoring)**, **X-Ray**는 **디버깅 및 추적(Tracing)**에 특화된 서비스입니다. 각 서비스는 상호 보완적으로 사용되어 AWS 환경에 대한 포괄적인 가시성을 제공합니다.