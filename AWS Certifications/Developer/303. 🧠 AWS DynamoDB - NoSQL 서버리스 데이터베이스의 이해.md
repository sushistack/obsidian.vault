
AWS DynamoDB는 완전 관리형 NoSQL 데이터베이스 서비스로, 대규모 워크로드와 높은 트래픽을 처리하도록 설계되었습니다. 이 아티클은 기존 RDBMS(관계형 데이터베이스)와의 차이점, DynamoDB의 핵심 특징, 그리고 가장 중요한 **기본 키(Primary Key)** 설계에 대해 자세히 설명합니다.

---

## 🚀 RDBMS vs. NoSQL: 패러다임의 전환

기존 애플리케이션들은 주로 MySQL, PostgreSQL과 같은 **관계형 데이터베이스(RDBMS)**를 사용했습니다.

![[Pasted image 20250902223635.png]]

- **RDBMS의 특징**:
    
    - **SQL(Structured Query Language)**을 사용합니다.
        
    - **강력한 스키마**를 통해 데이터 모델을 엄격하게 관리합니다.
        
    - **조인(JOIN)**, 집계(Aggregation) 등 복잡한 쿼리가 가능합니다.
        
    - **수직 확장(Vertical Scaling)**에 중점을 둡니다(더 좋은 CPU, RAM, 디스크로 교체). 읽기 기능은 복제본(Read Replica)을 통해 수평 확장이 가능하지만, 쓰기 기능은 한정적입니다.


반면, **NoSQL(Not only SQL)** 데이터베이스는 이러한 한계를 극복하기 위해 등장했습니다.

- **NoSQL의 특징**:
    
    - **비관계형** 데이터 모델을 사용하며, 유연한 스키마를 가집니다.
        
    - **수평 확장(Horizontal Scaling)**에 최적화되어 있어, 요청량이 증가하면 자동으로 더 많은 인스턴스로 확장합니다.
        
    - 데이터를 분산 저장하여 수백만 건의 요청과 수십 테라바이트의 저장 공간을 지원할 수 있습니다.
        
    - 일반적으로 **조인이나 복잡한 집계 연산을 지원하지 않습니다.** 대신, 필요한 모든 데이터를 한 항목(Item)에 담도록 설계합니다.


---

## ⚙️ DynamoDB의 핵심 특징

DynamoDB는 NoSQL 데이터베이스의 장점을 극대화한 서비스입니다.

- **완전 관리형 및 서버리스**: 사용자는 서버를 직접 관리할 필요가 없습니다. AWS가 고가용성, 복제, 백업 등을 자동으로 처리합니다.
    
- **높은 가용성**: 여러 가용 영역(Multi-AZ)에 자동으로 복제되어 데이터의 안정성을 보장합니다.
    
- **무한한 확장성**: 초당 수백만 건의 요청, 수조 개의 항목(Item), 수백 테라바이트의 저장 공간까지 규모에 관계없이 일관되고 빠른 성능을 제공합니다.
    
- **통합 및 보안**: AWS IAM과 완벽하게 통합되어 강력한 보안 및 접근 제어를 제공합니다. DynamoDB Streams를 통해 이벤트 기반 프로그래밍도 가능합니다.
    
- **비용 효율성**: 요청에 따라 자동으로 스케일링되므로, 사용한 만큼만 비용을 지불합니다. 스토리지 비용을 절감하기 위한 `Infrequent Access (IA)` 테이블 클래스도 지원합니다.
    

### **데이터 구조**

- **테이블(Tables)**: 데이터가 저장되는 기본 단위입니다.
    
- **항목(Items)**: 테이블 내의 단일 행(Row)입니다. 최대 400KB의 데이터를 저장할 수 있습니다.
    
- **속성(Attributes)**: 항목 내의 데이터 필드(Columns)입니다. 모든 항목이 동일한 속성을 가질 필요가 없으며, 동적으로 추가하거나 `Null` 값을 가질 수 있습니다. 또한, 중첩(Nested)된 속성도 지원합니다.
    

---

## 🔑 DynamoDB 기본 키(Primary Key) 설계

DynamoDB에서 가장 중요한 것은 기본 키를 어떻게 설계하느냐입니다. 이는 데이터가 어떻게 분산되고 저장될지를 결정하기 때문입니다.


### 1. **파티션 키(Partition Key)**

![[Pasted image 20250902223656.png]]

- **유형**: 단일 속성으로 구성됩니다.
    
- **역할**: 항목의 고유성을 보장하고, DynamoDB가 데이터를 물리적으로 분산시키는 기준이 됩니다. 모든 항목은 고유한 파티션 키를 가져야 합니다.
    
- **최적의 선택**: 데이터가 균일하게 분산되도록 **카디널리티(Cardinality)가 높은** 속성을 선택해야 합니다.
    
    - **좋은 예**: `user_id`, `movie_id`, `product_id`
        
    - **나쁜 예**: `user_language`, `movie_genre` (특정 값에 데이터가 집중될 수 있습니다).
        

### 2. **파티션 키 + 정렬 키(Partition Key + Sort Key)**

![[Pasted image 20250902223719.png]]

- **유형**: 두 개의 속성으로 구성된 복합 키입니다.
    
- **역할**: 파티션 키는 데이터를 그룹화하고, 정렬 키는 해당 그룹 내에서 항목을 정렬합니다. 두 키의 조합이 고유해야 합니다.
    
- **활용**: 동일한 파티션 키를 가진 여러 항목을 저장할 수 있습니다. 예를 들어, `users-game` 테이블에서 `user_id`를 파티션 키로, `game_id`를 정렬 키로 사용하면 한 사용자가 참여한 모든 게임 기록을 효율적으로 그룹화하고 쿼리할 수 있습니다.

**예시: 사용자 게임 기록 테이블**

|`user_id` (파티션 키)|`game_id` (정렬 키)|`score`|`result`|
|---|---|---|---|
|`user123`|`game001`|92|Win|
|`user456`|`game002`|14|Lose|
|`user123`|`game003`|55|Lose|

위 테이블에서 `user123`은 두 개의 다른 게임 기록을 가지고 있습니다. 파티션 키(`user_id`)는 동일하지만, 정렬 키(`game_id`)가 달라 이 둘의 조합은 고유합니다. 이렇게 하면 `user123`의 모든 게임 기록을 한 번의 쿼리로 가져올 수 있습니다.

**시험 대비 팁**: 시험에서 **최고의 파티션 키**를 선택하라는 문제가 나온다면, 항상 데이터 분산도를 최대화할 수 있는, 즉 **카디널리티가 가장 높은(가장 다양한 값을 가질 수 있는)** 속성을 선택해야 합니다.