

이번 아티클에서는 **Amazon Cognito 사용자 풀(User Pool)**에 대해 자세히 알아보겠습니다. 사용자 풀은 웹 및 모바일 애플리케이션 사용자를 위한 **서버리스 사용자 데이터베이스** 역할을 하며, 다양한 인증 및 사용자 관리 기능을 제공합니다.

---

### 1️⃣ Cognito 사용자 풀(User Pool)의 핵심 기능

Cognito 사용자 풀(CUP)은 애플리케이션에 필요한 사용자 관리 기능을 손쉽게 구현할 수 있게 해주는 완전 관리형 서비스입니다.

- **다양한 로그인 방식 지원:** 사용자는 이메일/비밀번호 조합은 물론, 소셜 미디어 계정(Google, Facebook, Amazon 등)을 통한 **연합 로그인(Federated Identities)**도 사용할 수 있습니다. SAML이나 OpenID Connect와 같은 표준 기반의 ID 공급자(Identity Provider, IdP)와도 연동됩니다.
    
- **보안 강화:**
    
    - **다단계 인증(MFA):** 로그인 시 추가적인 보안 단계를 적용할 수 있습니다.
        
    - **자격 증명 유출 감지:** AWS가 유출된 자격 증명을 스캔하여 사용자 계정의 보안 위험을 알려줍니다.
        
- **사용자 관리:** 회원가입, 비밀번호 재설정, 이메일/전화번호 인증 등 기본적인 사용자 관리 기능을 내장하고 있습니다.
    
- **JWT(JSON Web Token) 반환:** 사용자가 성공적으로 로그인하면, 사용자 풀은 **JWT**를 반환합니다. 이 JWT는 사용자의 인증 상태와 권한을 담고 있으며, 이후 API 호출 시 사용됩니다.
    
![[Pasted image 20250911190317.png]]

위 다이어그램과 같이, 웹 또는 모바일 애플리케이션은 사용자 풀에 로그인 요청을 보내고, 성공적으로 인증되면 JWT를 반환받습니다. 이 JWT는 다음 단계인 API 호출에 사용됩니다.

---

### 2️⃣ 주요 AWS 서비스와의 통합

Cognito 사용자 풀은 다른 AWS 서비스와 긴밀하게 통합되어 인증 기반의 아키텍처를 쉽게 구축할 수 있습니다.

#### **1. API Gateway 통합**

![[Pasted image 20250911190341.png]]

가장 일반적인 통합 시나리오입니다.

1. **사용자 인증:** 사용자가 사용자 풀에 로그인하여 JWT를 받습니다.
    
2. **API 호출:** 사용자의 애플리케이션은 이 JWT를 HTTP 헤더에 담아 API Gateway로 요청을 보냅니다.
    
3. **토큰 검증:** API Gateway는 요청을 라우팅하기 전에 Cognito 사용자 풀을 연동하여 토큰의 유효성을 자동으로 검증합니다.
    
4. **백엔드 접근 허용:** 토큰이 유효한 경우에만 요청이 Lambda 함수와 같은 백엔드로 전달됩니다.

이 방식을 통해 개발자는 별도의 인증 로직을 구현할 필요 없이 API Gateway에서 사용자 인증을 처리할 수 있습니다.

#### **2. Application Load Balancer(ALB) 통합**

![[Pasted image 20250911190354.png]]

ALB를 사용하면 웹 트래픽을 Cognito 사용자 풀과 직접 연동하여 인증 기반의 애플리케이션을 구축할 수 있습니다.

1. **리스너 규칙 설정:** ALB 리스너에 규칙을 추가하여 Cognito 사용자 풀을 인증 대상으로 지정합니다.
    
2. **사용자 인증:** 사용자가 ALB를 통해 애플리케이션에 접근하면, ALB는 사용자를 사용자 풀의 로그인 페이지로 리디렉션하여 인증을 유도합니다.
    
3. **트래픽 포워딩:** 인증이 완료되면, ALB는 사용자 요청을 EC2 인스턴스, Lambda 함수, ECS 컨테이너 등으로 구성된 **대상 그룹(Target Group)**으로 전달합니다.
    

이러한 통합을 통해 ALB는 애플리케이션 백엔드가 복잡한 인증 로직을 처리하지 않도록 해줍니다.

---

### 3️⃣ 요약: 사용자 풀은 서버리스 사용자 DB

Cognito 사용자 풀은 단순한 로그인/회원가입 기능을 넘어, **보안과 확장성을 갖춘 서버리스 사용자 데이터베이스**입니다. 개발자는 백엔드 서버를 직접 구축하거나 관리할 필요 없이, 이 완전 관리형 서비스의 API를 호출하여 애플리케이션 사용자를 관리할 수 있습니다.