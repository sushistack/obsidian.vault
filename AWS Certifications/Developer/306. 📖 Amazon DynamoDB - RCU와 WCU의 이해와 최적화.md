
Amazon DynamoDB는 뛰어난 성능과 확장성을 제공하는 NoSQL 데이터베이스 서비스입니다. DynamoDB를 효과적으로 사용하기 위해서는 **읽기 용량 단위(RCU)**와 **쓰기 용량 단위(WCU)**에 대한 정확한 이해가 필수적입니다. 이 아티클에서는 RCU와 WCU의 개념을 살펴보고, DynamoDB의 두 가지 용량 모드인 **온디맨드**와 **프로비저닝** 방식에 대해 상세히 알아보겠습니다.

---

## 💡 용량 단위(RCU & WCU)란 무엇인가?

DynamoDB는 데이터 처리량에 따라 비용을 청구합니다. 이때 사용되는 지표가 바로 RCU와 WCU입니다. 이 두 가지 단위는 각각 초당 읽기 및 쓰기 작업량을 나타내며, 사용자는 이를 기반으로 데이터베이스의 성능과 비용을 제어할 수 있습니다.

- **RCU (읽기 용량 단위)**: 1초당 **강력히 일관된(strongly consistent) 4KB** 크기의 항목 1개를 읽는 데 필요한 용량입니다.
    
    - **결과적으로 일관된(eventually consistent) 읽기**의 경우, 1초당 8KB 크기의 항목 1개를 읽는 데 1 RCU가 소모됩니다.
        
- **WCU (쓰기 용량 단위)**: 1초당 **1KB** 크기의 항목 1개를 쓰는 데 필요한 용량입니다.

<br>

|용량 단위|기준|설명|
|---|---|---|
|**RCU**|**4KB** (강력히 일관된 읽기)|1초당 읽기 용량 단위|
||**8KB** (결과적으로 일관된 읽기)||
|**WCU**|**1KB** (쓰기)|1초당 쓰기 용량 단위|

---

## 💰 DynamoDB 용량 모드: 온디맨드 vs. 프로비저닝

DynamoDB는 워크로드 특성에 따라 두 가지 용량 모드를 제공합니다.

### 1. 온디맨드 용량 모드 (On-demand)

온디맨드 모드는 DynamoDB를 가장 쉽게 사용하는 방법입니다. 사용자는 RCU나 WCU를 미리 지정할 필요 없이, **실제 사용한 읽기 및 쓰기 요청에 대해서만 비용을 지불**합니다.

#### **✅ 장점**

- **관리 용이성**: 용량 계획을 미리 세울 필요가 없으므로 관리 부담이 적습니다.
    
- **유연성**: 예측 불가능한 워크로드에 매우 적합합니다. 갑작스러운 트래픽 급증에도 자동으로 확장됩니다.
    
- **개발 환경에 적합**: 개발 및 테스트 환경처럼 사용량이 불규칙한 경우에 비용 효율적입니다.

#### **❌ 단점**

- **상대적으로 높은 비용**: 동일한 작업량 기준으로 프로비저닝 모드보다 비용이 **2~3배** 비쌀 수 있습니다.

### 2. 프로비저닝 용량 모드 (Provisioned)

프로비저닝 모드는 RCU와 WCU를 사전에 지정하여 사용량을 예측하고 제어하는 방식입니다.

#### **✅ 장점**

- **비용 효율성**: 워크로드가 예측 가능한 경우 온디맨드 모드보다 훨씬 저렴합니다.
    
- **성능 예측 가능**: 미리 용량을 할당하므로 일관된 성능을 보장할 수 있습니다.

#### **❌ 단점**

- **관리 필요**: 사용자는 워크로드 변화에 맞춰 RCU와 WCU를 지속적으로 모니터링하고 조정해야 합니다.
    
- **갑작스러운 트래픽 처리**: 프로비저닝된 용량을 초과하는 트래픽이 발생하면 **스로틀링(Throttling)**이 발생하여 요청이 거부될 수 있습니다.

> 📝 **스로틀링(Throttling)**: 프로비저닝된 용량을 초과하는 요청에 대해 DynamoDB가 자동으로 요청을 제한하는 것을 의미합니다. 이를 방지하기 위해서는 적절한 용량 계획이 필요합니다.

---

## 📈 RCU와 WCU 계산하기: 용량 계산기 활용법

DynamoDB의 용량 계산기([AWS DynamoDB Provisioned Capacity Calculator](https://www.google.com/search?q=https://calculator.aws/%23/addService/DynamoDB))는 RCU와 WCU를 계산하는 데 매우 유용한 도구입니다. 이 계산기를 사용하여 테이블의 예상 비용을 미리 확인할 수 있습니다.

### **계산기 사용 방법**

1. **평균 항목 크기 (Average Item Size)**: 테이블에 저장될 데이터의 평균 크기(KB)를 입력합니다.
    
2. **초당 읽기/쓰기 수 (Reads/Writes per second)**: 예상되는 초당 읽기/쓰기 요청 수를 입력합니다.
    
3. **읽기 일관성 (Read Consistency)**:
    
    - **결과적으로 일관된 읽기(Eventually Consistent)**: 대부분의 읽기 작업에 사용되며, 최신 데이터가 아닐 수 있습니다.
        
    - **강력히 일관된 읽기(Strongly Consistent)**: 항상 최신 데이터를 읽습니다.
        
    - **트랜잭션 읽기(Transactional Reads)**: 여러 항목을 원자적으로 읽습니다.
        
4. **쓰기 일관성 (Write Consistency)**:
    
    - **표준 쓰기(Standard Writes)**: 일반적인 쓰기 작업입니다.
        
    - **트랜잭션 쓰기(Transactional Writes)**: 여러 항목을 원자적으로 씁니다.

|설정 항목|설명|
|---|---|
|**Average Item Size**|데이터 항목의 평균 크기 (예: 6KB)|
|**Reads/Writes per second**|초당 예상 읽기/쓰기 요청 수 (예: R/s=3, W/s=2)|
|**Read/Write Consistency**|읽기/쓰기 작업의 일관성 선택|
|**Estimated Cost**|계산된 RCU, WCU 기반 예상 월별 비용|

---

## 4️⃣ 용량 최적화: Auto Scaling 활용

프로비저닝 모드 사용 시 워크로드 변화에 유연하게 대응하려면 **DynamoDB Auto Scaling**을 사용하는 것이 좋습니다. Auto Scaling은 AWS Application Auto Scaling 서비스를 활용하여 테이블의 RCU 및 WCU를 자동으로 조절합니다.

### **✅ Auto Scaling 설정 방법**

1. **최소/최대 용량 단위 설정**: 테이블의 **최소** 및 **최대** RCU와 WCU를 지정합니다. 이 범위 내에서 용량이 자동으로 조절됩니다.
    
2. **목표 활용률 (Target Utilization)**: DynamoDB가 유지해야 할 목표 사용률(%)을 설정합니다. 예를 들어, 목표 활용률을 70%로 설정하면, 실제 사용량이 70%를 초과하면 용량을 늘리고, 70% 아래로 떨어지면 줄입니다.

### **Auto Scaling 작동 원리**

Auto Scaling은 설정된 목표 활용률을 달성하기 위해 **RCU/WCU를 자동으로 증가시키거나 감소**시킵니다.

- **사용량 증가**: 현재 RCU/WCU 사용량이 목표 활용률을 초과하면, Auto Scaling은 설정된 최대치까지 용량을 늘립니다.
    
- **사용량 감소**: 사용량이 줄어들면, Auto Scaling은 설정된 최소치까지 용량을 줄여 비용을 절감합니다.
    

이러한 자동화 기능을 통해 사용자는 용량을 수동으로 관리하는 번거로움 없이 비용 효율적인 운영이 가능합니다. 마치 EC2 인스턴스의 오토 스케일링 그룹처럼, DynamoDB도 워크로드에 맞게 자동으로 최적의 성능을 유지할 수 있습니다.

---

## 🎯 마치며

DynamoDB의 RCU와 WCU는 데이터베이스 비용과 성능을 결정하는 핵심 요소입니다. 워크로드의 특성을 정확히 파악하여 **온디맨드** 또는 **프로비저닝** 모드를 선택하고, 필요에 따라 **Auto Scaling**을 활용하면 DynamoDB를 더욱 효율적으로 사용할 수 있습니다. 특히, AWS 시험에서는 RCU와 WCU 계산 문제가 자주 출제되므로, 직접 용량 계산기를 사용해보면서 개념을 익히는 것이 중요합니다.