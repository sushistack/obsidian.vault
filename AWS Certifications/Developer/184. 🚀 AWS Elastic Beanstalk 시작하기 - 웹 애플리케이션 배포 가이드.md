
## 💡 Elastic Beanstalk이란?

**Elastic Beanstalk**는 AWS에서 제공하는 PaaS(Platform as a Service) 솔루션으로, 개발자가 코드를 업로드하면 자동으로 애플리케이션 배포 및 인프라 관리를 처리해 주는 서비스입니다. 복잡한 인프라 설정(EC2, 로드 밸런서, Auto Scaling 등)을 직접 구성할 필요 없이 애플리케이션 배포에만 집중할 수 있습니다.

Elastic Beanstalk는 **애플리케이션(Application)**과 **환경(Environment)**이라는 두 가지 핵심 개념으로 구성됩니다.

|용어|설명|
|---|---|
|**애플리케이션 (Application)**|애플리케이션의 버전과 환경을 관리하는 논리적인 단위입니다.|
|**환경 (Environment)**|애플리케이션의 특정 버전이 실행되는 인프라(EC2 인스턴스, 로드 밸런서 등) 모음입니다.|


---

## ⚙️ 첫 번째 웹 애플리케이션 생성 단계

Elastic Beanstalk 콘솔에서 웹 애플리케이션을 생성하는 과정을 단계별로 자세히 알아보겠습니다.

### 1. 환경 생성 시작

- **Elastic Beanstalk 콘솔**로 이동하여 **'애플리케이션 생성(Create Application)'**을 클릭합니다.
    
- **환경 유형** 선택: 웹사이트를 운영하므로 **'웹 서버 환경(Web server environment)'**을 선택합니다. (태스크 처리는 '작업자 환경(Worker environment)' 선택)
    

### 2. 애플리케이션 및 환경 설정

- **애플리케이션 이름** 설정: `MyApplication`과 같은 이름을 지정합니다.
- **환경 이름** 설정: 개발 환경이므로 `MyApplication-dev`와 같이 환경 이름을 지정합니다.
- **도메인 이름**은 자동으로 생성되며, 이 주소를 통해 애플리케이션에 접근할 수 있습니다.

### 3. 플랫폼 및 코드 선택

- **플랫폼(Platform)** 선택: 사용하려는 언어 및 프레임워크를 선택합니다. 이 예시에서는 **Node.js**를 선택합니다.
    
- **애플리케이션 코드(Application code)**: **'샘플 애플리케이션(Sample application)'**을 선택하여 Elastic Beanstalk의 기본 기능을 테스트합니다.
    

### 4. 사전 설정 선택 (Preseting)

- 인프라 구성을 단순화하기 위해 **'단일 인스턴스(Single instance)'**를 선택합니다. 이는 AWS 프리 티어(Free Tier) 사용 시 적합합니다.
    

### 5. IAM 역할 설정 (중요)

- Elastic Beanstalk이 필요한 AWS 리소스(EC2, S3 등)를 생성하고 관리할 수 있도록 **IAM 역할**을 설정해야 합니다.
    
- **서비스 역할(Service role)**: `elasticbeanstalk-service-role`을 새로 생성합니다.
    
- **EC2 인스턴스 프로파일(EC2 Instance profile)**: Elastic Beanstalk이 EC2 인스턴스를 대신하여 작업을 수행하는 데 필요한 역할입니다.
    
    - **IAM 콘솔**로 이동하여 **'역할 생성(Create role)'**을 클릭합니다.
    - **신뢰할 수 있는 엔티티(Trusted entity)**: **AWS 서비스 -> EC2**를 선택합니다.
    - **권한 정책(Permissions policy)**: `beanstalk`으로 검색하여 다음 3가지 정책을 추가합니다.
        - `AWSElasticBeanstalkWebTier`
        - `AWSElasticBeanstalkWorkerTier`
        - `AWSElasticBeanstalkMulticontainerDocker`
    - **역할 이름**: `aws-elasticbeanstalk-ec2-role`로 지정하고 역할을 생성합니다.
    - Elastic Beanstalk 콘솔로 돌아와 새로고침하면, 방금 생성한 역할이 자동으로 채워집니다.


---

## 🚀 배포 및 리소스 확인

모든 설정을 마치고 **'건너뛰기 및 검토(Skip to review)'**를 거쳐 **'제출(Submit)'**을 클릭하면 환경 배포가 시작됩니다.

### 1. CloudFormation 스택

- Elastic Beanstalk는 내부적으로 **CloudFormation** 서비스를 사용하여 모든 인프라 리소스를 프로비저닝합니다.
- **CloudFormation 콘솔**에서 `awseb-...`와 같은 이름의 스택이 생성되고, 상태가 `CREATE_IN_PROGRESS`에서 `CREATE_COMPLETE`로 변경되는 것을 확인할 수 있습니다.
- **CloudFormation 템플릿**을 통해 Elastic Beanstalk가 생성하는 리소스들을 시각적으로 확인할 수 있습니다.

### 2. 생성된 AWS 리소스

Elastic Beanstalk는 단일 인스턴스 환경을 위해 다음과 같은 리소스들을 자동으로 생성합니다.

|리소스 유형|설명|
|---|---|
|**EC2 인스턴스**|애플리케이션 코드가 실행되는 가상 서버입니다.|
|**Auto Scaling 그룹**|인스턴스의 개수를 관리하며, 여기서는 단일 인스턴스를 유지합니다.|
|**Elastic IP**|고정적인 공인 IP 주소를 제공하여 인스턴스의 재부팅에도 IP가 변하지 않도록 합니다.|
|**보안 그룹**|인스턴스의 트래픽을 제어하는 방화벽 역할을 합니다.|
|**S3 버킷**|애플리케이션 코드, 로그 등을 저장하는 데 사용됩니다.|

### 3. 애플리케이션 접속

- 환경 배포가 성공하면, Elastic Beanstalk 콘솔에서 **도메인(Domain) 주소**가 표시됩니다.
- 이 도메인 주소를 클릭하면, "Congratulations, you are now running Elastic Beanstalk..." 메시지가 포함된 샘플 애플리케이션 페이지에 접속할 수 있습니다.


---

## 📚 추가 기능 및 관리

- **업로드 및 배포(Upload and deploy)**: 새 버전의 코드를 업로드하여 애플리케이션을 업데이트할 수 있습니다.
- **모니터링(Monitoring)**: CPU 사용량, 네트워크 트래픽 등 애플리케이션의 지표를 확인할 수 있습니다.
- **로그(Logs)**: 애플리케이션 로그에 접근하여 문제를 진단할 수 있습니다.
- **구성(Configuration)**: EC2 인스턴스 유형, 환경 변수 등 다양한 설정을 변경할 수 있습니다.


---

## 🗑️ 리소스 정리

실습을 마친 후에는 불필요한 비용이 발생하지 않도록 애플리케이션을 삭제해야 합니다.

1. **Elastic Beanstalk 콘솔**로 이동합니다.
2. 애플리케이션(`MyApplication`)을 선택합니다.
3. **'작업(Action)'** 메뉴에서 **'애플리케이션 삭제(Delete application)'**를 선택합니다.

이 과정을 통해 Elastic Beanstalk가 생성한 모든 AWS 리소스가 자동으로 삭제됩니다.