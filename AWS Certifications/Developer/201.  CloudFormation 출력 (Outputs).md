
**출력**은 CloudFormation 스택에서 생성된 리소스의 특정 값을 외부에 노출하는 선택적 섹션입니다. 출력 값을 정의하면 해당 값을 콘솔이나 AWS CLI를 통해 쉽게 조회할 수 있으며, 가장 중요한 기능은 다른 CloudFormation 스택에서 이 값을 재사용할 수 있게 만드는 것입니다.

#### 출력의 주요 역할

- **스택 간의 협업**: 네트워크 전문가가 VPC 스택을 관리하고, 애플리케이션 개발자가 이 VPC ID를 참조하여 애플리케이션 스택을 배포하는 등 팀 간의 협업을 용이하게 합니다.

- **재사용성**: 한 번 정의된 리소스(예: VPC ID, 서브넷 ID)를 여러 다른 스택에서 재사용할 수 있어 중복 작업을 방지합니다.

---

### 🔗 스택 간 연결: 내보내기 및 가져오기

출력 기능을 사용하면 두 개의 서로 다른 스택을 연결할 수 있습니다.

#### 1. 출력 값 내보내기 (Export)

`Outputs` 섹션에서 `Export` 속성을 사용하여 값을 내보냅니다. 내보내기 이름은 특정 리전 내에서 **유일해야** 합니다.

- **예시**: SSH 보안 그룹 ID를 내보내는 템플릿
    
```YAML
# Stack 1: SSH Security Group Stack
Resources:
  SSHSecurityGroup:
	Type: AWS::EC2::SecurityGroup
	Properties:
	  GroupDescription: SSH Security Group

Outputs:
  SSHSecurityGroupId:
	Description: The ID of the SSH Security Group
	Value: !Ref SSHSecurityGroup
	Export:
	  Name: SSHSecurityGroup
```
    
    이 예시에서 `SSHSecurityGroup`이라는 이름으로 보안 그룹 ID를 내보내고 있습니다.


---

#### 2. 출력 값 가져오기 (Import)

다른 스택에서 `Fn::ImportValue` 함수를 사용하여 내보내진 값을 가져옵니다.

- **예시**: EC2 인스턴스 스택에서 내보내진 보안 그룹 ID를 가져오는 템플릿
    
```YAML
# Stack 2: Application Stack
Resources:
  MyInstance:
	Type: AWS::EC2::Instance
	Properties:
	  SecurityGroupIds:
		- !ImportValue SSHSecurityGroup  # 내보낸 이름 사용
```
    
    이 예시에서 `!ImportValue SSHSecurityGroup`은 첫 번째 스택에서 내보낸 `SSHSecurityGroup`의 실제 값(보안 그룹 ID)을 가져와 `MyInstance`에 연결합니다.
    

---

### ⚠️ 스택 삭제 종속성

스택 간에 출력-가져오기 종속성이 형성되면, **값을 내보내는 스택**은 해당 값을 가져오는 다른 스택이 모두 삭제될 때까지 **삭제할 수 없습니다**. 이는 의존성을 가진 리소스가 사라지는 것을 방지하여 인프라의 안정성을 보장합니다.