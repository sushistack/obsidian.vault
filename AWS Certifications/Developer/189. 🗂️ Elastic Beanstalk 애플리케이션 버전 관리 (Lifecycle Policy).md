
Elastic Beanstalk는 최대 **1,000개**의 애플리케이션 버전을 계정 내에 저장할 수 있습니다. 애플리케이션 버전이 이 한도를 초과하면 더 이상 새로운 버전을 배포할 수 없습니다. 이 문제를 해결하기 위해 **라이프사이클 정책(Lifecycle Policy)**을 설정하여 오래된 버전을 자동으로 삭제할 수 있습니다.

---

### 📜 라이프사이클 정책 설정 방법

라이프사이클 정책은 Elastic Beanstalk 애플리케이션의 **`설정(Settings)`** 메뉴에서 활성화할 수 있습니다. 다음 두 가지 기준으로 정책을 설정할 수 있습니다.

1. **버전 개수(Count) 기반**: 계정에 보관할 애플리케이션 버전의 최대 개수를 지정합니다. 예를 들어, **`최대 200개`**로 설정하면 201번째 버전이 생성될 때 가장 오래된 버전이 삭제됩니다.
2. **기간(Age) 기반**: 특정 기간(일수)이 지난 버전을 자동으로 삭제합니다. 예를 들어, **`180일`**로 설정하면 180일이 경과한 버전은 삭제됩니다.

**참고**: 현재 사용 중인(환경에 배포된) 애플리케이션 버전은 라이프사이클 정책에 의해 삭제되지 않습니다.

---

### 📦 S3 소스 번들 관리

Elastic Beanstalk에 업로드된 애플리케이션 버전(`.zip` 파일)은 내부적으로 **Amazon S3 버킷**에 저장됩니다. 라이프사이클 정책을 설정할 때, S3에 저장된 소스 번들에 대해서도 어떻게 처리할지 결정할 수 있습니다.

|옵션|설명|장점|
|---|---|---|
|**S3에서 소스 번들 유지**|Elastic Beanstalk 콘솔에서는 버전을 삭제하지만, S3 버킷에는 `.zip` 파일을 남겨둡니다.|나중에 필요한 경우 복구(Recovery)할 수 있어 데이터 손실을 방지합니다.|
|**S3에서 소스 번들 삭제**|Elastic Beanstalk 버전 정보와 S3에 저장된 `.zip` 파일을 모두 삭제합니다.|S3 스토리지 비용을 절감할 수 있습니다.|

### 🔑 IAM 역할과 권한

라이프사이클 정책에 따라 S3에서 소스 번들을 삭제하는 작업은 **`AWS Elastic Beanstalk 서비스 역할(Service Role)`**을 통해 수행됩니다. 이 역할은 S3 버킷에 대한 삭제 권한을 가지고 있어야 합니다.