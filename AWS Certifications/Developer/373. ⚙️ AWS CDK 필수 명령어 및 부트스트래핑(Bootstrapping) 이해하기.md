
이번 아티클에서는 **AWS CDK(Cloud Development Kit)**를 사용할 때 반드시 알아야 할 핵심 명령어들을 정리하고, 특히 CDK 배포의 필수 선행 과정인 **부트스트래핑(Bootstrapping)**에 대해 자세히 알아보겠습니다.

---

### 1️⃣ AWS CDK 핵심 명령어

아래 표는 CDK 개발 워크플로우에서 자주 사용되는 필수 명령어들을 요약한 것입니다.

| 명령어                          | 역할         | 설명                                                                                                            |
| ---------------------------- | ---------- | ------------------------------------------------------------------------------------------------------------- |
| **`npm install -g aws-cdk`** | CDK CLI 설치 | CDK 애플리케이션을 개발하고 관리하기 위한 커맨드 라인 도구와 라이브러리를 설치합니다.                                                             |
| **`cdk init`**               | 프로젝트 초기화   | 특정 템플릿과 언어(예: Python, JavaScript)를 기반으로 새로운 CDK 프로젝트 구조를 생성합니다.                                               |
| **`cdk synth`**              | 템플릿 합성     | CDK 코드(예: TypeScript, Python)를 AWS CloudFormation 템플릿(JSON 또는 YAML)으로 변환하고 출력합니다. 배포 전에 생성될 템플릿을 확인할 때 유용합니다. |
| **`cdk bootstrap`**          | 부트스트랩      | CDK 애플리케이션 배포에 필요한 필수 리소스(S3 버킷, IAM 역할 등)를 AWS 계정 및 리전에 프로비저닝합니다.                                            |
| **`cdk deploy`**             | 스택 배포      | 합성된 CloudFormation 템플릿을 AWS 계정에 배포하여 클라우드 리소스를 생성하거나 업데이트합니다.                                                 |
| **`cdk diff`**               | 변경 사항 확인   | 로컬에서 수정한 CDK 코드와 현재 AWS에 배포된 스택 간의 차이점을 보여줍니다.                                                                |
| **`cdk destroy`**            | 스택 삭제      | 배포된 모든 CloudFormation 스택과 관련 리소스를 삭제합니다.                                                                      |

---

### 2️⃣ CDK 부트스트래핑(Bootstrapping) 심층 분석

![[Pasted image 20250911185949.png]]

`cdk bootstrap`은 `cdk deploy`를 실행하기 전에 **반드시 한 번은 수행해야 하는 필수 선행 작업**입니다.

#### **부트스트래핑이란?**

부트스트래핑은 CDK 애플리케이션을 AWS 환경에 배포하기 위한 **기본 인프라(pre-requisite resources)**를 준비하는 과정입니다. 여기서 말하는 'AWS 환경'은 **특정 계정(Account)과 리전(Region)의 조합**을 의미합니다.

#### **부트스트래핑이 하는 일**

`cdk bootstrap` 명령을 실행하면, CDK는 다음 리소스를 포함하는 `CDKToolkit`이라는 이름의 CloudFormation 스택을 해당 계정/리전에 생성합니다.

- **S3 버킷:** CDK가 합성된 CloudFormation 템플릿과 Lambda 코드, Docker 이미지 등의 **아티팩트(artifacts)**를 업로드하는 데 사용됩니다.
    
- **IAM 역할:** CDK가 CloudFormation 스택을 배포하고, 리소스들을 생성/수정/삭제하는 데 필요한 권한을 가집니다.
    

이러한 리소스들은 CDK가 복잡한 배포 작업을 안전하고 효율적으로 수행할 수 있게 하는 기반이 됩니다.

#### **부트스트래핑 명령어**

CDK는 특정 계정과 리전에 부트스트랩을 수행합니다.

```Bash
# 특정 계정 및 리전에 부트스트랩 실행
cdk bootstrap aws://<AWS 계정 ID>/<AWS 리전>
```

- ** `<AWS 계정 ID>`:** AWS 계정 번호(예: `123456789012`)
- ** `<AWS 리전>`:** AWS 리전 코드(예: `ap-northeast-2`)

#### **부트스트래핑을 하지 않으면?**

만약 특정 환경(계정/리전)에 부트스트래핑을 하지 않고 `cdk deploy`를 시도하면, CDK는 배포에 필요한 S3 버킷과 IAM 역할을 찾지 못해 **`Policy contains a statement with one or more invalid principal`**과 같은 오류를 발생시키며 배포가 실패합니다.

따라서 새로운 계정/리전에 CDK를 처음 사용할 때는 반드시 `cdk bootstrap`을 먼저 실행해야 합니다. 한 번 부트스트랩을 완료하면 해당 환경에서는 다시 실행할 필요가 없습니다.

이 과정을 통해 CDK는 CloudFormation의 복잡한 배포 과정을 추상화하고, 개발자가 코드 작성에만 집중할 수 있는 환경을 제공합니다.