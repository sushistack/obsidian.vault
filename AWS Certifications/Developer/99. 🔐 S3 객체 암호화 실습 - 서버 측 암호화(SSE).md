
이번 실습에서는 S3 버킷에 객체를 업로드하고, 다양한 서버 측 암호화(SSE) 방식을 적용하고 변경하는 과정을 살펴보겠습니다. 특히, 기본 버킷 암호화 설정과 객체별 암호화 설정을 통해 암호화가 어떻게 작동하는지 확인합니다.

---

### 1. 버킷의 기본 암호화 설정: SSE-S3 🔑

새로운 버킷을 생성할 때 기본 암호화 설정을 지정할 수 있습니다. 여기서는 `SSE-S3`를 기본값으로 설정하여 버킷을 생성합니다.

1. **버킷 생성:** `demo-encryption-stephane-v2`라는 이름의 버킷을 생성합니다.
2. `기본 암호화(Default encryption)` 설정에서 **`Amazon S3 관리 키(SSE-S3)`**를 선택하고 버킷을 생성합니다.
3. 버킷 생성 후 `coffee.jpg` 파일을 업로드합니다.

**결과 확인:**

- 업로드된 `coffee.jpg` 객체의 `속성(Properties)` 탭에서 `서버 측 암호화(Server-side encryption)` 설정을 확인합니다.
- 파일이 **Amazon S3 관리 키(SSE-S3)**로 암호화된 것을 볼 수 있습니다.

### 2. 객체별 암호화 변경: SSE-KMS 🔄

버킷의 기본 설정과 다르게, 특정 객체에만 다른 암호화 방식을 적용할 수 있습니다. 이 과정은 객체의 새 버전을 생성합니다.

1. 업로드한 `coffee.jpg` 객체를 선택하고 `속성(Properties)` 탭으로 이동합니다.
2. `서버 측 암호화` 섹션에서 `편집(Edit)`을 클릭합니다.
3. `서버 측 암호화` 설정을 **`AWS KMS 키(SSE-KMS)`**로 변경합니다.
4. **KMS 키(KMS key)** 드롭다운 메뉴에서 AWS 계정에 기본으로 제공되는 `aws/s3` 키를 선택합니다. (고유한 KMS 키를 생성하여 사용할 수도 있지만 비용이 발생합니다.)
5. **`버전 관리(Versioning)`**를 활성화한 상태에서 이 작업을 수행하면, 암호화 설정이 변경된 `coffee.jpg`의 **새로운 버전**이 생성됩니다.

**결과 확인:**

- 객체 목록에서 `버전 표시(Show versions)`를 활성화합니다.
- `coffee.jpg`의 **현재 버전**은 `SSE-KMS`로 암호화되었으며, **이전 버전**은 `SSE-S3`로 암호화된 것을 확인할 수 있습니다.

### 3. 콘솔에서 다룰 수 없는 암호화 방식 ⚠️

- **SSE-C:** 콘솔에서는 `SSE-C`를 설정할 수 없습니다. 이 방식은 클라이언트 측에서 암호화 키를 HTTP 헤더에 포함하여 S3로 전송해야 하므로, `AWS CLI` 또는 `SDK`를 통해서만 설정이 가능합니다.
- **클라이언트 측 암호화(Client-Side Encryption):** 이 방식은 클라이언트가 데이터를 S3로 보내기 전에 직접 암호화하는 방식입니다. 따라서 S3 측에서는 객체가 이미 암호화된 상태로 업로드된 것으로 인식하므로, 콘솔에 별도의 설정 옵션이 없습니다.

이 실습을 통해 S3의 다양한 서버 측 암호화 방식(SSE-S3, SSE-KMS)을 적용하고 관리하는 방법을 익혔습니다. 이는 S3에 저장되는 데이터를 안전하게 보호하는 데 필수적인 지식입니다.
