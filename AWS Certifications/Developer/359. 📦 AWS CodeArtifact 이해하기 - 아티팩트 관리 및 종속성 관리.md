
소프트웨어 개발에서 **종속성(dependencies)** 관리는 매우 중요한 부분입니다. AWS CodeArtifact는 이 복잡한 과정을 AWS 클라우드 내에서 안전하고 효율적으로 관리할 수 있도록 돕는 서비스입니다. 이 가이드는 CodeArtifact의 핵심 기능과 작동 방식을 자세히 설명합니다.

---

## 🧐 1. CodeArtifact란 무엇인가?

![[Pasted image 20250909204042.png]]

CodeArtifact는 개발자들이 소프트웨어를 빌드할 때 사용하는 **코드 종속성(dependencies)**을 관리하는 서비스입니다. 이를 통해 Maven, Gradle, npm, pip, NuGet 등과 같은 일반적인 종속성 관리 도구와 쉽게 통합할 수 있습니다.

### **주요 특징**

- **보안 및 확장성:** 모든 아티팩트(artifact)는 AWS VPC 내에 저장되므로 보안이 강화되며, 개발 규모에 따라 유연하게 확장할 수 있습니다.
    
- **비용 효율성:** 자체 아티팩트 관리 시스템을 구축하고 운영하는 것에 비해 비용이 저렴합니다.
    
- **통합성:** CodeBuild와 같은 다른 AWS 서비스와 긴밀하게 통합되어 CI/CD 파이프라인에서 쉽게 사용할 수 있습니다.

---

## 🏛️ 2. CodeArtifact의 구조: 도메인과 리포지토리

CodeArtifact는 **도메인(Domains)**과 **리포지토리(Repositories)**라는 계층적 구조로 구성됩니다.

- **도메인:** 여러 리포지토리를 포함하는 논리적인 그룹입니다. 도메인 내의 리포지토리 간에 패키지를 공유할 수 있습니다.
    
- **리포지토리:** 패키지(아티팩트)를 저장하는 장소입니다.

### **CodeArtifact의 두 가지 주요 기능**

1. **공개 리포지토리의 프록시 및 캐싱:**
    
    - 개발자는 npm, Maven Central, PyPI 등 **공개 아티팩트 리포지토리**에 직접 접근하는 대신 CodeArtifact를 통해 접근합니다.
        
    - CodeArtifact는 개발자의 요청을 **프록시(proxy)**하여 공개 리포지토리에서 종속성을 가져옵니다.
        
    - 가져온 종속성은 CodeArtifact에 **캐시(cache)**되어, 향후 요청 시 더 빠르게 제공됩니다. 이는 외부 종속성이 사라지더라도 코드를 항상 빌드할 수 있도록 보장하는 중요한 기능입니다.
        
    - **네트워크 보안 강화:** 개발자는 CodeArtifact와만 통신하므로, 외부 네트워크에 대한 접근을 제한하여 보안을 높일 수 있습니다.
        
2. **자체 아티팩트 발행(Publishing):**
    
    - 개발자나 CI/CD 파이프라인(예: CodeBuild)은 자체적으로 개발한 패키지를 CodeArtifact 리포지토리에 발행하여 관리할 수 있습니다.
        
    - 이렇게 하면 모든 내부 아티팩트가 한 곳에 모여 체계적으로 관리되고 재사용될 수 있습니다.

---

## ⚙️ 3. CodeArtifact와 AWS 서비스 연동

CodeArtifact는 다른 AWS 서비스와 연동하여 더욱 강력한 기능을 제공합니다.

### **EventBridge 통합**

![[Pasted image 20250909204124.png]]

- 패키지가 생성, 수정, 삭제될 때와 같은 CodeArtifact의 특정 이벤트는 **EventBridge**로 전송됩니다.
    
- EventBridge는 이러한 이벤트를 기반으로 **람다 함수(Lambda functions), SQS, SNS** 등 다양한 AWS 서비스를 트리거할 수 있습니다.
    

### **CodePipeline과의 연동**

- EventBridge를 통해 CodeArtifact의 패키지 업데이트 이벤트를 **CodePipeline**의 트리거로 사용할 수 있습니다.
    
- **예시 시나리오:**
    
    1. CodeArtifact에서 종속성 패키지(`packageA`)의 새 버전이 발행됩니다.
        
    2. 이벤트가 EventBridge를 통해 CodePipeline을 트리거합니다.
        
    3. CodePipeline은 `packageA`를 사용하는 애플리케이션을 **CodeBuild**로 전달하여 자동으로 재빌드합니다.
        
    4. 재빌드된 애플리케이션은 **CodeDeploy**를 통해 프로덕션 환경에 배포됩니다.
        
    
    - 이러한 자동화된 파이프라인은 보안 업데이트 등으로 인해 종속성이 변경될 때 매우 유용합니다.
        

---

## 🤝 4. 계정 간 접근 제어 (Cross-Account Access)

CodeArtifact 리포지토리에 대한 접근 권한은 IAM 정책으로 제어합니다.

- **단일 계정:** 동일 계정 내의 IAM 사용자나 역할은 IAM 정책을 통해 리포지토리에 접근할 수 있습니다.
    
- **교차 계정:** 다른 AWS 계정의 사용자가 CodeArtifact 리포지토리에 접근하려면 **리소스 정책(Resource Policy)**을 사용해야 합니다.
    
    - 리소스 정책은 리포지토리 자체에 연결되며, 특정 계정이나 사용자에게 `read` 또는 `write`와 같은 권한을 부여합니다.
        
    - **중요:** 리소스 정책은 패키지 단위로 접근을 제어할 수 없으며, **리포지토리 전체**에 대한 접근 권한만 부여할 수 있습니다.