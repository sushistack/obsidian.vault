
S3 객체 암호화에는 크게 **서버 측 암호화(Server-Side Encryption, SSE)**와 **클라이언트 측 암호화(Client-Side Encryption)** 두 가지 방식이 있습니다. 이들은 각각 다른 키 관리 주체를 가집니다.

---

### 1. 서버 측 암호화 (Server-Side Encryption, SSE)

서버 측 암호화는 S3에 데이터가 저장될 때 AWS가 객체를 암호화하는 방식입니다.

**SSE-S3: S3가 관리하는 키로 암호화**

![[Pasted image 20250809191515.png]]

- **키 관리:** AWS가 키를 관리, 소유, 사용합니다.
- **암호화 방식:** `AES-256` 암호화를 사용합니다.
- **활성화:** 새 버킷과 객체에 대해 기본적으로 활성화되어 있습니다. 수동으로 활성화하려면 HTTP 헤더에 `"x-amz-server-side-encryption": "AES256"`를 포함해야 합니다.
- **특징:** 가장 간단한 암호화 방식으로, 별도의 키 관리가 필요 없습니다.

**SSE-KMS: KMS가 관리하는 키로 암호화**

![[Pasted image 20250809191552.png]]

- **키 관리:** **KMS(Key Management Service)**를 통해 사용자가 키를 직접 관리합니다. 키 사용에 대한 로그(CloudTrail)를 남길 수 있습니다.
- **활성화:** `"x-amz-server-side-encryption": "aws:kms"` 헤더와 함께 사용할 KMS 키 ID를 지정해야 합니다.
- **특징:** S3 객체 접근 권한 외에 KMS 키 접근 권한이 추가로 필요합니다. KMS API 호출 횟수가 할당량(quota)에 포함되므로, 대규모 트래픽 발생 시 요청 제한(throttling)이 발생할 수 있습니다.

**SSE-C: 고객이 제공하는 키로 암호화**

![[Pasted image 20250809191613.png]]

- **키 관리:** 사용자가 직접 암호화 키를 생성하고 관리합니다. AWS는 키를 저장하지 않고, 암호화/복호화에 사용한 후 즉시 폐기합니다.
- **활성화:** `HTTPS`를 사용하여 암호화 키를 HTTP 헤더에 포함시켜 요청해야 합니다. 키가 노출되지 않도록 주의해야 합니다.
- **특징:** S3는 객체에 대한 암호화만 수행하며, 키는 오직 사용자만 알고 있습니다. 데이터를 복호화하려면 암호화에 사용된 키를 다시 제공해야 합니다.

---

### 2. 클라이언트 측 암호화 (Client-Side Encryption)

![[Pasted image 20250809191625.png]]

클라이언트 측 암호화는 S3로 파일을 전송하기 전에 **사용자(클라이언트)**가 직접 데이터를 암호화하는 방식입니다.

- **키 관리:** 키와 암호화/복호화 과정 모두 클라이언트가 전적으로 관리합니다.
- **작동 방식:** 클라이언트가 파일을 암호화한 후, 암호화된 파일을 S3에 업로드합니다. S3는 이 파일을 일반 객체로 취급합니다. 복호화는 S3에서 데이터를 가져온 후 클라이언트 측에서 수행합니다.
- **특징:** S3는 암호화에 관여하지 않으므로, 키 관리에 대한 완전한 통제권을 가질 수 있습니다.

---

### 3. 전송 중 암호화 (Encryption in Transit)

![[Pasted image 20250809191650.png]]

전송 중 암호화는 데이터가 클라이언트와 S3 버킷 사이를 이동할 때 암호화하는 것을 의미합니다.

- **활성화:** S3 엔드포인트에 `HTTPS`를 사용하여 안전한 통신을 보장합니다.
- **강제 적용:** 버킷 정책을 사용하여 `aws:SecureTransport` 조건이 `false`일 경우 `Deny` 규칙을 추가하면 `HTTP` 요청을 모두 차단하고 `HTTPS`만 허용하도록 강제할 수 있습니다.

```JSON
{
    "Statement": [
        {
            "Effect": "Deny",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::my-bucket/*",
            "Condition": {
                "Bool": {
                    "aws:SecureTransport": "false"
                }
            }
        }
    ]
}
```