
## π§ SQS FIFO νλ€?

**FIFO(First-In-First-Out) ν**λ” λ©”μ‹μ§€κ°€ μ „μ†΅λ μμ„λ€λ΅ μ»¨μλ¨Έμ—κ² μ „λ‹¬λλ” SQS νμ ν• μ ν•μ…λ‹λ‹¤. μΌλ° SQS ν(Standard Queue)μ™€ λ‹¬λ¦¬ λ©”μ‹μ§€ μμ„λ¥Ό μ—„κ²©ν•κ² λ³΄μ¥ν•λ―€λ΅, λ©”μ‹μ§€μ μμ„κ°€ μ¤‘μ”ν• κΈμµ κ±°λ, μ£Όλ¬Έ μ²λ¦¬, λ΅κ·Έ μ²λ¦¬μ™€ κ°™μ€ μ• ν”λ¦¬μΌ€μ΄μ…μ— μ ν•©ν•©λ‹λ‹¤.

### ν•µμ‹¬ κΈ°λ¥

![[Pasted image 20250817204557.png]]

- **μμ„ λ³΄μ¥:** λ©”μ‹μ§€ κ·Έλ£Ή λ‚΄μ—μ„ λ©”μ‹μ§€κ°€ μ „μ†΅λ μμ„λ€λ΅ μ •ν™•ν μ²λ¦¬λ©λ‹λ‹¤.
- **μ •ν™•ν ν• λ² μ²λ¦¬(Exactly-Once Processing):** μ¤‘λ³µ λ©”μ‹μ§€κ°€ ν μμ¤€μ—μ„ μλ™μΌλ΅ μ κ±°λ©λ‹λ‹¤.

### μ²λ¦¬λ‰ μ ν•

μμ„ λ³΄μ¥ λ©”μ»¤λ‹μ¦μΌλ΅ μΈν•΄ Standard νλ³΄λ‹¤ μ²λ¦¬λ‰μ— μ ν•μ΄ μμµλ‹λ‹¤.

- **λ°°μΉ μ²λ¦¬ λ―Έμ‚¬μ© μ‹:** μ΄λ‹Ή 300κ° λ©”μ‹μ§€ μ „μ†΅
- **λ°°μΉ μ²λ¦¬ μ‚¬μ© μ‹:** μ΄λ‹Ή 3,000κ° λ©”μ‹μ§€ μ „μ†΅

---

## π”‘ FIFO νμ ν•„μ νλΌλ―Έν„°


FIFO νλ¥Ό μ‚¬μ©ν•  λ•λ” λ©”μ‹μ§€ μμ„μ™€ μ¤‘λ³µ μ κ±°λ¥Ό μ„ν•΄ λ‘ κ°€μ§€ μ¤‘μ”ν• νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤.

### 1. **λ©”μ‹μ§€ κ·Έλ£Ή ID (`MessageGroupId`)**

- **μ©λ„:** λ™μΌν• `MessageGroupId`λ¥Ό κ°€μ§„ λ©”μ‹μ§€λ“¤μ€ **μμ„κ°€ λ³΄μ¥**λ©λ‹λ‹¤. μ„λ΅ λ‹¤λ¥Έ `MessageGroupId`λ¥Ό κ°€μ§„ λ©”μ‹μ§€λ“¤μ€ λ…λ¦½μ μΌλ΅ μ²λ¦¬λμ–΄ λ³‘λ ¬ μ²λ¦¬κ°€ κ°€λ¥ν•λ―€λ΅, μ „μ²΄ μ²λ¦¬λ‰μ„ λ†’μΌ μ μμµλ‹λ‹¤.
- **ν•„μ μ—¬λ¶€:** FIFO νλ΅ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Ό λ• **λ°λ“μ‹ ν¬ν•¨ν•΄μ•Ό ν•λ” ν•„μ νλΌλ―Έν„°**μ…λ‹λ‹¤.

### 2. **λ©”μ‹μ§€ μ¤‘λ³µ μ κ±° ID (`MessageDeduplicationId`)**

- **μ©λ„:** λ©”μ‹μ§€ μ¤‘λ³µ μ „μ†΅ μ‹, 5λ¶„ λ‚΄μ— λ™μΌν• `MessageDeduplicationId`κ°€ κ°μ§€λλ©΄ μ¤‘λ³µλ λ©”μ‹μ§€λ¥Ό μλ™μΌλ΅ μ κ±°ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ **`μ •ν™•ν ν• λ²(Exactly-once)`** λ©”μ‹μ§€κ°€ μ²λ¦¬λλ„λ΅ λ³΄μ¥ν•©λ‹λ‹¤.

- **`Content-based deduplication`:** μ΄ κΈ°λ¥μ„ ν μ„¤μ •μ—μ„ ν™μ„±ν™”ν•λ©΄, λ©”μ‹μ§€ λ³Έλ¬Έμ ν•΄μ‹ κ°’μ„ κΈ°λ°μΌλ΅ μλ™μΌλ΅ μ¤‘λ³µ μ κ±° IDκ°€ μƒμ„±λ©λ‹λ‹¤. λ”°λΌμ„ λ³„λ„μ `MessageDeduplicationId`λ¥Ό μ§€μ •ν•μ§€ μ•μ•„λ„ λ©λ‹λ‹¤.

---

## π§ FIFO ν μ‹¤μµ κ°€μ΄λ“

### 1. FIFO ν μƒμ„±

- **ν μ΄λ¦„:** `DemoQueue.fifo`. FIFO νλ” **`.fifo` μ ‘λ―Έμ‚¬**λ¥Ό ν•„μλ΅ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤.

- **μ„¤μ •:** νλ¥Ό μƒμ„±ν•  λ• **`Content-based deduplication`**μ„ ν™μ„±ν™”ν•μ—¬ λ©”μ‹μ§€ λ³Έλ¬Έμ„ κΈ°μ¤€μΌλ΅ μλ™μΌλ΅ μ¤‘λ³µ μ κ±°κ°€ μ΄λ£¨μ–΄μ§€λ„λ΅ μ„¤μ •ν•©λ‹λ‹¤.

### 2. λ©”μ‹μ§€ μ „μ†΅

- **`DemoQueue.fifo`**μ—μ„ `Send and receive messages`λ¥Ό ν΄λ¦­ν•©λ‹λ‹¤.

- λ‹¤μκ³Ό κ°™μ΄ μμ„λ€λ΅ λ„¤ κ°μ λ©”μ‹μ§€λ¥Ό λ³΄λƒ…λ‹λ‹¤. **λ¨λ‘ λ™μΌν• `Message group ID`(`demo`)**λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

|λ©”μ‹μ§€|λ³Έλ¬Έ|λ©”μ‹μ§€ κ·Έλ£Ή ID|μ¤‘λ³µ μ κ±° ID|
|---|---|---|---|
|**λ©”μ‹μ§€ 1**|`Hello World 1`|`demo`|`ID 1`|
|**λ©”μ‹μ§€ 2**|`Hello World 2`|`demo`|`ID 2`|
|**λ©”μ‹μ§€ 3**|`Hello World 3`|`demo`|`ID 3`|
|**λ©”μ‹μ§€ 4**|`Hello World 4`|`demo`|`ID 4`|

### 3. λ©”μ‹μ§€ μμ„ ν™•μΈ

- 4κ°μ λ©”μ‹μ§€λ¥Ό λ¨λ‘ λ³΄λ‚Έ ν›„ **`Poll for messages`**λ¥Ό ν΄λ¦­ν•©λ‹λ‹¤.

- μμ‹ λ λ©”μ‹μ§€λ“¤μ„ ν™•μΈν•λ©΄, `Hello World 1`λ¶€ν„° `Hello World 4`κΉμ§€ **λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έ μμ„μ™€ λ™μΌν•κ²** μμ‹ λ κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

μ΄ μ‹¤μµμ€ FIFO νκ°€ λ©”μ‹μ§€ κ·Έλ£Ή IDλ¥Ό κΈ°λ°μΌλ΅ μ—„κ²©ν• μμ„ λ³΄μ¥μ„ μ κ³µν•λ©°, μ¤‘λ³µ μ κ±° κΈ°λ¥μ„ ν†µν•΄ μ•μ •μ μΈ λ©”μ‹μ§€ μ²λ¦¬ ν™κ²½μ„ κµ¬μ¶•ν•λ” λ° ν•„μμ μ„μ„ λ³΄μ—¬μ¤λ‹λ‹¤.