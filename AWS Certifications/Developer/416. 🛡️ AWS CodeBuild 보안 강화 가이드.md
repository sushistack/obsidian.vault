
AWS CodeBuildλ” μ†μ¤ μ½”λ“λ¥Ό μ»΄νμΌν•κ³  ν…μ¤νΈν•λ©° λ°°ν¬ ν¨ν‚¤μ§€λ¥Ό μƒμ„±ν•λ” μ™„μ „ κ΄€λ¦¬ν• λΉλ“ μ„λΉ„μ¤μ…λ‹λ‹¤. CodeBuild ν™κ²½μ λ³΄μ•μ„ κ°•ν™”ν•κΈ° μ„ν•΄ **λ―Όκ°ν• μ •λ³΄**λ¥Ό μ•μ „ν•κ² κ΄€λ¦¬ν•κ³ , **VPC** λ‚΄μ λ¦¬μ†μ¤μ— μ•μ „ν•κ² μ ‘κ·Όν•λ” λ°©λ²•μ„ μ•μ•„λ³΄κ² μµλ‹λ‹¤.

---

## 1. π”‘ CodeBuildμ™€ λΉ„λ°€ μ •λ³΄ κ΄€λ¦¬

CodeBuild λΉλ“ ν™κ²½μ— λ°μ΄ν„°λ² μ΄μ¤ λΉ„λ°€λ²νΈ, API ν‚¤μ™€ κ°™μ€ λΉ„λ°€ μ •λ³΄λ¥Ό μ§μ ‘ μ €μ¥ν•λ” κ²ƒμ€ λ§¤μ° μ„ν—ν•©λ‹λ‹¤. CodeBuildλ” μ΄λ¬ν• λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ **SSM νλΌλ―Έν„° μ¤ν† μ–΄**μ™€ **Secrets Manager**λ¥Ό ν™μ©ν• μ•μ „ν• λ°©μ‹μ„ μ κ³µν•©λ‹λ‹¤.

### μλ»λ λ°©λ²•: μΌλ° ν™κ²½ λ³€μ μ‚¬μ©

CodeBuild ν”„λ΅μ νΈ μ„¤μ •μ—μ„ ν™κ²½ λ³€μμ— `DB_PASSWORD` κ°’μ„ **ν‰λ¬ΈμΌλ΅ μ§μ ‘ μ…λ ¥**ν•λ” κ²ƒμ€ λ³΄μ•μ— μ·¨μ•½ν•λ©°, μ λ€ κ¶μ¥λμ§€ μ•μµλ‹λ‹¤.

### μ¬λ°”λ¥Έ λ°©λ²•: νλΌλ―Έν„° μ¤ν† μ–΄ λλ” Secrets Manager μ°Έμ΅°

CodeBuildλ” λΉλ“ μ‹μ μ— SSM νλΌλ―Έν„° μ¤ν† μ–΄λ‚ Secrets Managerμ—μ„ κ°’μ„ κ°€μ Έμ™€ ν™κ²½ λ³€μμ— μ£Όμ…ν•λ” κΈ°λ¥μ„ μ§€μ›ν•©λ‹λ‹¤.

1. **SSM νλΌλ―Έν„° μ¤ν† μ–΄ μ‚¬μ©**:
    
    - **νλΌλ―Έν„° μƒμ„±**: SSM νλΌλ―Έν„° μ¤ν† μ–΄μ— `/CodeBuild/DBPassword`μ™€ κ°™μ€ μ΄λ¦„μΌλ΅ **`SecureString`** μ ν•μ νλΌλ―Έν„°λ¥Ό μƒμ„±ν•κ³  KMS ν‚¤λ΅ μ•”νΈν™”ν•©λ‹λ‹¤.
        
    - **CodeBuild μ„¤μ •**: CodeBuild ν”„λ΅μ νΈμ ν™κ²½ λ³€μ μ„¤μ •μ—μ„ `Type`μ„ `Parameter`λ΅ μ„ νƒν•κ³ , `Value`μ— μƒμ„±ν• νλΌλ―Έν„°μ μ΄λ¦„(μ: `/CodeBuild/DBPassword`)μ„ μ…λ ¥ν•©λ‹λ‹¤.
        
2. **Secrets Manager μ‚¬μ©**:
    
    - **λΉ„λ°€ μ •λ³΄ μƒμ„±**: Secrets Managerμ— λ°μ΄ν„°λ² μ΄μ¤ λΉ„λ°€λ²νΈλ¥Ό ν¬ν•¨ν•λ” λΉ„λ°€ μ •λ³΄λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
        
    - **CodeBuild μ„¤μ •**: ν™κ²½ λ³€μ `Type`μ„ `Secrets Manager`λ΅ μ„ νƒν•κ³ , `Value`μ— Secrets Managerμ— μ €μ¥λ λΉ„λ°€ μ •λ³΄μ ARN λλ” μ΄λ¦„μ„ μ…λ ¥ν•©λ‹λ‹¤.


μ΄λ ‡κ² μ„¤μ •ν•λ©΄, CodeBuildλ” λΉλ“ μ‹μ‘ μ‹ **μλ™μΌλ΅ ν•΄λ‹Ή μ„λΉ„μ¤μ— μ ‘κ·Όν•μ—¬ κ°’μ„ λ³µνΈν™”ν• ν›„ ν™κ²½ λ³€μμ— μ£Όμ…**ν•©λ‹λ‹¤.

---

## 2. π›΅οΈ VPC λ‚΄ CodeBuild ν™κ²½ κµ¬μ„±

κΈ°λ³Έμ μΌλ΅ CodeBuildλ” AWS VPC μ™Έλ¶€μ—μ„ μ‹¤ν–‰λ©λ‹λ‹¤. ν•μ§€λ§ VPC λ‚΄μ— μλ” λ¦¬μ†μ¤(μ: ν”„λΌμ΄λΉ— μ„λΈλ„·μ RDS λ°μ΄ν„°λ² μ΄μ¤)μ— μ ‘κ·Όν•΄μ•Ό ν•  κ²½μ°, CodeBuildλ¥Ό VPC λ‚΄λ¶€μ—μ„ μ‹¤ν–‰ν•λ„λ΅ κµ¬μ„±ν•  μ μμµλ‹λ‹¤.

### μ„¤μ • λ°©λ²•

1. **VPC μ„ νƒ**: CodeBuild ν”„λ΅μ νΈ μƒμ„± μ‹ **`Additional configuration`** μ„Ήμ…μ **`VPC`** μµμ…μ—μ„ CodeBuildλ¥Ό μ‹¤ν–‰ν•  VPCλ¥Ό μ„ νƒν•©λ‹λ‹¤.
    
2. **μ„λΈλ„· λ° λ³΄μ• κ·Έλ£Ή**: VPC λ‚΄μ **μ„λΈλ„·**κ³Ό **λ³΄μ• κ·Έλ£Ή**μ„ μ§€μ •ν•©λ‹λ‹¤.
    
3. **κ²°κ³Ό**: CodeBuild ν™κ²½μ΄ μ§€μ •λ VPCμ μ„λΈλ„· λ‚΄μ— μƒμ„±λμ–΄, λ³΄μ• κ·Έλ£Ή κ·μΉ™μ— λ”°λΌ λ‹¤λ¥Έ VPC λ¦¬μ†μ¤μ— μ•μ „ν•κ² μ ‘κ·Όν•  μ μμµλ‹λ‹¤.

### ν•„μ IAM κ¶ν•

SSM νλΌλ―Έν„° μ¤ν† μ–΄μ™€ Secrets Managerλ¥Ό μ‚¬μ©ν•λ ¤λ©΄, CodeBuild ν”„λ΅μ νΈμ **μ„λΉ„μ¤ μ—­ν• (IAM Role)**μ— ν•΄λ‹Ή μ„λΉ„μ¤μ— λ€ν• `kms:Decrypt` λ° `ssm:GetParameter`, `secretsmanager:GetSecretValue` κ¶ν•μ΄ λ¶€μ—¬λμ–΄μ•Ό ν•©λ‹λ‹¤. κ·Έλ ‡μ§€ μ•μΌλ©΄ λΉλ“ μ¤‘ κ¶ν• λ¶€μ΅±μΌλ΅ μΈν•΄ μ‹¤ν¨ν•©λ‹λ‹¤.

---

## 3. π κ²°λ΅ 

CodeBuildμ λ³΄μ•μ€ λ‹¨μν• ν™κ²½ λ³€μ μ„¤μ •μ„ λ„μ–΄, **SSM νλΌλ―Έν„° μ¤ν† μ–΄/Secrets Manager**λ¥Ό ν†µν• λ―Όκ° μ •λ³΄ κ΄€λ¦¬μ™€ **VPC** λ‚΄μ—μ„ μ‹¤ν–‰λλ” λΉλ“ ν™κ²½ μ„¤μ •μ„ ν†µν•΄ κ°•ν™”λ  μ μμµλ‹λ‹¤. μ΄ λ‘ κ°€μ§€ ν•µμ‹¬ λ³΄μ• κΈ°λ¥μ„ ν™μ©ν•λ©΄, CI/CD νμ΄ν”„λΌμΈμ μ•μ „μ„±μ„ ν¬κ² λ†’μΌ μ μμµλ‹λ‹¤.