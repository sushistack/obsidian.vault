
## 🚀 키네시스 데이터 스트림 개요

![[Pasted image 20250817205907.png]]

**아마존 키네시스 데이터 스트림(Kinesis Data Streams)**은 **실시간(real-time)**으로 생성되는 데이터를 수집하고 처리하기 위한 AWS 서비스입니다. 웹사이트 클릭 스트림, IoT 디바이스 데이터, 서버 로그 및 지표 등 실시간으로 발생하는 대량의 데이터를 안정적으로 수집하고, 이를 분석 또는 저장하는 데 사용됩니다.

### 주요 역할

- **실시간 데이터 수집:** 수많은 소스로부터 생성되는 데이터를 실시간으로 가져옵니다.
- **지속적인 데이터 저장:** 수집된 데이터를 최대 365일까지 스트림에 보관할 수 있어, 컨슈머 애플리케이션이 필요에 따라 데이터를 다시 처리(re-process)할 수 있습니다.
- **분산 처리:** 여러 컨슈머 애플리케이션이 동일한 스트림의 데이터를 동시에 읽어 처리할 수 있습니다.

---

## ⚙️ 키네시스 데이터 스트림의 아키텍처

키네시스 데이터 스트림은 **프로듀서(Producer)**와 **컨슈머(Consumer)**로 구성됩니다.

- **프로듀서:** 데이터를 키네시스 스트림으로 보내는 애플리케이션입니다.
    - **애플리케이션(코드):** 웹사이트 클릭, IoT 디바이스 등에서 데이터를 수집하여 스트림에 보냅니다.
    - **키네시스 에이전트:** 서버 로그나 지표를 자동으로 수집하여 스트림에 전송합니다.

- **컨슈머:** 키네시스 스트림에서 데이터를 읽어 처리하는 애플리케이션입니다.
    - **애플리케이션(코드):** 스트림에서 데이터를 읽어 분석하거나 다른 시스템으로 보냅니다.
    - **AWS 서비스:** AWS 람다(Lambda), 키네시스 데이터 파이어호스(Firehose), 매니지드 서비스 포 아파치 플링크(Managed Service for Apache Flink) 등 다양한 서비스와 통합되어 데이터를 실시간으로 활용합니다.

### 핵심 개념

- **데이터 레코드:** 스트림에 저장되는 데이터의 단위로, 최대 크기는 **1MB**입니다. 일반적으로 실시간으로 발생하는 소량의 데이터를 처리하는 데 사용됩니다.

- **파티션 ID(Partition ID):** 데이터를 스트림의 특정 샤드에 할당하는 데 사용됩니다. 동일한 파티션 ID를 가진 데이터는 동일한 샤드에 저장되므로, **메시지의 순서가 보장**됩니다.

---

## 📊 샤드와 용량 모드

키네시스 스트림의 용량은 **샤드(Shard)** 단위로 관리됩니다.

### 1. 프로비저닝 모드 (Provisioned Mode)

- **용량 관리:** 사용자가 직접 샤드의 개수를 지정하고 관리합니다.
- **샤드 용량:**
    - **쓰기(Inbound):** 샤드당 초당 **1MB** 또는 **1,000 레코드**
    - **읽기(Outbound):** 샤드당 초당 **2MB**
- **비용:** 프로비저닝된 샤드 개수 및 시간(시간당 샤드 요금)에 따라 비용이 청구됩니다.
- **확장:** 필요에 따라 수동으로 샤드 수를 늘리거나 줄여야 합니다.

### 2. 온디맨드 모드 (On-demand Mode)

- **용량 관리:** 샤드 수를 직접 관리할 필요가 없습니다. 키네시스가 자동으로 워크로드에 맞춰 용량을 조절합니다.
- **기본 용량:** 초당 **4MB** 또는 **4,000 레코드**의 기본 용량이 제공됩니다.
- **자동 확장:** 지난 30일간 관찰된 최고 처리량에 따라 자동으로 용량을 확장합니다.
- **비용:** 스트림이 활성화된 시간(시간당 스트림 요금)과 **처리된 데이터 양**에 따라 요금이 부과됩니다.

### 개발 도구
- **KPL (Kinesis Producer Library):** 최적화된 프로듀서 애플리케이션을 위한 라이브러리입니다.
- **KCL (Kinesis Client Library):** 최적화된 컨슈머 애플리케이션을 위한 라이브러리입니다.

키네시스 데이터 스트림은 대규모 실시간 데이터 처리 파이프라인을 구축하는 데 필수적인 서비스로, `Provisioned` 또는 `On-demand` 모드를 선택하여 유연하게 워크로드를 관리할 수 있습니다.