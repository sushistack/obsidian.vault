## X-Ray API의 역할

**AWS X-Ray**는 애플리케이션의 트레이스(trace) 데이터를 수집, 저장, 분석하기 위한 여러 API를 제공합니다. X-Ray API는 크게 **쓰기(Write)** API와 **읽기(Read)** API로 나뉘며, 각각 데이터 수집과 데이터 분석이라는 다른 목적을 가집니다. AWS 시험에서는 각 API의 용도를 정확히 이해하고 있는지 묻는 문제가 출제될 수 있습니다.

---

## ✍️ 쓰기(Write) API

쓰기 API는 주로 **X-Ray 데몬(daemon)**이 X-Ray 서비스로 데이터를 전송하는 데 사용됩니다. 이 API들은 X-Ray의 **`XRayWriteOnlyAccess`** 관리형 정책에 포함되어 있습니다.

|API 이름|기능|설명|
|---|---|---|
|**`PutTraceSegments`**|**필수**: 트레이스 세그먼트 데이터를 X-Ray 서비스에 업로드합니다.|X-Ray 데몬이 애플리케이션으로부터 수집한 트레이스 정보를 전송할 때 사용됩니다.|
|**`PutTelemetryRecords`**|**선택**: 데몬의 원격 측정 데이터를 업로드합니다.|데몬이 수신, 거부한 세그먼트 수 등 자체적인 지표를 전송할 때 사용됩니다.|
|**`GetSamplingRules`**|**필수**: X-Ray 서비스로부터 최신 샘플링 규칙을 가져옵니다.|X-Ray 데몬이 콘솔에서 변경된 샘플링 규칙을 자동으로 적용할 수 있도록 허용합니다.|
|`GetSamplingTargets`*|고급: 데몬이 트레이스 데이터 전송을 최적화하기 위해 사용됩니다.||
|`GetSamplingStatisticsSummaries`*|고급: 샘플링 통계 요약을 가져오는 데 사용됩니다.||

*위의 두 API는 Get API이지만, 데몬의 쓰기 동작을 지원하므로 쓰기 권한 그룹에 포함됩니다.

**요약**: X-Ray 데몬이 올바르게 작동하려면, **`PutTraceSegments`** (쓰기)와 **`GetSamplingRules`** (샘플링 규칙 동기화) 권한이 반드시 필요합니다.

---

## 📖 읽기(Read) API

읽기 API는 X-Ray 콘솔이나 외부 분석 도구가 X-Ray 서비스에 저장된 데이터를 검색하고 시각화하는 데 사용됩니다. 이 API들은 **`XRayReadOnlyAccess`** 관리형 정책에 포함되어 있습니다.

|API 이름|기능|설명|
|---|---|---|
|**`GetServiceGraph`**|**핵심**: 서비스 맵 데이터를 가져옵니다.|전체 아키텍처의 노드와 연결 관계를 시각화하는 데 사용됩니다.|
|**`BatchGetTraces`**|**핵심**: 트레이스 ID 목록을 기반으로 여러 트레이스 데이터를 한 번에 가져옵니다.|트레이스 목록을 검색한 후, 특정 트레이스의 모든 세그먼트 데이터를 상세히 보려고 할 때 사용됩니다.|
|**`GetTraceSummary`**|**핵심**: 특정 기간에 해당하는 트레이스 ID와 요약 정보를 가져옵니다.|`BatchGetTraces`를 호출하기 전에, 먼저 요약 정보를 통해 원하는 트레이스 ID를 찾을 때 사용됩니다.|
|`GetTraceGraph`|고급: 하나 이상의 트레이스 ID에 대한 서비스 그래프를 검색합니다.||
|`Get*` 등|여러 검색 및 요약 관련 API들이 포함됩니다.||

**요약**: X-Ray 콘솔에서 서비스 맵을 보거나, 트레이스 목록을 확인하고, 상세 정보를 분석하는 모든 작업은 이 읽기 API들을 통해 이루어집니다. 시험에서는 API의 이름(`Get` 또는 `Put` 등)을 통해 해당 API가 읽기/쓰기 중 어느 쪽에 속하는지 유추할 수 있습니다.