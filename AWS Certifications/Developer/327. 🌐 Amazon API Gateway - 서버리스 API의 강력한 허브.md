
**Amazon API Gateway**는 개발자가 RESTful API, WebSocket API를 손쉽게 생성, 게시, 유지 관리, 모니터링 및 보안 설정할 수 있도록 돕는 완전 관리형 서버리스 서비스입니다. API Gateway는 클라이언트 요청을 백엔드 서비스(예: Lambda 함수, EC2 인스턴스, 다른 AWS 서비스 등)로 연결하는 프록시 역할을 하며, 단순한 HTTP 엔드포인트 이상의 다양한 기능을 제공하여 현대적인 애플리케이션 아키텍처에서 필수적인 구성 요소로 자리 잡고 있습니다.

---

## 🚀 API Gateway의 주요 기능

API Gateway는 단순한 API 프록시를 넘어, 다음과 같은 풍부한 기능을 제공합니다.

- **다양한 백엔드 통합**:
    
    - **Lambda 함수**: 가장 일반적인 조합으로, 완전한 서버리스 API를 구축할 수 있습니다.
        
    - **HTTP/S 엔드포인트**: 온프레미스 서버나 다른 클라우드에 있는 기존 HTTP API를 API Gateway 뒤에 배치하여 보안 및 관리 기능을 추가할 수 있습니다.
        
    - **AWS 서비스**: Amazon Kinesis, SQS, Step Functions 등 다양한 AWS 서비스 API를 외부로 노출할 수 있습니다. 예를 들어, 클라이언트가 HTTP 요청을 보내면 API Gateway가 이를 Kinesis Data Streams에 안전하게 데이터를 보내는 작업으로 변환할 수 있습니다.
        
- **보안 및 제어**:
    
    - **인증 및 권한 부여**: IAM 역할, Amazon Cognito, 또는 커스텀 Lambda Authorizer를 사용하여 사용자 인증 및 권한을 관리할 수 있습니다.
        
    - **API 키 및 사용 계획(Usage Plans)**: 특정 클라이언트에 API 키를 발급하고, 요청 횟수 제한(Throttling)을 설정하여 API 사용량을 제어할 수 있습니다.
        
    - **요청/응답 변환**: 백엔드로 요청을 보내기 전, 또는 백엔드에서 응답을 받은 후 데이터를 검증하거나 형식을 변환할 수 있습니다.
        
- **API 관리**:
    
    - **버전 관리**: 여러 API 버전을 관리하여 클라이언트 호환성을 유지할 수 있습니다.
        
    - **다중 환경**: `dev`, `test`, `prod`와 같은 다양한 환경을 분리하여 관리할 수 있습니다.
        
    - **모니터링**: CloudWatch와 통합되어 API 호출 횟수, 지연 시간, 오류율 등을 상세히 모니터링할 수 있습니다.
        
    - **캐싱**: API 응답을 캐싱하여 백엔드 서비스에 대한 부하를 줄이고 응답 시간을 단축할 수 있습니다.
        
- **기타**:
    
    - **WebSocket 프로토콜 지원**: 실시간 양방향 통신을 지원하는 API를 구축할 수 있습니다.
        
    - **OpenAPI/Swagger 호환**: OpenAPI(이전의 Swagger) 사양을 사용하여 API를 정의하고 가져오거나 내보낼 수 있습니다.

---

## 🌍 엔드포인트 유형 (Endpoint Types)

API Gateway는 세 가지 주요 엔드포인트 유형을 제공하며, 이는 API에 접근하는 방식과 성능에 영향을 미칩니다.

### **1. 엣지 최적화(Edge-Optimized)**

- **특징**: API 요청이 전 세계의 **Amazon CloudFront 엣지 로케이션**을 통해 라우팅됩니다. 이는 전 세계에 퍼져있는 사용자에게 **낮은 지연 시간**을 제공합니다.
    
- **용도**: 전 세계에 사용자가 분포하는 **글로벌 API**에 적합합니다. 이 유형이 기본값입니다.
    

### **2. 리전(Regional)**

- **특징**: API가 배포된 AWS 리전 내에서만 접근되며, CloudFront를 사용하지 않습니다. 모든 요청은 해당 리전으로 직접 라우팅됩니다.
    
- **용도**: API 사용자가 API와 **같은 리전에 위치**하거나, 지리적으로 한정된 경우에 적합합니다.
    

### **3. 프라이빗(Private)**

- **특징**: **VPC 내부**에서만 접근할 수 있는 API입니다. 퍼블릭 인터넷으로는 접근할 수 없으며, VPC 엔드포인트(`Interface VPC Endpoints`)를 사용합니다.
    
- **용도**: 외부 노출이 필요 없는 **내부 애플리케이션** 전용 API에 사용됩니다. 접근 제어는 리소스 정책(Resource Policy)을 통해 정의할 수 있습니다.
    

|엔드포인트 유형|클라이언트 접근 경로|주요 사용 시나리오|
|---|---|---|
|**엣지 최적화**|CloudFront 엣지 로케이션|전 세계 사용자를 위한 글로벌 API|
|**리전**|API가 배포된 AWS 리전|단일 리전 내 사용자를 위한 API|
|**프라이빗**|VPC 엔드포인트(ENI)|내부 네트워크 전용 애플리케이션|

---

## 🛡️ API Gateway의 보안

API Gateway는 다양한 보안 메커니즘을 통해 API를 보호합니다.

### **1. 인증 방식**

- **IAM 역할**: 내부 애플리케이션(예: EC2 인스턴스)이 API를 호출할 때 IAM 역할을 사용하여 권한을 부여합니다.
    
- **Cognito User Pools**: 웹 및 모바일 애플리케이션 사용자를 위한 인증 및 권한 부여를 관리하는 데 사용됩니다.
    
- **커스텀 Lambda Authorizer**: Lambda 함수를 작성하여 사용자 지정 인증 로직을 구현할 수 있습니다. 이는 JWT(JSON Web Token) 검증 등 복잡한 인증 절차에 유용합니다.
    

### **2. 커스텀 도메인 및 SSL**

- **ACM(AWS Certificate Manager)**: API Gateway에 SSL/TLS 인증서를 연결하여 사용자 지정 도메인(`api.example.com`)을 통해 HTTPS로 접근할 수 있게 합니다.
    
    - **엣지 최적화 엔드포인트**: 인증서는 `us-east-1` 리전에 있어야 합니다.
        
    - **리전 엔드포인트**: 인증서는 API Gateway와 동일한 리전에 있어야 합니다.
        
- **Route 53**: 커스텀 도메인 이름을 API Gateway 엔드포인트로 연결하기 위해 Route 53에 CNAME 또는 A-Alias 레코드를 설정해야 합니다.
    

API Gateway는 단순한 서버리스 프록시를 넘어, 개발자가 안전하고 확장 가능한 API를 구축하는 데 필요한 모든 도구와 기능을 제공하는 강력한 서비스입니다.