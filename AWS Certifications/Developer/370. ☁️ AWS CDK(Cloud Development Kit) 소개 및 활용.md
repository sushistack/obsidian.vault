
이번 아티클에서는 **AWS CDK(Cloud Development Kit)**에 대해 자세히 알아보겠습니다. AWS CDK는 친숙한 프로그래밍 언어를 사용하여 클라우드 인프라를 정의할 수 있게 해주는 혁신적인 도구입니다. 이 글을 통해 CDK의 개념, CloudFormation과의 차이점, 그리고 SAM과의 관계를 명확히 이해할 수 있습니다.

---

### 1️⃣ AWS CDK란 무엇인가?

![[Pasted image 20250911185446.png]]

AWS CDK는 **IaC(Infrastructure as Code)**를 위한 프레임워크로, **TypeScript, Python, Java, .NET** 등 다양한 프로그래밍 언어로 클라우드 인프라를 정의할 수 있게 해줍니다.

**기존 방식(CloudFormation)**은 YAML이나 JSON 파일을 사용하여 리소스를 선언적으로 작성합니다. 하지만 이 방식은 문법 오류를 잡기 어렵고, 복잡한 로직을 구현하는 데 한계가 있습니다.

CDK는 이러한 문제를 해결합니다. 개발자는 객체 지향 프로그래밍의 이점을 활용하여 AWS 리소스를 코드(`**Constructs**`)로 정의할 수 있습니다. 이렇게 작성된 코드는 **CDK CLI**를 통해 최종적으로 **CloudFormation 템플릿으로 변환(Synthesize)**되어 AWS에 배포됩니다.

#### **CDK의 핵심 이점**

- **타입 안정성(Type-safety):** 프로그래밍 언어의 컴파일러가 문법 및 타입 오류를 사전에 감지하여 배포 실패를 줄입니다.
    
- **재사용성:** VPC, ECS 클러스터 등 자주 사용하는 인프라 패턴을 `Constructs`로 정의하고, 이를 재사용하여 빠르게 인프라를 구축할 수 있습니다.
    
- **친숙한 언어:** 개발자에게 익숙한 언어를 사용함으로써 진입 장벽을 낮추고, IDE의 자동 완성, 디버깅 기능을 활용할 수 있습니다.
    
- **애플리케이션과 인프라 통합:** Lambda 함수 코드나 Docker 컨테이너 이미지와 같은 애플리케이션 런타임 코드를 인프라 정의와 함께 배포할 수 있습니다.
    

---

### 2️⃣ CDK vs. SAM vs. CloudFormation

이 세 가지 도구는 모두 AWS 인프라를 관리하는 데 사용되지만, 그 목적과 접근 방식에 차이가 있습니다.

|특징|**AWS CloudFormation**|**AWS SAM**|**AWS CDK**|
|---|---|---|---|
|**주요 목적**|모든 AWS 서비스의 인프라 관리|서버리스 애플리케이션 개발에 특화|프로그래밍 언어로 인프라를 정의|
|**작성 언어**|YAML, JSON (선언적)|YAML, JSON (선언적)|TypeScript, Python, Java 등 (명령적)|
|**범위**|모든 AWS 서비스|Lambda, API Gateway, DynamoDB 등 서버리스 서비스에 집중|모든 AWS 서비스 (CloudFormation의 슈퍼셋)|
|**장점**|모든 AWS 서비스 지원. 표준 IaC 도구|서버리스 애플리케이션을 빠르게 개발 가능|타입 안정성, 재사용성, 풍부한 개발 경험|
|**단점**|복잡하고 장황한 문법. 오류 발견이 어려움|서버리스에 한정. 복잡한 비즈니스 로직에 부적합|학습 곡선이 존재. CloudFormation 개념 이해 필요|
|**내부 동작**|직접 AWS에 배포|CloudFormation으로 변환 후 배포|CloudFormation으로 변환 후 배포|

- **CloudFormation**은 가장 근본적인 IaC 도구입니다. 모든 AWS 리소스를 지원하지만, 문법이 복잡하고 오류를 찾기 어렵습니다.
    
- **SAM**은 CloudFormation의 확장 도구로, 서버리스 애플리케이션에 특화되어 있습니다. 간단한 YAML 문법으로 Lambda, API Gateway 등을 손쉽게 배포할 수 있게 해줍니다.
    
- **CDK**는 CloudFormation의 **슈퍼셋(Superset)**입니다. CloudFormation의 모든 기능을 포함하면서도, 프로그래밍 언어의 유연성을 제공합니다. SAM이 서버리스에 초점을 맞춘 반면, CDK는 모든 AWS 서비스에 적용될 수 있습니다.
    

---

### 3️⃣ CDK와 SAM의 시너지

![[Pasted image 20250911185504.png]]

CDK는 자체적인 로컬 테스트 기능이 없지만, **SAM CLI의 로컬 테스트 기능을 활용**하여 이 약점을 보완할 수 있습니다.

1. **CDK 합성(Synth):** CDK 애플리케이션을 `cdk synth` 명령어로 실행하여 CloudFormation 템플릿을 생성합니다.
    
2. **SAM 로컬 테스트:** 생성된 CloudFormation 템플릿을 **`sam local invoke`** 명령어로 참조하여 Lambda 함수를 로컬에서 실행하고 테스트합니다.
    

이러한 협업을 통해 개발자는 CDK의 유연성과 타입 안정성을 활용하여 인프라를 정의하고, SAM CLI를 사용하여 로컬에서 신속하게 코드를 테스트할 수 있습니다.

### 4️⃣ CDK 실습 예시: Rekognition 서비스 배포

CDK를 사용하여 다음 기능을 가진 애플리케이션을 배포하는 것은 좋은 예시가 될 수 있습니다.

- 사용자가 이미지를 업로드할 수 있는 **S3 버킷** 생성
    
- 이미지가 업로드되면 트리거되는 **Lambda 함수**
    
- Lambda 함수는 AWS Rekognition API를 호출하여 이미지 분석
    
- 분석 결과를 **DynamoDB 테이블**에 저장
    

이 모든 리소스는 단일 CDK 스크립트 내에서 정의되고 배포될 수 있습니다. 다음 강의에서는 이와 같은 복잡한 인프라를 CDK로 어떻게 정의하고 배포하는지 직접 경험하게 될 것입니다.