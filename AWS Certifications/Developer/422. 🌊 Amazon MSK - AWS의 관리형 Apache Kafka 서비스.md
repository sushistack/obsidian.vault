
Amazon Managed Streaming for Apache Kafka (MSK)는 AWS에서 **Apache Kafka**를 손쉽게 운영할 수 있도록 돕는 완전 관리형 서비스입니다.1 Apache Kafka는 Kinesis와 유사하게 대량의 스트리밍 데이터를 처리하는 오픈 소스 플랫폼입니다.2 MSK는 Kafka 클러스터의 프로비저닝, 관리, 확장 등 복잡한 운영 작업을 AWS가 대신 처리해줍니다.

---

## 1. ⚙️ MSK의 핵심 특징

- **완전 관리형**: MSK는 Kafka 브로커 노드와 Zookeeper 노드를 자동으로 생성하고 관리합니다.3
    
- **배포 유연성**: VPC(Virtual Private Cloud) 내에서 클러스터를 배포하며, 최대 3개의 가용 영역(AZ)에 걸쳐 고가용성(High Availability)을 보장합니다.
    
- **운영 간편성**: 일반적인 Kafka 장애로부터 자동 복구를 지원합니다.
    
- **MSK Serverless**: 서버를 프로비저닝하거나 용량을 관리할 필요 없이, MSK가 컴퓨팅 및 스토리지 리소스를 자동으로 확장하고 축소합니다.4
    
- **데이터 보존**: 데이터는 EBS 볼륨에 저장되며, 원하는 기간 동안 보존할 수 있습니다.

---

## 2. 📨 Apache Kafka의 동작 방식

![[Pasted image 20250914194246.png]]

Apache Kafka는 **프로듀서(Producer)**, **브로커(Broker)**, **토픽(Topic)**, **컨슈머(Consumer)**로 구성됩니다.

- **프로듀서**: 데이터 소스(Kinesis, IoT, RDS 등)에서 데이터를 생성하여 Kafka **토픽**에 보냅니다.
    
- **토픽**: 실시간 스트리밍 데이터가 저장되는 논리적 카테고리입니다. 각 토픽은 여러 **파티션(Partition)**으로 나뉘어 여러 브로커에 분산 저장되고, 이는 데이터의 병렬 처리 및 고가용성을 보장합니다.
    
- **컨슈머**: 토픽의 데이터를 실시간으로 가져와(pull) 처리합니다. 컨슈머는 EMR, S3, SageMaker 등 다양한 대상으로 데이터를 보낼 수 있습니다.
    
- **브로커**: 데이터를 저장하고 관리하는 Kafka 서버입니다. 여러 브로커가 클러스터를 구성합니다.
    

---

## 3. ⚖️ MSK vs. Kinesis Data Streams 비교

MSK와 Kinesis Data Streams는 모두 스트리밍 데이터를 처리하지만, 다음과 같은 차이점이 있습니다.

|특징|Kinesis Data Streams|Amazon MSK|
|---|---|---|
|**메시지 크기**|기본 1MB 한도|기본 1MB, **더 큰 크기로 설정 가능**|
|**개념 단위**|샤드(Shard)|**토픽(Topic)** 및 **파티션(Partition)**|
|**확장성**|샤드 분할(Splitting) 및 병합(Merging)|**파티션 추가**만 가능 (제거 불가)|
|**데이터 보존**|최대 1년 (기본 24시간)|**EBS 비용 지불 시 무기한 보존 가능**|
|**In-flight 암호화**|기본 제공|TLS 또는 평문(Plaintext) 선택 가능|

## 4. 🔗 MSK 소비자(Consumer) 아키텍처

MSK에 저장된 데이터를 소비하는 다양한 방법이 있습니다.

![[Pasted image 20250914194316.png]]

- **Kinesis Data Analytics for Apache Flink**: Apache Flink 애플리케이션을 사용하여 MSK 클러스터에서 데이터를 읽어와 실시간으로 처리합니다.
    
- **AWS Glue**: Glue 스트리밍 ETL(Extract, Transform, Load) 작업을 통해 MSK의 데이터를 다른 AWS 서비스로 이동 및 변환합니다.5
    
- **AWS Lambda**: MSK를 Lambda 함수의 이벤트 소스로 직접 연결하여, 메시지가 도착할 때마다 함수를 실행합니다.
    
- **사용자 정의 컨슈머**: EC2, ECS, EKS 등에서 자체 Kafka 컨슈머를 개발하여 MSK에서 데이터를 가져옵니다.
    

---

## 5. 🎯 결론

Amazon MSK는 복잡한 Kafka 클러스터 운영을 간소화하여, 사용자가 스트리밍 데이터 처리 애플리케이션 개발에만 집중할 수 있게 합니다.6 Kinesis와 유사하지만, 더 큰 메시지 크기 및 무기한 데이터 보존과 같은 차별점을 가지고 있어, **기존 Kafka 워크로드의 마이그레이션** 또는 **높은 유연성이 요구되는 스트리밍 애플리케이션**에 적합합니다.