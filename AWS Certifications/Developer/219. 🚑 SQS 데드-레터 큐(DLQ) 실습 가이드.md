
## π—οΈ λ°λ“-λ ν„° ν(DLQ) μƒμ„± λ° μ„¤μ •

### 1. DLQ μƒμ„±

- **DLQ μ΄λ¦„:** `DemoQueueDLQ`
- **λ©”μ‹μ§€ λ³΄μ΅΄ κΈ°κ°„:** **14μΌ**λ΅ μ„¤μ •ν•μ—¬ μ‹¤ν¨ λ©”μ‹μ§€λ¥Ό μ¶©λ¶„ν λ¶„μ„ν•  μ‹κ°„μ„ ν™•λ³΄ν•©λ‹λ‹¤.
- **ν μ ν•:** μ†μ¤ ν(`DemoQueue`)κ°€ `Standard` νμ΄λ―€λ΅, DLQλ„ **`Standard` ν**λ΅ μƒμ„±ν•©λ‹λ‹¤.
### 2. μ†μ¤ ν μ„¤μ •

- **μ†μ¤ ν μ΄λ¦„:** `DemoQueue`
- **κ°€μ‹μ„± μ ν• μ‹κ°„:** λ°λ¨λ¥Ό μ„ν•΄ **5μ΄**λ΅ μ§§κ² μ„¤μ •ν•©λ‹λ‹¤. μ΄λ” μ»¨μλ¨Έκ°€ λ©”μ‹μ§€λ¥Ό κ°€μ Έκ°„ ν›„ 5μ΄κ°€ μ§€λ‚λ©΄ λ©”μ‹μ§€κ°€ λ‹¤μ‹ νμ— λ‚νƒ€λ‚κ² ν•¨μΌλ΅μ¨ λ©”μ‹μ§€ μ¬μμ‹  κ³Όμ •μ„ λΉ λ¥΄κ² μ§„ν–‰ν•κΈ° μ„ν•¨μ…λ‹λ‹¤.
- **DLQ μ—°κ²°:** `Redrive and dead-letter queue` μ„¤μ •μ—μ„ `Enabled`λ¥Ό μ„ νƒν•κ³ , **`DemoQueueDLQ`**λ¥Ό DLQλ΅ μ§€μ •ν•©λ‹λ‹¤.
- **`MaximumReceives`:** **3**μΌλ΅ μ„¤μ •ν•©λ‹λ‹¤. μ΄λ΅μ¨ λ©”μ‹μ§€κ°€ μ„Έ λ² μ΄μƒ μμ‹ λλ©΄ DLQλ΅ μ΄λ™ν•κ² λ©λ‹λ‹¤.

---

## π§ DLQ λ™μ‘ μ‹¤μµ

### 1. 'λ…μ•½ λ©”μ‹μ§€(Poison Pill)' μ „μ†΅

- **λ©”μ‹μ§€ λ‚΄μ©:** `hello world, poison pill`
- **μ „μ†΅:** `DemoQueue`μ— ν•΄λ‹Ή λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•©λ‹λ‹¤. μ΄ λ©”μ‹μ§€λ” μ»¨μλ¨Έκ°€ μ²λ¦¬ν•μ§€ λ»ν•κ³  κ³„μ† μ¬μ‹λ„ν•λ” μƒν™©μ„ μ‹λ®¬λ μ΄μ…ν•©λ‹λ‹¤.

### 2. λ©”μ‹μ§€ μ¬μμ‹  λ° DLQ μ΄λ™ ν™•μΈ

- **μ²« λ²μ§Έ μμ‹ :** `DemoQueue`μ—μ„ λ©”μ‹μ§€λ¥Ό **`Poll for messages`**λ΅ κ°€μ Έμµλ‹λ‹¤. `Receive Count`λ” **1**μ΄ λ©λ‹λ‹¤.
- **λ‘ λ²μ§Έ μμ‹ :** 5μ΄κ°€ μ§€λ‚λ©΄ κ°€μ‹μ„± μ ν• μ‹κ°„μ΄ λ§λ£λμ–΄ λ©”μ‹μ§€κ°€ λ‹¤μ‹ νμ— λ‚νƒ€λ‚©λ‹λ‹¤. λ‹¤μ‹ `Poll for messages`λ¥Ό μ‹¤ν–‰ν•λ©΄ λ©”μ‹μ§€λ¥Ό λ‹¤μ‹ μμ‹ ν•λ©°, `Receive Count`λ” **2**κ°€ λ©λ‹λ‹¤.
    
- **μ„Έ λ²μ§Έ μμ‹ :** 5μ΄ ν›„ λ‹¤μ‹ λ©”μ‹μ§€λ¥Ό μμ‹ ν•λ©°, `Receive Count`λ” **3**μ΄ λ©λ‹λ‹¤.
    
- **DLQλ΅ μ΄λ™:** μ„Έ λ²μ§Έ μμ‹  ν›„, `MaximumReceives` μ„κ³„κ°’(3)μ„ μ΄κ³Όν–μΌλ―€λ΅ λ©”μ‹μ§€λ” `DemoQueue`μ—μ„ μ‚¬λΌμ§€κ³  **`DemoQueueDLQ`**λ΅ μ΄λ™ν•©λ‹λ‹¤. `DemoQueue`λ¥Ό λ‹¤μ‹ ν΄λ§ν•λ©΄ λ©”μ‹μ§€κ°€ λ³΄μ΄μ§€ μ•μµλ‹λ‹¤.
    

### 3. DLQμ—μ„ λ©”μ‹μ§€ ν™•μΈ

- **`DemoQueueDLQ`** νƒ­μΌλ΅ μ΄λ™ν•μ—¬ λ©”μ‹μ§€λ¥Ό **`Poll for messages`**λ΅ κ°€μ Έμµλ‹λ‹¤.
    
- μ†μ¤ νμ—μ„ μ‚¬λΌμ΅λ `hello world, poison pill` λ©”μ‹μ§€κ°€ DLQμ— λ“¤μ–΄μ™€ μλ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
    

---

## π”„ DLQ Re-drive to Source (μ†μ¤ νλ΅ μ¬μ „μ†΅)

`DLQ Redrive`λ” DLQμ λ©”μ‹μ§€λ¥Ό μ†μ¤ νλ΅ λ‹¤μ‹ λ³΄λ‚΄μ–΄ μ¬μ²λ¦¬ν•  μ μλ„λ΅ ν•λ” μ μ©ν• κΈ°λ¥μ…λ‹λ‹¤.

### 1. μ¬μ „μ†΅ μ‹μ‘

- `DemoQueueDLQ` ν νμ΄μ§€μ—μ„ μ¤λ¥Έμ½ μƒλ‹¨μ **`Start DLQ redrive`**λ¥Ό ν΄λ¦­ν•©λ‹λ‹¤.
    
- **`Source queue`**λ΅ `DemoQueue`κ°€ μ¬λ°”λ¥΄κ² μ„¤μ •λμ–΄ μλ”μ§€ ν™•μΈν•κ³ , `DLQ redrive`λ¥Ό μ‹μ‘ν•©λ‹λ‹¤.
    

### 2. μ¬μ „μ†΅ κ²°κ³Ό ν™•μΈ

- `DLQ redrive task`κ°€ μ„±κ³µμ μΌλ΅ μ™„λ£λλ©΄, **`DemoQueue`**λ΅ λμ•„κ°‘λ‹λ‹¤.
    
- **`Send and receive messages`**μ—μ„ `Poll for messages`λ¥Ό μ‹¤ν–‰ν•λ©΄, DLQμ— μμ—λ λ©”μ‹μ§€κ°€ λ‹¤μ‹ μ†μ¤ νμ— λ‚νƒ€λ‚ κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
    

μ΄ μ‹¤μµμ€ DLQκ°€ λ©”μ‹μ§€ μ²λ¦¬ μ‹¤ν¨ μ‹ **μλ™μΌλ΅ λ¶λ‰ λ©”μ‹μ§€λ¥Ό κ²©λ¦¬**ν•κ³ , λ¬Έμ κ°€ ν•΄κ²°λ ν›„μ—λ” **μ‰½κ² λ©”μ‹μ§€λ¥Ό μ¬μ²λ¦¬**ν•  μ μλ„λ΅ λ•λ” κ°•λ ¥ν• λ„κµ¬μ„μ„ λ³΄μ—¬μ¤λ‹λ‹¤.