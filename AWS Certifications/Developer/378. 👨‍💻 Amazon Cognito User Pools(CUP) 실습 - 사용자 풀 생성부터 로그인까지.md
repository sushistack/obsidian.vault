
이번 글에서는 Amazon Cognito User Pools(CUP)를 직접 생성하고, 사용자를 등록하며, 로그인 페이지를 통해 인증 과정을 체험하는 실습 과정을 상세하게 설명합니다.

---

## 1. ⚙️ 사용자 풀 생성 및 기본 설정

1. **사용자 풀 생성 시작:**
    
    - AWS Management Console에서 Cognito 서비스로 이동합니다.
        
    - 좌측 메뉴에서 **'사용자 풀(User Pools)'**을 선택한 후 **'사용자 풀 생성(Create user pool)'**을 클릭합니다.
        
2. **애플리케이션 유형 선택:**
    
    - **Traditional web application(전통적인 웹 애플리케이션)**을 선택합니다.
        
    - 애플리케이션의 이름을 'my web app'과 같이 지정합니다.
        
3. **로그인 옵션 설정:**
    
    - **Sign-in options(로그인 옵션)**에서 사용자의 로그인 방식을 지정합니다.
        
    - 이메일, 전화번호, 또는 사용자 이름 중 하나를 선택할 수 있으며, 여기서는 **'이메일(email)'**을 선택합니다.
        
    - 소셜 로그인이 필요한 경우, **'Federated users(제휴 사용자)'** 설정을 추가로 구성할 수 있습니다.
        
4. **속성 및 리다이렉션 URL 설정:**
    
    - 사용자 등록 시 요구할 **속성(attributes)**을 지정합니다. (예: 이름, 생년월일 등)
        
    - 성공적인 로그인 후 리디렉션될 **'Return URL'**을 설정합니다. 실습에서는 `example.com`을 사용했지만, 실제로는 여러분의 웹사이트 주소를 입력해야 합니다.
        

이 과정을 마치면 기본적인 사용자 풀과 애플리케이션 클라이언트가 생성됩니다.

---

## 2. 🛠️ 사용자 풀 세부 설정

좌측 메뉴에서 생성된 사용자 풀을 클릭하여 상세 설정 페이지로 이동합니다. 이곳에서는 인증, 보안, 사용자 관리 등 다양한 항목을 설정할 수 있습니다.

|메뉴|주요 기능|설명|
|---|---|---|
|**Client**|애플리케이션 클라이언트 설정|사용자 풀에 연결될 애플리케이션(예: 웹 앱)을 관리합니다.|
|**Users**|사용자 관리|등록된 사용자 목록을 확인하고, 직접 사용자를 생성하거나 임시 비밀번호를 설정할 수 있습니다.|
|**Groups**|사용자 그룹 관리|특정 권한을 가진 사용자 그룹을 생성하고 관리합니다.|
|**Authentication**|인증 방법 설정|이메일/SMS 인증, 비밀번호 정책, MFA(다중 요소 인증) 등을 설정합니다.|
|**Sign-up**|사용자 가입 설정|사용자 등록 시 필요한 속성 및 셀프 가입 여부를 설정합니다.|
|**Security**|보안 설정|WAF 연동, 위협 보호, 로그 스트리밍 등을 통해 사용자 풀의 보안을 강화합니다.|
|**Branding**|로그인 UI 사용자 정의|Cognito가 제공하는 기본 도메인을 사용하거나, 커스텀 도메인을 설정할 수 있습니다.|
|**Message Templates**|메시지 템플릿|이메일 인증, 비밀번호 재설정 등 사용자가 받는 메시지 내용을 편집할 수 있습니다.|

특히, **Authentication** 메뉴에서는 이메일 인증을 위한 Amazon SES 연동 설정을, **Security** 메뉴에서는 비밀번호 정책을 설정할 수 있습니다. 또한 **Branding** 메뉴의 `Managed Login` 기능을 통해 로그인 페이지의 디자인을 자유롭게 커스터마이징할 수 있습니다.

---

## 3. 🧪 사용자 등록 및 로그인 테스트

이제 우리가 만든 사용자 풀을 통해 실제로 사용자를 등록하고 로그인해 보겠습니다.

1. **로그인 페이지 접근:**
    
    - 사용자 풀 개요(Overview) 페이지로 이동합니다.
        
    - **`View login page`**를 클릭하여 Cognito에서 호스팅하는 로그인 UI에 접속합니다.
        
2. **사용자 회원가입:**
    
    - 로그인 페이지에서 `Create account`를 클릭하여 회원가입을 시작합니다.
        
    - **임시 이메일 서비스(`mailinator.com`)**를 이용해 이메일 주소를 입력하고, 원하는 비밀번호를 설정합니다. (예: `demo-cognito@mailinator.com`)
        
    - `Sign up`을 클릭하면 이메일로 인증 코드가 전송됩니다.
        
3. **계정 확인:**
    
    - Mailinator 사이트에서 수신된 이메일을 확인하고, 인증 코드를 복사합니다.
        
    - 로그인 페이지에 인증 코드를 입력하고 `Confirm account`를 클릭합니다.
        
4. **로그인 성공:**
    
    - 계정 확인이 완료되면, 앞서 설정한 `example.com`으로 리디렉션됩니다.
        
    - AWS 콘솔의 **'사용자(Users)'** 메뉴를 확인하면, 새로 등록된 사용자의 상태가 **`CONFIRMED`**로 변경된 것을 확인할 수 있습니다.
        

이처럼 Amazon Cognito User Pools를 활용하면 복잡한 인증 절차를 직접 구현할 필요 없이, 간단한 설정만으로 사용자 등록 및 로그인 시스템을 구축할 수 있습니다.