
AWS AppSync는 GraphQL API를 쉽게 구축하고 관리할 수 있도록 도와주는 완전 관리형 서비스입니다. GraphQL의 특징을 활용하여 클라이언트 애플리케이션이 필요로 하는 데이터를 정확하게 가져오고, 실시간 및 오프라인 데이터 동기화를 지원합니다.

---

## 1. 🔍 GraphQL과 AppSync의 핵심 개념

### GraphQL이란?

![[Pasted image 20250913170110.png]]

**GraphQL**은 클라이언트가 필요한 데이터 필드를 직접 요청하여 정확히 그 데이터만 받는 API를 위한 쿼리 언어입니다. REST API의 단점인 `오버페칭(over-fetching)`과 `언더페칭(under-fetching)` 문제를 해결합니다.

### AppSync의 역할

![[Pasted image 20250913170121.png]]

AppSync는 GraphQL API를 위한 AWS의 관리형 서비스로, 복수의 데이터 소스(NoSQL, RDB, HTTP API 등)에 걸쳐 데이터를 쿼리하고, 하나의 **그래프(graph)** 형태로 통합하여 제공합니다.

- **통합 데이터 소스**: AppSync는 **DynamoDB**, **Aurora**, **OpenSearch**와 같은 AWS 서비스와 직접 통합되며, Lambda 함수를 통해 거의 모든 데이터 소스에 연결할 수 있습니다.
    
- **리졸버(Resolvers)**: 클라이언트의 GraphQL 쿼리를 실제 데이터 소스의 작업(예: DynamoDB에 `GetItem` 요청)으로 변환하는 로직입니다. 이 리졸버가 AppSync의 핵심적인 '마법'입니다.

---

## 2. 🚀 실시간 및 오프라인 기능

AppSync는 GraphQL을 넘어, 실시간 애플리케이션과 오프라인 환경을 위한 강력한 기능을 제공합니다.

- **실시간(Real-time) 통신**: **WebSocket**을 통한 실시간 데이터 업데이트를 지원합니다. 실시간 대시보드나 채팅 애플리케이션과 같이 즉각적인 데이터 동기화가 필요한 경우에 유용합니다.
    
- **오프라인 데이터 동기화**: 모바일 애플리케이션에서 오프라인 상태일 때도 데이터를 로컬에서 접근하고, 온라인 상태로 전환되면 자동으로 데이터를 동기화하는 기능을 제공합니다. 이는 과거 **Cognito Sync**를 대체하는 기능입니다.

---

## 3. 🔐 보안 및 인증

AppSync API에 대한 접근을 제어하기 위해 네 가지 주요 인증 방식을 지원합니다.

|인증 방식|설명|
|---|---|
|**API 키(API_KEY)**|간단한 사용 사례를 위한 키 기반 인증입니다.|
|**IAM(AWS_IAM)**|IAM 사용자 및 역할을 사용하여 세밀한 접근 제어를 구현합니다.|
|**OpenID Connect(OPENID_CONNECT)**|OIDC 제공업체(IdP)를 통해 JWT(JSON Web Token)를 사용한 인증을 제공합니다.|
|**Cognito User Pools(AMAZON_COGNITO_USER_POOLS)**|Cognito 사용자 풀과 연동하여 소셜 로그인 등 다양한 인증 방식을 통합합니다.|

---

## 4. 🔗 기타 연동 및 커스텀 도메인

- **로깅**: AppSync는 **CloudWatch Metrics** 및 **CloudWatch Logs**와 통합되어 API 호출에 대한 상세한 로그 및 지표를 제공합니다.
    
- **커스텀 도메인**: AppSync API에 커스텀 도메인을 적용하려면, **CloudFront**를 AppSync 앞에 두는 것이 권장되는 아키텍처입니다. CloudFront를 통해 HTTPS 보안과 캐싱 등 다양한 이점을 얻을 수 있습니다.