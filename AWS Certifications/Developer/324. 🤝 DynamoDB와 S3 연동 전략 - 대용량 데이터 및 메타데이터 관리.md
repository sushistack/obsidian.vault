
AWS의 핵심 서비스인 **DynamoDB**와 **S3**는 각각 NoSQL 데이터베이스와 객체 스토리지라는 고유의 역할을 수행합니다. 이 두 서비스를 함께 활용하면 서로의 단점을 보완하고, 대용량 데이터를 효율적으로 관리하는 강력한 아키텍처를 구축할 수 있습니다. 이번 아티클에서는 DynamoDB와 S3를 효과적으로 연동하는 두 가지 주요 전략에 대해 자세히 알아보겠습니다.

---

## 🖼️ 전략 1: DynamoDB에 S3 대용량 객체 링크 저장

![[Pasted image 20250906195458.png]]

DynamoDB는 아이템당 최대 400KB의 데이터만 저장할 수 있습니다. 따라서 이미지, 비디오, 문서와 같은 대용량 객체는 DynamoDB에 직접 저장할 수 없습니다. 이 경우, S3에 대용량 객체를 저장하고 DynamoDB에는 해당 객체의 **메타데이터와 S3 URL**을 저장하는 방식을 사용합니다.

### **동작 방식**

1. **업로드**: 애플리케이션이 대용량 객체(예: 이미지)를 S3 버킷에 업로드합니다.
    
2. **메타데이터 저장**: S3 업로드가 완료되면, 애플리케이션은 S3에서 반환받은 객체 키(Object Key)를 포함한 **메타데이터**를 DynamoDB 테이블에 저장합니다. 이 메타데이터에는 제품 ID, 제품 이름, 그리고 S3 객체 URL이 포함될 수 있습니다.

    - DynamoDB 테이블 예시:

| product_id | product_name | image_url |
| :--- | :--- | :--- |
| P001 | 닌텐도 스위치 | s3://my-bucket/images/switch.jpg |
| P002 | 플레이스테이션 5 | s3://my-bucket/images/ps5.jpg |

1. **읽기**: 클라이언트가 해당 아이템을 조회하려면, 먼저 DynamoDB에서 메타데이터를 읽어 S3 URL을 획득합니다. 이후 해당 URL을 사용하여 S3에서 실제 대용량 객체 데이터를 다운로드합니다.


### **장점**

- **비용 효율성**: S3는 대용량 객체 저장에 매우 저렴한 비용을 제공합니다. 또한 DynamoDB에는 소량의 메타데이터만 저장하므로 전체 비용을 절감할 수 있습니다.
    
- **성능 최적화**: DynamoDB는 작고 인덱싱된 데이터를 빠르게 조회하는 데 최적화되어 있습니다. S3는 대용량 데이터 스트리밍에 최적화되어 있으므로, 각 서비스의 강점을 최대한 활용할 수 있습니다.
    

---

## 🔍 전략 2: S3 객체 메타데이터를 DynamoDB에서 인덱싱

![[Pasted image 20250906195514.png]]

S3는 객체에 대한 쿼리나 검색 기능이 제한적입니다. S3 버킷 내의 특정 날짜 범위에 업로드된 모든 객체를 찾거나, 특정 고객이 업로드한 총 스토리지 용량을 계산하는 등의 복잡한 쿼리는 S3 자체만으로는 효율적으로 수행하기 어렵습니다.

이때 S3와 Lambda, DynamoDB를 조합하여 S3 객체의 메타데이터를 인덱싱하고 검색 기능을 강화할 수 있습니다.

### **동작 방식**

1. **객체 업로드**: 애플리케이션이 객체를 S3 버킷에 업로드합니다.
    
2. **S3 이벤트 알림**: S3는 객체 업로드 이벤트(`s3:ObjectCreated:*`)가 발생하면, AWS Lambda 함수를 자동으로 호출하도록 설정할 수 있습니다.
    
3. **메타데이터 저장**: Lambda 함수는 트리거되면 S3 객체에 대한 메타데이터(예: 객체 크기, 업로드 날짜, 소유자 등)를 가져와서 DynamoDB 테이블에 저장합니다.
    
    - DynamoDB 메타데이터 테이블 예시:
        
| object_key | object_size | upload_date | customer_id |
| :--- | :--- | :--- | :--- |
| images/cat.jpg | 524288 | 2025-09-06 | user_A |
| videos/home.mp4 | 10485760 | 2025-09-05 | user_B |
        
4. **효율적인 쿼리**: 이제 애플리케이션은 DynamoDB 테이블을 쿼리하여 다양한 검색 작업을 효율적으로 수행할 수 있습니다.
    
    - **예시 쿼리**:
        
        - "2025년 9월 1일부터 9월 6일 사이에 업로드된 모든 객체를 찾아라."
            
        - "고객 `user_A`가 업로드한 총 스토리지 용량은 얼마인가?"
### **장점**

- **뛰어난 검색 성능**: DynamoDB는 인덱스를 기반으로 빠르고 유연한 쿼리 기능을 제공하므로, S3 객체에 대한 복잡한 검색 및 분석 작업을 효율적으로 처리할 수 있습니다.
    
- **서버리스 아키텍처**: S3, Lambda, DynamoDB는 모두 서버리스 서비스이므로, 인프라 관리에 대한 부담 없이 확장 가능한 시스템을 구축할 수 있습니다.

---

## 🚀 결론: 올바른 서비스 조합의 중요성

DynamoDB와 S3는 각자 강점이 명확한 서비스입니다. DynamoDB는 **구조화된 데이터와 빠른 인덱싱 및 쿼리**에, S3는 **대용량 객체 저장 및 배포**에 특화되어 있습니다. 이 두 서비스를 적절히 조합하면 다음과 같은 이점을 얻을 수 있습니다.

|조합|목표|DynamoDB 역할|S3 역할|
|---|---|---|---|
|**대용량 객체 관리**|DynamoDB의 용량 제한 극복|대용량 객체의 메타데이터 저장 및 색인|대용량 객체(이미지, 비디오 등) 저장|
|**S3 객체 인덱싱**|S3 객체에 대한 검색 기능 강화|S3 객체의 메타데이터 저장 및 쿼리 허용|객체 저장, 업로드 이벤트 트리거|

이 두 가지 전략은 AWS 서비스의 강점을 극대화하는 모범 사례이며, 시험에서도 자주 출제될 수 있으므로 반드시 숙지해야 합니다.