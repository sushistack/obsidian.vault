
Amazon DynamoDB는 NoSQL 데이터베이스이지만, SQL 문법에 익숙한 사용자를 위해 **PartiQL**이라는 기능을 제공합니다. PartiQL은 DynamoDB의 강력한 성능과 유연성을 유지하면서, 표준 SQL과 유사한 구문을 사용하여 데이터를 조작할 수 있게 해주는 쿼리 언어입니다. 이 아티클에서는 PartiQL의 기본 개념과 주요 기능, 그리고 DynamoDB 콘솔에서 직접 사용하는 방법을 상세히 알아보겠습니다.

---

## 🧐 PartiQL이란 무엇인가?

![[Pasted image 20250903220804.png]]

PartiQL은 DynamoDB의 API 호출(예: `GetItem`, `PutItem`, `Query`)을 SQL 문법으로 대체하여 데이터를 다루는 쿼리 언어입니다. DynamoDB에 새로운 기능을 추가하는 것이 아니라, 기존의 기능을 더 익숙한 방식으로 사용할 수 있도록 돕는 역할을 합니다.

- **SQL 호환성**: `SELECT`, `INSERT`, `UPDATE`, `DELETE`와 같은 표준 SQL 문법을 지원하여, SQL에 익숙한 개발자들이 DynamoDB를 더 쉽게 다룰 수 있습니다.
    
- **유연한 스키마**: PartiQL은 NoSQL 데이터베이스의 유연한 스키마를 그대로 지원합니다. SQL처럼 엄격한 스키마 정의를 요구하지 않습니다.
    
- **Batch 작업 지원**: PartiQL은 단일 쿼리뿐만 아니라 여러 항목을 한 번에 처리하는 일괄 작업(Batch Operations)도 지원합니다.
    

---

## 💻 PartiQL 주요 기능 및 사용법

DynamoDB 콘솔의 **PartiQL 편집기(editor)**를 통해 PartiQL을 직접 실행해 볼 수 있습니다.

### 1. 데이터 조회 (`SELECT` 문)

`SELECT` 문은 DynamoDB 테이블의 데이터를 읽는 데 사용됩니다.

- **테이블 전체 조회 (Scan)**
    
    - `SELECT * FROM <테이블_이름>`
        
    - 이 쿼리는 테이블 전체를 스캔하므로, 대규모 테이블에서는 성능 저하와 높은 비용을 초래할 수 있습니다.
        
- **조건부 조회 (Query)**
    
    - `SELECT * FROM <테이블_이름> WHERE <파티션_키> = <값>`
        
    - 예시: `SELECT * FROM users WHERE user_id = '123'`
        
    - 이 쿼리는 특정 파티션 키를 기준으로 항목을 조회하여 매우 효율적입니다.

### 2. 데이터 삽입 (`INSERT` 문)

`INSERT INTO` 문을 사용하여 테이블에 새 항목을 추가할 수 있습니다.

- **문법**: `INSERT INTO <테이블_이름> VALUE {'<파티션_키>': '<값>', '<속성>': '<값>'}`
    
- **예시**: `INSERT INTO users VALUE {'user_id': '456', 'name': 'James'}`
    

### 3. 데이터 수정 (`UPDATE` 문)

`UPDATE` 문은 기존 항목의 속성 값을 수정하는 데 사용됩니다.

- **문법**: `UPDATE <테이블_이름> SET <속성> = <값> WHERE <파티션_키> = <값>`
    
- **예시**: `UPDATE users SET name = 'Michael' WHERE user_id = '123'`

### 4. 데이터 삭제 (`DELETE` 문)

`DELETE` 문은 테이블에서 특정 항목을 삭제하는 데 사용됩니다.

- **문법**: `DELETE FROM <테이블_이름> WHERE <파티션_키> = <값>`
    
- **예시**: `DELETE FROM users WHERE user_id = '123'`

---

## 📊 PartiQL 에디터 실습

DynamoDB 콘솔의 'PartiQL 편집기'에서 위 명령어들을 직접 실행해 볼 수 있습니다.

1. **테이블 선택**: 편집기에서 쿼리를 실행할 테이블을 선택합니다.
    
2. **쿼리 입력**: SQL 문법에 맞춰 `SELECT`, `INSERT`, `UPDATE`, `DELETE` 쿼리를 작성합니다.
    
3. **쿼리 실행**: '실행(Run)' 버튼을 클릭하여 쿼리 결과를 확인합니다.
    

|작업 유형|DynamoDB API|PartiQL 문법|
|---|---|---|
|**조회**|`GetItem`, `Query`, `Scan`|`SELECT`|
|**삽입**|`PutItem`|`INSERT`|
|**수정**|`UpdateItem`|`UPDATE`|
|**삭제**|`DeleteItem`|`DELETE`|

### **✅ PartiQL과 보조 인덱스(Secondary Indexes)**

PartiQL은 보조 인덱스를 사용하여 더 효율적인 쿼리를 작성할 수 있도록 지원합니다.

- **인덱스 쿼리**: `SELECT * FROM "<테이블_이름>"."<인덱스_이름>"`
    
- 이 구문을 사용하면 특정 인덱스를 기준으로 쿼리하여, 기본 테이블 구조로는 불가능했던 복잡한 쿼리를 효율적으로 실행할 수 있습니다.
    

**결론적으로, PartiQL은 DynamoDB의 강력한 기능을 SQL에 익숙한 개발자에게 더 친숙하게 만들어주는 중요한 도구입니다. 복잡한 API 호출 대신 간단한 SQL 문법으로 DynamoDB를 조작할 수 있다는 점은 개발 생산성을 크게 향상시킬 수 있습니다.**