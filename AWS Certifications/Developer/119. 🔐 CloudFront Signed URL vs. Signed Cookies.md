
CloudFront 서명된 URL과 서명된 쿠키는 CloudFront 배포를 통해 제공되는 **프라이빗 콘텐츠**에 대한 접근을 제어하는 보안 기능입니다. 이를 통해 유료 콘텐츠나 제한된 자료를 특정 사용자에게만 안전하게 제공할 수 있습니다.

---

### 1. 서명된 URL vs. 서명된 쿠키 비교 📝

|특징|서명된 URL (Signed URL)|서명된 쿠키 (Signed Cookies)|
|---|---|---|
|**적용 범위**|**단일 파일**에 대한 접근|**여러 파일** (디렉터리, URL 패턴)에 대한 접근|
|**사용 사례**|하나의 비디오 파일, 단일 문서 등|웹사이트 전체, 이미지 갤러리, 동영상 라이브러리 등|
|**장점**|특정 파일에 대한 접근만 정밀하게 제어|쿠키 하나로 여러 파일에 대한 접근 권한을 부여하여 관리가 용이함|

두 기능 모두 다음 요소를 기반으로 보안 정책을 정의할 수 있습니다.

- **만료 시간:** URL 또는 쿠키가 유효한 기간을 설정합니다.
- **IP 주소:** 특정 IP 주소 범위에서만 접근을 허용합니다.
- **신뢰할 수 있는 서명자(Trusted Signers):** 서명된 URL/쿠키를 생성할 권한을 가진 AWS 계정(루트 계정만 가능)을 지정합니다.

---

### 2. CloudFront 서명된 URL의 작동 방식 ✍️

![[Pasted image 20250809234145.png]]

1. **인증:** 클라이언트가 애플리케이션에 로그인하여 인증을 받습니다.

2. **URL 생성:** 애플리케이션은 AWS SDK를 사용하여 CloudFront 서명된 URL을 생성합니다. 이 URL에는 파일 경로, 만료 시간 등의 보안 정책이 포함됩니다.

3. **URL 전달:** 애플리케이션은 생성된 서명된 URL을 클라이언트에게 전달합니다.

4. **콘텐츠 접근:** 클라이언트는 서명된 URL을 사용하여 CloudFront 엣지 로케이션에 접근하고, CloudFront는 URL의 서명을 검증한 후 원본(Origin)에서 콘텐츠를 가져와 제공합니다.

---

### 3. CloudFront Signed URL vs. S3 Pre-signed URL 🤔

이 두 기능은 모두 "서명된 URL"을 사용하지만, 목적과 작동 방식이 다릅니다.

|특징|CloudFront Signed URL|S3 Pre-signed URL|
|---|---|---|
|**목적**|**CloudFront 배포**의 콘텐츠 접근 제어|**S3 버킷**의 객체 직접 접근 제어|
|**원본(Origin)**|S3, EC2, ALB 등 모든 유형의 원본|**S3 버킷**으로 한정|
|**사용 권한**|AWS 계정의 **루트 계정** 키 페어를 사용해 서명|**URL을 서명한 IAM 주체**의 권한 상속|
|**주요 기능**|IP, 경로, 만료 시간 등 다양한 정책 필터링 및 CloudFront 캐싱 기능 활용|URL을 서명한 IAM 주체의 권한을 부여|
|**활용 시점**|CloudFront를 통해 콘텐츠를 배포할 때|CloudFront 없이 S3 버킷에 직접적인 임시 접근을 허용할 때|

---

### 4. 결론 💡

- **CloudFront 서명된 URL/쿠키:** CloudFront를 통해 전송되는 프라이빗 콘텐츠에 대한 접근을 제어하는 데 사용합니다. 여러 종류의 원본과 캐싱 기능을 활용할 수 있어, CDN을 통한 성능 최적화가 필요한 경우에 적합합니다.

- **S3 Pre-signed URL:** S3 버킷에 직접 저장된 개별 객체에 대한 임시 접근을 허용하는 데 사용합니다. CloudFront를 통하지 않고 S3 버킷에 직접 접근하므로, 간단한 파일 공유에 적합합니다.