
μ΄λ² μ‹¤μµμ—μ„λ” Amazon ECSμ—μ„ μ»¨ν…μ΄λ„λ¥Ό μ‹¤ν–‰ν•κΈ° μ„ν• **νƒμ¤ν¬ μ •μ(Task Definition)**λ¥Ό μƒμ„±ν•λ” κ³Όμ •μ„ λ‹¨κ³„λ³„λ΅ μ§„ν–‰ν•©λ‹λ‹¤. μ΄ κ³Όμ •μ„ ν†µν•΄ λ‹¤μ–‘ν• μ„¤μ • μµμ…λ“¤μ„ μ§μ ‘ ν™•μΈν•κ³  κµ¬μ„±ν•΄ λ³΄κ² μµλ‹λ‹¤.

---

### 1λ‹¨κ³„: μƒ νƒμ¤ν¬ μ •μ μƒμ„± μ‹μ‘ π€

1. AWS **ECS μ½μ†”**λ΅ μ΄λ™ν•©λ‹λ‹¤.
2. μ™Όμ½ νƒμƒ‰ λ©”λ‰΄μ—μ„ **`νƒμ¤ν¬ μ •μ(Task Definitions)`**λ¥Ό μ„ νƒν•©λ‹λ‹¤.
3. **`μƒ νƒμ¤ν¬ μ •μ μƒμ„±(Create new task definition)`** λ²„νΌμ„ ν΄λ¦­ν•©λ‹λ‹¤.
4. **`νƒμ¤ν¬ μ •μ ν¨λ°€λ¦¬(Task definition family)`**μ— `wordpress`μ™€ κ°™μ΄ νƒμ¤ν¬ μ •μμ μ΄λ¦„μ„ μ§€μ •ν•©λ‹λ‹¤.

---

### 2λ‹¨κ³„: μΈν”„λΌ λ° λ¦¬μ†μ¤ μ„¤μ • β™οΈ

νƒμ¤ν¬κ°€ μ‹¤ν–‰λ  ν™κ²½κ³Ό ν•„μ”ν• λ¦¬μ†μ¤λ¥Ό μ •μν•©λ‹λ‹¤.

1. **μΈν”„λΌ μ”κµ¬μ‚¬ν•­(Infrastructure requirements):**
    
    - `Fargate` λλ” `Amazon EC2` μ¤‘ μ›ν•λ” μ‹μ‘ μ ν•μ„ μ„ νƒν•©λ‹λ‹¤.
    - **Fargate**λ¥Ό μ„ νƒν•λ©΄, **`μ΄μ μ²΄μ /μ•„ν‚¤ν…μ²`**λ¥Ό μ„ νƒν•κ³ , **`νƒμ¤ν¬ ν¬κΈ°(Task size)`** μ„Ήμ…μ—μ„ `vCPU`μ™€ `λ©”λ¨λ¦¬(Memory)`μ κ°’μ„ λ“λ΅­λ‹¤μ΄ λ©”λ‰΄μ—μ„ μ§€μ •ν•©λ‹λ‹¤.
    - **Amazon EC2**λ¥Ό μ„ νƒν•λ©΄, `vCPU`μ™€ `λ©”λ¨λ¦¬` κ°’μ„ μμ λ΅­κ² μ…λ ¥ν•  μ μμµλ‹λ‹¤.

2. **IAM μ—­ν• :**
    - **`νƒμ¤ν¬ μ—­ν• (Task role)`:** μ»¨ν…μ΄λ„κ°€ λ‹¤λ¥Έ AWS μ„λΉ„μ¤μ— μ ‘κ·Όν•λ” λ° ν•„μ”ν• κ¶ν•μ„ λ¶€μ—¬ν•©λ‹λ‹¤.
    - **`νƒμ¤ν¬ μ‹¤ν–‰ μ—­ν• (Task execution role)`:** ECS μ—μ΄μ „νΈκ°€ ECR μ΄λ―Έμ§€ κ°€μ Έμ¤κΈ°, CloudWatch λ΅κ·Έ μ „μ†΅ λ“±μ„ μν–‰ν•λ” λ° ν•„μ”ν• κ¶ν•μ„ λ¶€μ—¬ν•©λ‹λ‹¤.

---

### 3λ‹¨κ³„: μ»¨ν…μ΄λ„ μ¶”κ°€ λ° μ„¤μ • π“¦

νƒμ¤ν¬ λ‚΄μ—μ„ μ‹¤ν–‰λ  μ»¨ν…μ΄λ„μ— λ€ν• μ„Έλ¶€ μ •λ³΄λ¥Ό κµ¬μ„±ν•©λ‹λ‹¤.

1. **`μ»¨ν…μ΄λ„(Container)`** μ„Ήμ…μ—μ„ **`μ»¨ν…μ΄λ„ μ¶”κ°€(Add container)`**λ¥Ό ν΄λ¦­ν•©λ‹λ‹¤.
2. **`μ΄λ¦„(Name)`:** μ»¨ν…μ΄λ„μ μ΄λ¦„μ„ μ§€μ •ν•©λ‹λ‹¤. (μ: `wordpress`)
3. **`μ΄λ―Έμ§€ URI(Image URI)`:** Docker μ΄λ―Έμ§€μ κ²½λ΅λ¥Ό μ…λ ¥ν•©λ‹λ‹¤. (μ: `wordpress:latest`)
4. **`ν•„μ(Essential)`:** μ΄ μ»¨ν…μ΄λ„κ°€ μ¤‘μ§€λμ—μ„ λ• νƒμ¤ν¬λ¥Ό μ¤‘μ§€μ‹ν‚¬μ§€ μ—¬λ¶€λ¥Ό κ²°μ •ν•©λ‹λ‹¤. κΈ°λ³Έμ μΌλ΅ ν™μ„±ν™”λμ–΄ μμµλ‹λ‹¤.
5. **`ν¬νΈ λ§¤ν•‘(Port mappings)`:**
    - **`μ»¨ν…μ΄λ„ ν¬νΈ(Container port)`:** μ»¨ν…μ΄λ„κ°€ λ…Έμ¶ν•λ” ν¬νΈ(μ: `80`)λ¥Ό μ…λ ¥ν•©λ‹λ‹¤.
    - **`νΈμ¤νΈ ν¬νΈ(Host port)`:** EC2 μ‹μ‘ μ ν•μ—μ„λ§ μ‚¬μ©λλ©°, `μ»¨0`μΌλ΅ μ„¤μ •ν•λ©΄ λ™μ μΌλ΅ ν¬νΈκ°€ ν• λ‹Ήλ©λ‹λ‹¤.
6. **`ν™κ²½(Environment)`:**
    - **`ν™κ²½ λ³€μ(Environment variables)`:** `μ΄λ¦„`κ³Ό `κ°’`μ„ μ§μ ‘ μ…λ ¥ν•κ±°λ‚, `valueFrom`μ„ ν†µν•΄ `Secrets Manager`λ‚ `SSM Parameter Store`μ κ°’μ„ μ°Έμ΅°ν•  μ μμµλ‹λ‹¤.
    - **`νμΌμ—μ„(From file)`:** S3 λ²„ν‚·μ— μλ” νμΌμ—μ„ ν™κ²½ λ³€μλ¥Ό μΌκ΄„μ μΌλ΅ λ΅λ“ν•  μ μμµλ‹λ‹¤.
7. **`λ΅κΉ…(Logging)`:** λ΅κ·Έλ¥Ό `CloudWatch Logs`λ΅ λ³΄λ‚΄κ±°λ‚ `FireLens`λ¥Ό μ‚¬μ©ν•μ—¬ λ‹¤λ¥Έ λ©μ μ§€(S3, Splunk λ“±)λ΅ λ³΄λ‚Ό μ μμµλ‹λ‹¤.
8. **`ν—¬μ¤ μ²΄ν¬(HealthCheck)`:** μ»¨ν…μ΄λ„μ μƒνƒλ¥Ό ν™•μΈν•κΈ° μ„ν• λ…λ Ή λ° μ„¤μ •μ„ μ •μν•©λ‹λ‹¤.
9. **`μ¤ν† λ¦¬μ§€(Storage)`:**
    - **`λ³Όλ¥¨(Volumes)`:** `λ°”μΈλ“ λ§μ΄νΈ(Bind mount)` λλ” `EFS νμΌ μ‹μ¤ν…`μ„ μ •μν•μ—¬ μ»¨ν…μ΄λ„μ— λ§μ΄νΈν•  μ μμµλ‹λ‹¤.
    - **`λ§μ΄νΈ μ§€μ (Mount points)`:** μ •μν• λ³Όλ¥¨μ„ μ»¨ν…μ΄λ„ λ‚΄μ νΉμ • κ²½λ΅μ— λ§μ΄νΈν•©λ‹λ‹¤.

---

### 4λ‹¨κ³„: νƒμ¤ν¬ μ •μ μƒμ„± μ™„λ£ β…

λ¨λ“  μ„¤μ •μ„ λ§μΉ ν›„, **`μƒμ„±(Create)`** λ²„νΌμ„ ν΄λ¦­ν•μ—¬ νƒμ¤ν¬ μ •μλ¥Ό μ™„λ£ν•©λ‹λ‹¤. μƒμ„±λ νƒμ¤ν¬ μ •μλ” JSON ν•μ‹μΌλ΅ μ”μ•½λμ–΄ ν‘μ‹λλ©°, μ΄λ¥Ό ν†µν•΄ κµ¬μ„± λ‚΄μ©μ„ ν•λμ— ν™•μΈν•  μ μμµλ‹λ‹¤. μ΄μ  μ΄ νƒμ¤ν¬ μ •μλ¥Ό μ‚¬μ©ν•μ—¬ ECS μ„λΉ„μ¤λ‚ λ°°μΉ νƒμ¤ν¬λ¥Ό λ°°ν¬ν•  μ μμµλ‹λ‹¤.