
AWS Systems Manager(SSM) 파라미터 스토어는 애플리케이션의 설정 및 비밀 정보를 안전하게 저장하고 관리하는 서비스입니다. 이 가이드에서는 AWS 콘솔과 CLI를 사용하여 파라미터를 생성하고, 계층 구조를 활용하며, 암호화된 값을 안전하게 사용하는 방법을 단계별로 안내합니다.

---

## 1. ⚙️ 파라미터 생성: 계층 구조 및 유형

### 단계 1: 파라미터 생성

파라미터 스토어에서 `Create parameter`를 클릭하여 새로운 파라미터를 생성합니다.

- **이름(Name)**: 파라미터 이름은 `/`를 사용하여 **계층 구조**를 만듭니다. 이는 환경(dev, prod), 애플리케이션별로 구성 정보를 체계적으로 관리하는 데 매우 유용합니다.
    
    - **예시**: `/my-app/dev/db-url`
        
- **티어(Tier)**:
    
    - **Standard**: 최대 4KB 크기, 10,000개까지 무료.
        
    - **Advanced**: 최대 8KB 크기, 100,000개까지 가능하며, 추가 비용이 발생합니다.
        
- **유형(Type)**:
    
    - **String**: 일반 텍스트를 저장합니다.
        
    - **StringList**: 쉼표로 구분된 문자열 목록을 저장합니다.
        
    - **SecureString**: KMS(Key Management Service) 키로 **암호화하여 저장**합니다. 민감한 정보(비밀번호, API 키 등)에 사용합니다.
        

### 단계 2: SecureString 파라미터 생성 (KMS 연동)

데이터베이스 비밀번호와 같은 민감한 정보는 `SecureString` 유형을 선택하여 암호화해야 합니다.

- **유형**: `SecureString` 선택.
    
- **KMS 키**: `SecureString`은 KMS 키를 사용하여 암호화되므로, 암호화에 사용할 키를 선택해야 합니다. SSM 기본 키(`alias/aws/ssm`) 또는 직접 생성한 **고객 관리형 키**를 사용할 수 있습니다.
    
- **값(Value)**: 비밀번호(`devpassword`)와 같은 값을 입력하면, 파라미터 스토어가 이 값을 자동으로 암호화하여 저장합니다.
    

---

## 2. 💻 CLI를 활용한 파라미터 접근

파라미터는 AWS CLI를 통해 손쉽게 조회하고 사용할 수 있습니다. 다음은 CloudShell에서 실행할 수 있는 명령어 예시입니다.

### 1. `get-parameters`로 특정 파라미터 조회

`get-parameters` 명령은 하나 이상의 파라미터 이름을 지정하여 값을 가져옵니다.

- **일반 파라미터**: `String` 유형의 값은 평문으로 반환됩니다.

    
```Bash
aws ssm get-parameters --names "/my-app/dev/db-url"
```

```JSON
{
	"Parameters": [
		{
			"Name": "/my-app/dev/db-url",
			"Type": "String",
			"Value": "dev.database.stephantheteacher.com"
		}
	]
}
```
    
- **SecureString 파라미터**: `--with-decryption` 플래그를 추가해야 복호화된 값을 얻을 수 있습니다. 이 플래그 없이는 암호화된 문자열이 반환됩니다.

```Bash
aws ssm get-parameters --names "/my-app/dev/db-password" --with-decryption
```
    
```JSON
{
	"Parameters": [
		{
			"Name": "/my-app/dev/db-password",
			"Type": "SecureString",
			"Value": "devpassword"
		}
	]
}
```
    
    **주의**: 이 명령어를 실행하는 IAM 주체(사용자 또는 역할)는 해당 파라미터에 사용된 KMS 키에 대한 `kms:Decrypt` 권한이 있어야 합니다.
    

### 2. `get-parameters-by-path`로 계층 조회

`get-parameters-by-path` 명령은 계층 구조의 장점을 활용하여 특정 경로 아래의 모든 파라미터를 한 번에 조회합니다.

- **기본 경로 조회**:

```Bash
# /my-app/dev 경로에 있는 파라미터만 조회
aws ssm get-parameters-by-path --path "/my-app/dev"
```
    
- **재귀적 조회**: `--recursive` 플래그를 추가하면 하위 경로에 있는 모든 파라미터를 재귀적으로 조회할 수 있습니다.
    
```Bash
# /my-app 경로 하위의 모든 파라미터 조회 (dev, prod 포함)
aws ssm get-parameters-by-path --path "/my-app" --recursive
```
    
- **복호화 포함**: `--with-decryption` 플래그를 추가하여 모든 SecureString 파라미터의 값을 동시에 복호화할 수 있습니다.

```Bash
aws ssm get-parameters-by-path --path "/my-app" --recursive --with-decryption
```
    

---

## 3. 🚀 결론

SSM 파라미터 스토어는 단순한 키-값 저장소를 넘어, 체계적인 계층 구조와 KMS를 활용한 강력한 암호화 기능을 제공합니다. CLI를 통한 쉬운 접근과 `SecureString`의 안전한 사용은 스크립트나 애플리케이션에서 민감한 정보를 효과적으로 관리하는 데 큰 도움이 됩니다.