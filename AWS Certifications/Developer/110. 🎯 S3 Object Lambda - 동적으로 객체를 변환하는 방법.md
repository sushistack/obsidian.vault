

**Amazon S3 Object Lambda**는 S3에서 객체를 가져오는(retrieve) 시점에 AWS Lambda 함수를 실행하여 데이터를 동적으로 변환하는 기능입니다. 이 기능을 사용하면 원본 객체를 수정하지 않고도 다양한 애플리케이션의 요구사항에 맞는 형태로 데이터를 제공할 수 있습니다. 이를 위해 S3 접근 지점(Access Point)이 필수적으로 사용됩니다.

---

### S3 Object Lambda의 작동 원리

![[Pasted image 20250809232142.png]]

1. **S3 접근 지점:** 먼저, S3 버킷에 대한 접근 지점(Access Point)을 생성합니다. 이 접근 지점은 Lambda 함수와 연결됩니다.
    
2. **Lambda 함수:** 객체 변환 로직이 포함된 Lambda 함수를 생성합니다. 이 함수는 원본 객체를 받아서 데이터를 수정(예: 마스킹, 형식 변환)하고 반환하는 역할을 합니다.
    
3. **Object Lambda 접근 지점:** Lambda 함수 위에 **S3 Object Lambda 접근 지점**을 생성합니다. 이 지점은 애플리케이션이 데이터를 요청할 때 사용되는 최종 엔드포인트가 됩니다.
    
4. **데이터 요청:** 애플리케이션이 Object Lambda 접근 지점에 `GET` 요청을 보냅니다.
    
5. **동적 변환:**
    - 요청이 Object Lambda 접근 지점에 도달하면, 연결된 **Lambda 함수**가 자동으로 트리거됩니다.
    - Lambda 함수는 S3 버킷에서 **원본 객체**를 가져옵니다.
    - Lambda 함수는 원본 데이터를 코드로 처리하여 요구사항에 맞게 변환합니다.
    - 변환된 객체가 애플리케이션에 반환됩니다.

이 모든 과정은 애플리케이션이 요청을 보내는 시점에 즉시 이루어지므로, 하나의 S3 버킷으로 여러 애플리케이션의 다양한 데이터 요구사항을 충족시킬 수 있습니다.

---

### 주요 사용 사례

S3 Object Lambda는 원본 객체를 복제하거나 별도의 스토리지에 저장하는 번거로움 없이 데이터를 유연하게 제공해야 할 때 효과적입니다.

- **데이터 마스킹(Redaction):** 분석 또는 비(非)프로덕션 환경을 위해 개인 식별 정보(PII)와 같은 민감한 데이터를 마스킹하여 제공합니다.

- **데이터 형식 변환:** 데이터 요청 시점에 XML 형식의 데이터를 JSON으로 변환하는 등 다양한 형식 변환을 수행합니다.

- **데이터 강화(Enrichment):** 고객 충성도 데이터베이스와 같은 외부 데이터 소스를 활용하여 원본 객체에 추가 정보를 결합하여 제공합니다.

- **이미지 변환:** 요청하는 사용자에 따라 이미지의 크기를 조절하거나 워터마크를 동적으로 추가합니다.


S3 Object Lambda는 데이터 변환 로직을 S3 버킷과 분리함으로써, 스토리지 관리를 단순화하고 애플리케이션 개발을 용이하게 만드는 강력한 기능입니다.