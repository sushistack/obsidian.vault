## Amazon EventBridge란?

**Amazon EventBridge**는 클라우드 환경에서 발생하는 다양한 이벤트들을 손쉽게 연결하고 자동화하는 서비스입니다. 이전에는 **CloudWatch Events**로 불렸으며, 스케줄링된 작업, AWS 서비스의 상태 변화, 또는 제3자 SaaS(Software as a Service) 애플리케이션의 이벤트를 기반으로 특정 대상을 트리거하는 역할을 합니다.

EventBridge는 이벤트의 **생산자(Producer)**와 **소비자(Consumer)** 사이의 중개자 역할을 수행하여, 각 서비스가 서로 직접적으로 의존하지 않도록 느슨한 결합(loosely coupled)을 가능하게 합니다.

## 📡 이벤트 소스 및 버스 유형

EventBridge는 다양한 소스로부터 이벤트를 수신하며, 이를 세 가지 유형의 **이벤트 버스(Event Bus)**로 분류합니다.

|이벤트 버스 유형|설명|이벤트 소스 예시|
|---|---|---|
|**기본 이벤트 버스 (Default Event Bus)**|AWS 서비스에서 발생하는 모든 이벤트를 자동으로 수신합니다.|EC2 인스턴스 시작/종료, S3 객체 업로드, CodeBuild 빌드 실패, Trusted Advisor 알림 등|
|**파트너 이벤트 버스 (Partner Event Bus)**|AWS와 제휴된 파트너(SaaS) 애플리케이션에서 발생하는 이벤트를 수신합니다.|Zendesk, Datadog, Auth0 등|
|**사용자 지정 이벤트 버스 (Custom Event Bus)**|사용자가 직접 생성하여 애플리케이션에서 발생하는 이벤트를 수신합니다.|사용자 지정 애플리케이션의 이벤트|

또한, EventBridge를 **CloudTrail**과 결합하면 AWS 계정 내에서 발생하는 모든 API 호출을 가로채서 특정 액션을 수행할 수 있습니다.

## ⏰ 스케줄링 및 규칙 기반 이벤트

EventBridge는 두 가지 주요 방식으로 이벤트를 생성합니다.

1. **스케줄 기반**: Cron 표현식을 사용하여 특정 시간 또는 주기(예: 매시간, 매월 첫째 주 월요일 오전 8시)에 이벤트를 발생시킵니다. 이는 정기적인 스크립트 실행이나 배치 작업에 유용합니다.
	![[Pasted image 20250824205825.png]]
    
2. **이벤트 패턴 기반**: 특정 이벤트 패턴과 일치하는 이벤트가 발생했을 때 규칙을 트리거합니다. 예를 들어, IAM 루트 계정으로 로그인하는 이벤트가 감지되면 규칙을 실행하여 알림을 보낼 수 있습니다.
	![[Pasted image 20250824205837.png]]


## ➡️ 다양한 이벤트 대상(Destination)

EventBridge 규칙은 JSON 형식의 이벤트 문서를 분석한 후, 여러 대상(Destination)으로 이벤트를 보낼 수 있습니다. 이를 통해 다양한 서비스 간의 강력한 통합이 가능해집니다.

|이벤트 대상|예시|
|---|---|
|**컴퓨팅**|Lambda 함수 호출, AWS Batch 작업 시작, ECS/Fargate 작업 실행, EC2 인스턴스 시작/중지|
|**메시징**|SNS/SQS 메시지 전송, Kinesis Data Streams로 데이터 스트리밍|
|**자동화**|Step Functions 워크플로우 시작, SSM 자동화 실행|
|**CI/CD**|CodePipeline/CodeBuild 시작|

## 📦 이벤트 아카이브 및 리플레이

EventBridge의 **아카이브** 기능은 이벤트 버스에 유입되는 이벤트를 영구적으로 또는 특정 기간 동안 보관할 수 있게 해줍니다.

- **용도**:
    
    - **문제 해결 및 디버깅**: 코드 버그 등으로 인해 이벤트 처리에 실패했을 때, 아카이브된 이벤트를 **리플레이(Replay)**하여 수정된 애플리케이션에서 다시 테스트할 수 있습니다.
    
    - **데이터 감사**: 과거 이벤트 데이터를 보관하여 추후 분석에 활용할 수 있습니다.


## 🧩 스키마 레지스트리 (Schema Registry)

EventBridge **스키마 레지스트리**는 이벤트 버스에 유입되는 이벤트의 구조(스키마)를 자동으로 추론하고 관리합니다.

- **기능**:
    
    - 이벤트의 구조를 분석하고 스키마를 생성합니다.
    
    - 이벤트 스키마를 기반으로 애플리케이션 코드를 생성하여 개발자가 이벤트 데이터를 쉽게 파싱하고 사용할 수 있도록 돕습니다.
    
    - 스키마 버전 관리를 지원하여 시간에 따른 이벤트 구조의 변화에 유연하게 대응할 수 있습니다.


## 🤝 교차 계정 이벤트 공유

**리소스 기반 정책(Resource-based Policy)**을 사용하면, 한 AWS 계정의 이벤트 버스에 다른 계정의 서비스가 이벤트를 보낼 수 있도록 허용할 수 있습니다. 이는 중앙 집중식 이벤트 버스를 구축하여 여러 계정의 이벤트를 한곳에서 통합 관리하는 데 매우 유용합니다.

|계정 유형|역할|
|---|---|
|**중앙 계정**|**중앙 이벤트 버스**를 소유하고 리소스 기반 정책을 설정하여 다른 계정의 이벤트를 수신합니다.|
|**연결 계정**|`PutEvents` API를 사용하여 중앙 계정의 이벤트 버스로 이벤트를 전송합니다.|