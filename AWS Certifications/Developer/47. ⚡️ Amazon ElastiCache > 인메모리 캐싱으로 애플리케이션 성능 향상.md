
Amazon ElastiCache는 AWS에서 제공하는 완전 관리형 인메모리 캐싱 서비스로, Redis 또는 Memcached 엔진을 지원합니다. 이 서비스는 데이터베이스의 부하를 줄이고 애플리케이션의 응답 속도를 극적으로 향상시키는 데 사용됩니다.

---

### 1. ElastiCache란 무엇인가요? 🤔

ElastiCache는 높은 성능과 낮은 지연 시간을 제공하는 **인메모리(in-memory) 데이터베이스** 서비스입니다. 관계형 데이터베이스(RDS)와 마찬가지로, AWS가 운영 체제 유지 관리, 패치, 최적화, 설정, 모니터링, 장애 복구 및 백업을 모두 관리합니다.

#### 1.1 캐싱의 목적

- **데이터베이스 부하 감소**: 읽기 집약적인 워크로드에서 데이터베이스의 부담을 줄입니다. 자주 쿼리되는 데이터를 캐시에 저장하여 데이터베이스를 직접 쿼리하는 횟수를 줄입니다.
- **성능 향상**: 캐시에서 데이터를 직접 가져오면 데이터베이스에서 가져오는 것보다 훨씬 빠르므로 애플리케이션의 응답 속도가 향상됩니다.
- **애플리케이션 무상태화(Stateless)**: 사용자 세션 데이터와 같은 애플리케이션의 상태를 캐시에 저장하여, 애플리케이션 인스턴스가 상태를 직접 관리할 필요 없이 확장 가능하고 유연한 아키텍처를 구축할 수 있습니다.

#### 1.2 코드 변경 필요성 ⚠️

- ElastiCache는 단순히 활성화하는 서비스가 아닙니다. 캐시를 활용하려면 **애플리케이션 코드 변경이 필수적**입니다.
- 애플리케이션은 데이터를 데이터베이스에서 가져오기 전 또는 후에 캐시를 쿼리하도록 로직이 구현되어야 합니다.

---

### 2. ElastiCache 아키텍처 및 캐싱 전략 🧠

ElastiCache를 애플리케이션에 통합하는 일반적인 아키텍처 패턴은 다음과 같습니다.

#### 2.1 읽기 집약적 워크로드 캐싱 (Read-Through/Lazy Loading)

![[Pasted image 20250708232800.png]]

이 전략은 데이터베이스의 읽기 부하를 줄이는 데 사용됩니다.

코드 스니펫

```
graph TD
    A[Application] --> B{Query ElastiCache?};
    B -- Cache Hit --> C[Retrieve Data from ElastiCache];
    B -- Cache Miss --> D[Read Data from RDS Database];
    D --> E[Write Data back to ElastiCache];
    E --> F[Return Data to Application];
    C --> F;
```

- **캐시 히트(Cache Hit)**: 애플리케이션이 ElastiCache에 데이터를 요청하고, 해당 데이터가 캐시에 이미 존재하면, 캐시에서 즉시 데이터를 반환합니다. 데이터베이스 접근이 필요 없어 응답 속도가 빠릅니다.
- **캐시 미스(Cache Miss)**: 요청한 데이터가 캐시에 없으면, 애플리케이션은 데이터베이스에서 데이터를 읽어옵니다. 읽어온 데이터는 다음 요청을 위해 ElastiCache에 다시 기록됩니다.
- **장점**: 데이터베이스의 읽기 부하를 크게 줄일 수 있습니다.
- **과제**: 캐시 내의 데이터가 항상 최신 상태인지 확인하기 위한 **캐시 무효화(Cache Invalidation)** 전략이 중요합니다. 이 부분이 캐싱 기술 사용의 주요 난관 중 하나입니다.

#### 2.2 사용자 세션 저장 (User Session Store)

![[Pasted image 20250708232836.png]]

이 전략은 애플리케이션을 무상태(stateless)로 만들고 수평적 확장을 용이하게 합니다.

코드 스니펫

```
graph TD
    A[User Login] --> B[Application Instance 1];
    B --> C[Write Session Data to ElastiCache];
    A[User Redirected] --> D[Application Instance 2];
    D --> E[Retrieve Session Data from ElastiCache];
    E --> F[User Remains Logged In];
```

- **작동 방식**: 사용자가 애플리케이션에 로그인하면, 해당 세션 데이터(로그인 정보, 설정 등)를 ElastiCache에 저장합니다.
    
- **확장성**: 사용자가 다른 애플리케이션 인스턴스로 리디렉션되더라도, 해당 인스턴스는 ElastiCache에서 세션 데이터를 가져와 사용자를 계속 로그인 상태로 유지할 수 있습니다.
    
- **장점**: 각 애플리케이션 인스턴스가 사용자 상태를 독립적으로 관리할 필요가 없으므로, 애플리케이션을 쉽게 수평 확장할 수 있습니다.
    

---

### 3. Redis vs. Memcached 비교 📊

ElastiCache는 Redis와 Memcached 두 가지 엔진을 지원하며, 각각의 특성과 기능이 다릅니다.

| 특징           | Redis                                                        | Memcached                                |
| ------------ | ------------------------------------------------------------ | ---------------------------------------- |
| **고가용성**     | 멀티-AZ 배포 (자동 장애 조치), 읽기 복제본 (읽기 확장 및 고가용성)                   | 고가용성 없음, 복제 기능 없음                        |
| **데이터 내구성**  | AOF(Append Only File) 영속성을 통한 데이터 내구성 지원                     | 데이터 내구성 없음 (캐시 전체 유실 가능)                 |
| **백업 및 복원**  | 오픈 소스 Redis 버전에서 지원                                          | 서버리스 Memcached 버전에서만 지원 (자체 관리형은 지원 안 함) |
| **데이터 구조**   | 문자열, 해시, 리스트, **세트, 정렬된 세트** 등 다양한 고급 데이터 구조 지원 (예: 리더보드 구현) | 단순 키-값 저장소                               |
| **아키텍처**     | 단일 노드 또는 복제본 (마스터/슬레이브)                                      | 여러 노드에 데이터 샤딩 (파티셔닝), 노드 간 데이터 공유        |
| **스레딩**      | 단일 스레드 (대부분의 작업)                                             | 멀티 스레드 아키텍처 (성능에 유리할 수 있음)               |
| **사용 사례 예시** | 리더보드, 실시간 분석, 세션 저장, 메시지 브로커링 등                              | 대규모 분산 캐시, 세션 저장 등                       |

**시험 대비**: 시험에서는 Redis와 Memcached 중 특정 하나를 선택해야 하는 복잡한 질문이 많지 않을 수 있지만, 각 캐시 엔진의 기본적인 특성과 주요 차이점을 아는 것은 유용합니다.

---

### 4. 결론 🏁

Amazon ElastiCache는 애플리케이션의 성능을 최적화하고 데이터베이스의 부하를 줄이는 데 매우 효과적인 서비스입니다. Redis와 Memcached 중 워크로드의 특성과 필요한 기능(고가용성, 데이터 내구성, 특정 데이터 구조 등)에 따라 적절한 엔진을 선택하여 활용할 수 있습니다.
