
## 📢 SNS란?

**아마존 SNS(Simple Notification Service)**는 발행/구독(Pub/Sub) 모델을 기반으로 하는 완전 관리형 메시징 서비스입니다. 생산자(Publisher)가 하나의 메시지를 SNS **토픽(Topic)**에 발행하면, 해당 토픽을 구독(Subscribe)하고 있는 모든 소비자(Subscriber)에게 메시지가 전달됩니다.

### 기존 방식과의 비교

![[Pasted image 20250817205009.png]]

- **기존 방식:** 생산자(예: 구매 서비스)가 각 소비자(예: 사기 방지, 배송, SQS 큐)에게 직접 메시지를 보내야 합니다. 새로운 소비자를 추가할 때마다 생산자 애플리케이션의 코드를 수정해야 하므로 **결합도(coupling)**가 높아 비효율적입니다.
    
- **Pub/Sub 모델:** 생산자는 **SNS 토픽**에만 메시지를 발행합니다. SNS 토픽은 메시지를 받아 여러 구독자에게 자동으로 전달합니다. 이는 생산자와 소비자의 결합도를 낮춰 시스템을 유연하고 확장 가능하게 만듭니다.


---

## 🎯 SNS의 핵심 구성 요소

### 1. 토픽(Topic)

- 메시지가 발행되는 논리적인 접근 지점입니다. 생산자는 특정 토픽에 메시지를 보냅니다.
- 하나의 토픽에 최대 1,200만 개 이상의 구독을 설정할 수 있습니다.

### 2. 구독자(Subscriber)

- 토픽으로부터 메시지를 받을 수 있는 **엔드포인트**입니다.
- 다양한 유형의 구독자를 지원하여 유연한 메시지 전달을 가능하게 합니다.

### 3. 메시지

- 토픽에 발행되는 실제 데이터입니다.

---

## 📲 SNS 구독자 유형

![[Pasted image 20250817205143.png]]

SNS는 다양한 엔드포인트로 메시지를 전달할 수 있습니다.

|구독자 유형|설명|주요 사용 사례|
|---|---|---|
|**SQS 큐**|메시지를 SQS 큐로 전송하여 컨슈머가 비동기적으로 메시지를 처리하게 합니다.|이벤트 드리븐 아키텍처, 느슨하게 결합된 분산 시스템|
|**AWS Lambda**|Lambda 함수를 트리거하여 메시지를 바탕으로 코드를 실행합니다.|서버리스 아키텍처, 실시간 데이터 처리|
|**HTTP/HTTPS 엔드포인트**|지정된 웹 서버의 URL로 메시지를 HTTP 요청 형태로 보냅니다.|웹훅(Webhook), 외부 애플리케이션 연동|
|**이메일(Email)**|메시지 내용을 이메일로 보냅니다.|알림, 경고, 보고서 전송|
|**SMS/모바일 푸시**|휴대폰으로 SMS 또는 모바일 푸시 알림을 보냅니다.|긴급 알림, 사용자 대상 메시지 전송|
|**Kinesis Data Firehose**|메시지를 S3, Redshift 등으로 스트리밍합니다.|빅데이터 수집 및 분석 파이프라인|

---

## 🔒 SNS의 보안 및 접근 제어

SNS는 강력한 보안 기능을 제공합니다.

- **전송 중(In-Flight) 암호화:** 메시지가 전송되는 동안 자동으로 암호화됩니다.

- **저장 데이터(At-Rest) 암호화:** **KMS(Key Management Service)** 키를 사용하여 메시지를 암호화할 수 있습니다.

- **IAM 정책:** 모든 SNS API 호출은 **IAM(Identity and Access Management)** 정책에 의해 제어됩니다. 이를 통해 누가 메시지를 발행하고 구독할 수 있는지 세밀하게 권한을 설정할 수 있습니다.

- **액세스 정책(Access Policy):** S3 버킷 정책과 유사하며, 토픽 수준에서 접근 권한을 정의하는 JSON 문서입니다. 교차 계정 액세스를 허용하거나 S3와 같은 다른 AWS 서비스가 토픽에 메시지를 발행하도록 권한을 부여할 때 사용됩니다.


---

## ⚙️ AWS 서비스와의 통합

![[Pasted image 20250817205241.png]]

SNS는 다른 AWS 서비스의 이벤트 알림을 수신하는 데 널리 사용됩니다.

- **CloudWatch Alarms:** 경보 상태가 변경되면 SNS로 알림을 보냅니다.
- **Auto Scaling Group:** 인스턴스 시작/종료 등의 이벤트가 발생하면 SNS로 알림을 보냅니다.
- **S3 버킷:** 객체 생성/삭제 등의 이벤트 알림을 SNS로 보냅니다.

이러한 통합을 통해 SNS는 AWS 환경에서 발생하는 다양한 이벤트에 대한 중앙 집중식 알림 시스템 역할을 수행합니다.