

λλ‹¤ ν•¨μμ **λ²„μ „(Versions)**κ³Ό **λ³„μΉ­(Aliases)**μ€ μ½”λ“ λ°°ν¬λ¥Ό μ²΄κ³„μ μΌλ΅ κ΄€λ¦¬ν•κ³ , μ•μ „ν•κ² μ—…λ°μ΄νΈλ¥Ό μν–‰ν•λ” λ° ν•„μμ μΈ κΈ°λ¥μ…λ‹λ‹¤. μ΄ μ‹¤μµμ—μ„λ” κ°„λ‹¨ν• ν•¨μλ¥Ό ν†µν•΄ λ²„μ „κ³Ό λ³„μΉ­μ„ μƒμ„±ν•κ³ , μΉ΄λ‚λ¦¬ λ°°ν¬(canary deployments)λ¥Ό μ‹λ®¬λ μ΄μ…ν•λ” λ°©λ²•μ„ μ‚΄ν΄λ΄…λ‹λ‹¤.

---

## 1. λλ‹¤ λ²„μ „ μƒμ„±: μ½”λ“ κ³ μ •ν•κΈ° π“

λ²„μ „μ€ νΉμ • μ‹μ μ μ½”λ“μ™€ μ„¤μ •μ„ λ³€κ²½ λ¶κ°€λ¥ν• μƒνƒλ΅ μ €μ¥ν•λ” μ¤λƒ…μƒ·μ…λ‹λ‹¤.

### 1λ‹¨κ³„: `$LATEST` λ²„μ „ μ‘μ„±

`lambda-version-demo`λΌλ” μƒ λλ‹¤ ν•¨μλ¥Ό μƒμ„±ν•©λ‹λ‹¤. ν•Έλ“¤λ¬ ν•¨μκ°€ "this is version one." λ¬Έμμ—΄μ„ λ°ν™ν•λ„λ΅ μ½”λ“λ¥Ό μ‘μ„±ν•κ³  λ°°ν¬ν•©λ‹λ‹¤.

```Python
def lambda_handler(event, context):
    return "this is version one."
```

### 2λ‹¨κ³„: λ²„μ „ 1 λ°ν–‰

μ½”λ“κ°€ μ¬λ°”λ¥΄κ² μ‘λ™ν•λ” κ²ƒμ„ ν™•μΈν• ν›„, **`Actions`** > **`Publish new version`**μ„ ν΄λ¦­ν•©λ‹λ‹¤. μ„¤λ…(Description)μ„ μ¶”κ°€ν•κ³  **`Publish`**ν•λ©΄, ν•¨μλ” `Version 1`λ΅ μ €μ¥λλ©°, μ΄ μ½”λ“λ” λ” μ΄μƒ μμ •ν•  μ μ—†μµλ‹λ‹¤.

### 3λ‹¨κ³„: `$LATEST` λ²„μ „ μμ • λ° λ²„μ „ 2 λ°ν–‰

ν•¨μμ `$LATEST` λ²„μ „μΌλ΅ λμ•„κ°€ μ½”λ“λ¥Ό "this is version two."λ΅ μμ •ν•κ³  λ°°ν¬ν•©λ‹λ‹¤. μ΄ κ³Όμ •μ„ λ°λ³µν•μ—¬ `Version 2`λ¥Ό λ°ν–‰ν•©λ‹λ‹¤.

## 2. λλ‹¤ λ³„μΉ­ μƒμ„±: μ μ—°ν• μ—”λ“ν¬μΈνΈ λ§λ“¤κΈ° π“

λ³„μΉ­μ€ νΉμ • λ²„μ „μ„ κ°€λ¦¬ν‚¤λ” ν¬μΈν„° μ—­ν• μ„ ν•λ©°, λ°°ν¬ κ΄€λ¦¬λ¥Ό μ μ—°ν•κ² ν•΄μ¤λ‹λ‹¤.

### 1λ‹¨κ³„: λ³„μΉ­ μƒμ„±

λλ‹¤ ν•¨μμ **`Aliases`** νƒ­μΌλ΅ μ΄λ™ν•μ—¬ λ‹¤μ λ³„μΉ­μ„ μƒμ„±ν•©λ‹λ‹¤.

- **`dev`**: **`$LATEST`** λ²„μ „μ„ κ°€λ¦¬ν‚¤λ„λ΅ μ„¤μ •ν•©λ‹λ‹¤. κ°λ° λ‹¨κ³„μ—μ„ ν•­μƒ μµμ‹  μ½”λ“λ¥Ό ν…μ¤νΈν•  λ• μ‚¬μ©ν•©λ‹λ‹¤.
    
- **`test`**: **`Version 2`**λ¥Ό κ°€λ¦¬ν‚¤λ„λ΅ μ„¤μ •ν•©λ‹λ‹¤. ν…μ¤νΈ ν™κ²½μ μ•μ •μ μΈ μ½”λ“λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤.
    
- **`prod`**: **`Version 1`**μ„ κ°€λ¦¬ν‚¤λ„λ΅ μ„¤μ •ν•©λ‹λ‹¤. ν„μ¬ μ΄μ ν™κ²½μ—μ„ μ‚¬μ©λλ” μ•μ •μ μΈ μ½”λ“λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤.

### 2λ‹¨κ³„: λ³„μΉ­ ν…μ¤νΈ

κ° λ³„μΉ­μ„ μ„ νƒν•κ³  ν•¨μλ¥Ό ν…μ¤νΈν•μ—¬ μ¬λ°”λ¥Έ λ²„μ „μ μ½”λ“κ°€ λ°ν™λλ”μ§€ ν™•μΈν•©λ‹λ‹¤.

- **`prod`** λ³„μΉ­ ν…μ¤νΈ: "this is version one." λ°ν™
    
- **`test`** λ³„μΉ­ ν…μ¤νΈ: "this is version two." λ°ν™
    

---

## 3. μΉ΄λ‚λ¦¬ λ°°ν¬(Canary Deployment) μ‹λ®¬λ μ΄μ… π€

λ³„μΉ­μ κ°€μ¥ κ°•λ ¥ν• κΈ°λ¥ μ¤‘ ν•λ‚λ” νΈλν”½μ„ μ—¬λ¬ λ²„μ „μΌλ΅ λ¶„μ‚°ν•μ—¬ μΉ΄λ‚λ¦¬ λ°°ν¬λ¥Ό μν–‰ν•λ” κ²ƒμ…λ‹λ‹¤.

### 1λ‹¨κ³„: κ°€μ¤‘μΉ(Weighted) λ³„μΉ­ μ„¤μ •

`prod` λ³„μΉ­μ„ νΈμ§‘ν•©λ‹λ‹¤. `Version 1`μ—μ„ `Version 2`λ΅ μ•μ „ν•κ² μ—…λ°μ΄νΈν•κΈ° μ„ν•΄ λ‹¤μκ³Ό κ°™μ΄ κ°€μ¤‘μΉλ¥Ό μ„¤μ •ν•©λ‹λ‹¤.

|λ²„μ „|κ°€μ¤‘μΉ|
|---|---|
|**Version 1**|50%|
|**Version 2**|50%|

### 2λ‹¨κ³„: λ¶„μ‚°λ νΈλν”½ ν™•μΈ

`prod` λ³„μΉ­μ„ λ°λ³µν•΄μ„ ν…μ¤νΈν•©λ‹λ‹¤. ν•¨μκ°€ 50%μ ν™•λ¥ λ΅ `Version 1`μ„, 50%μ ν™•λ¥ λ΅ `Version 2`λ¥Ό λ°ν™ν•λ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤. μ΄λ ‡κ² ν•λ©΄ μ†λ‰μ μ‹¤μ  νΈλν”½μ„ μƒλ΅μ΄ λ²„μ „μ— λ³΄λ‚΄ λ¬Έμ κ°€ μ—†λ”μ§€ κ²€μ¦ν•  μ μμµλ‹λ‹¤.

### 3λ‹¨κ³„: μ—…λ°μ΄νΈ μ™„λ£

μƒλ΅μ΄ λ²„μ „(`Version 2`)μ΄ μ•μ •μ μ΄λΌκ³  νλ‹¨λλ©΄, `prod` λ³„μΉ­μ„ λ‹¤μ‹ νΈμ§‘ν•μ—¬ νΈλν”½μ **100%**λ¥Ό `Version 2`λ΅ μ „ν™ν•©λ‹λ‹¤. μ΄λ ‡κ² ν•λ©΄ λ¨λ“  μ‚¬μ©μ νΈλν”½μ΄ μƒλ΅­κ³  μ•μ •μ μΈ λ²„μ „μΌλ΅ μ•μ „ν•κ² μ΄λ™ν•©λ‹λ‹¤.

μ΄ μ‹¤μµμ„ ν†µν•΄ λ²„μ „κ³Ό λ³„μΉ­μ„ μ‚¬μ©ν•μ—¬ λλ‹¤ ν•¨μμ λ°°ν¬λ¥Ό μ •κµν•κ² κ΄€λ¦¬ν•κ³ , μ„ν—μ„ μµμ†ν™”ν•λ©΄μ„ μƒλ΅μ΄ κΈ°λ¥μ„ μ¶μ‹ν•λ” λ°©λ²•μ„ μ΄ν•΄ν•  μ μμµλ‹λ‹¤.