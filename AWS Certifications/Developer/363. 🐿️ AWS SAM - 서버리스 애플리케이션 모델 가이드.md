
AWS SAM(Serverless Application Model)은 서버리스 애플리케이션을 개발하고 배포하기 위한 프레임워크입니다. 복잡한 AWS CloudFormation 템플릿을 간결하게 작성할 수 있도록 돕고, 서버리스 자원(Lambda, API Gateway, DynamoDB 등)의 로컬 테스트 및 배포를 쉽게 만들어줍니다.

---

## 🚀 1. SAM의 기본 원리

SAM은 AWS CloudFormation의 확장 프레임워크로 작동합니다. 개발자는 복잡한 CloudFormation 문법 대신 SAM의 간결한 YAML 템플릿을 사용하고, SAM CLI가 이 템플릿을 CloudFormation이 이해할 수 있는 완전한 형태로 변환해줍니다.

### **주요 특징**

- **간결한 템플릿:** `AWS::Serverless::Function`, `AWS::Serverless::Api`와 같은 SAM 고유의 리소스 타입을 사용하여 Lambda 함수, API Gateway, DynamoDB 테이블 등을 간단하게 정의할 수 있습니다.
    
- **CloudFormation 호환성:** 기존 CloudFormation의 모든 기능(outputs, mappings, parameters 등)을 SAM 템플릿 내에서 그대로 사용할 수 있습니다.
    
- **로컬 디버깅:** Lambda 함수, API Gateway 등을 로컬에서 실행하고 테스트할 수 있어 개발 속도를 높입니다.
    
- **자동 배포:** `sam deploy` 명령어로 애플리케이션을 패키징하고 S3에 업로드한 후 CloudFormation 스택을 실행하는 과정을 자동화합니다.

---

## 🛠️ 2. SAM 배포 워크플로우

![[Pasted image 20250909204620.png]]

SAM을 사용하여 서버리스 애플리케이션을 배포하는 일반적인 과정은 다음과 같습니다.

1. **코드 및 템플릿 작성:** 애플리케이션 코드와 `template.yaml` 파일을 작성합니다.
    
    - **템플릿 헤더:** `template.yaml` 파일의 상단에 `Transform: AWS::Serverless-2016-10-31`을 추가하여 SAM 템플릿임을 명시합니다.
        
2. **`sam build`:** 로컬에서 `sam build` 명령어를 실행하여 애플리케이션 코드를 패키징하고, SAM 템플릿을 CloudFormation 템플릿으로 변환합니다.
    
3. **`sam deploy`:** `sam deploy` 명령어를 실행하여 빌드된 애플리케이션을 AWS 클라우드에 배포합니다. 이 명령어는 다음 과정을 자동으로 수행합니다.
    
    - 코드와 변환된 템플릿을 S3 버킷에 업로드합니다.
        
    - CloudFormation 체인지셋(ChangeSet)을 실행하여 서버리스 자원을 생성하거나 업데이트합니다.

---

## ⚡ 3. SAM Accelerate: 빠른 배포 및 동기화

`SAM Accelerate`는 서버리스 애플리케이션의 배포 지연 시간을 최소화하여 개발자가 더 빠르게 코드를 테스트할 수 있도록 돕는 기능입니다.

### **`sam sync` 명령어**

- **`sam sync`:** `sam sync` 명령어는 애플리케이션 코드와 인프라 변경사항을 AWS 클라우드에 빠르게 동기화합니다.
    
- **코드만 동기화:** `--code` 옵션을 사용하면 인프라 구조(`template.yaml`) 변경 없이 순수 코드 변경사항만 업데이트합니다. 이 경우 CloudFormation을 우회하고 AWS 서비스 API를 직접 호출하여 **몇 초 내에 배포**를 완료합니다.
    
- **특정 리소스 동기화:** 특정 리소스(예: 특정 Lambda 함수)만 동기화하여 불필요한 업데이트를 방지할 수 있습니다.
    
- **`--watch` 옵션:** 이 옵션을 사용하면 백그라운드에서 파일 변경을 지속적으로 감지하고, 변경이 발생할 때마다 자동으로 동기화를 실행합니다.

|명령어|동작|설명|
|---|---|---|
|`sam sync`|코드 및 인프라 동기화|템플릿과 코드 변경사항을 모두 반영합니다.|
|`sam sync --code`|코드만 동기화|CloudFormation을 우회하고 API를 직접 호출하여 매우 빠르게 코드를 업데이트합니다.|
|`sam sync --watch`|파일 변경 감지 및 자동 동기화|백그라운드에서 실행되며, 파일 변경 시 자동으로 동기화합니다.|

`SAM Accelerate`는 특히 개발 단계에서 빈번한 코드 변경사항을 빠르게 클라우드에서 테스트해야 할 때 유용합니다.