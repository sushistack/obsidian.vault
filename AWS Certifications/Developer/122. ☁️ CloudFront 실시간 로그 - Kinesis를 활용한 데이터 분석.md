
CloudFront 실시간 로그는 CloudFront에 대한 요청 데이터를 거의 실시간으로 Kinesis Data Stream으로 전송하는 기능입니다. 이를 통해 콘텐츠 전송 성능을 분석하거나, 실시간으로 특정 이벤트에 대응하는 자동화된 워크플로우를 구축할 수 있습니다.

---

### 1. CloudFront 실시간 로그의 작동 방식 📈

CloudFront의 실시간 로그는 표준 로그와 다르게 S3 버킷에 저장되지 않고, **Kinesis Data Stream**으로 직접 전송됩니다. 이 방식을 통해 로그 데이터가 생성된 후 몇 초 내에 처리될 수 있습니다.

- **데이터 흐름:**
    
    1. 사용자의 요청이 CloudFront 엣지 로케이션에 수신됩니다.
    2. CloudFront는 설정된 규칙에 따라 요청 데이터를 Kinesis Data Stream으로 스트리밍합니다.
    3. Kinesis Data Stream은 이 데이터를 수집하고 저장합니다.
    4. 이후 **Lambda 함수**나 **Kinesis Data Firehose**와 같은 다른 AWS 서비스가 Kinesis Data Stream의 데이터를 처리합니다.

---

### 2. 실시간 로그의 주요 특징 및 활용

![[Pasted image 20250809235340.png]]

- **근실시간(Near Real-Time) 처리:** 로그가 생성된 후 몇 초 내에 Kinesis로 전송되므로, 실시간 모니터링, 알림, 즉각적인 분석에 적합합니다.
    
- **유연한 처리:**
    
    - **Lambda 함수:** Kinesis Data Stream에서 데이터를 직접 가져와 실시간으로 처리 로직을 실행할 수 있습니다. (예: 요청 데이터를 가공하여 동적 대시보드에 표시)

    - **Kinesis Data Firehose:** Kinesis Data Stream의 데이터를 가져와 배치(batch) 처리한 후, S3, Amazon OpenSearch Service, Redshift 등 다양한 목적지로 전송할 수 있습니다. 이는 대량의 로그를 장기적으로 저장하고 분석할 때 유용합니다.

- **세밀한 제어:** 실시간 로그를 설정할 때 다음과 같은 옵션을 통해 로그 데이터의 양과 종류를 제어할 수 있습니다.
    
    - **샘플링 속도(Sampling Rate):** 모든 요청을 기록하지 않고, 특정 비율(1~100%)의 요청만 로그로 전송하도록 설정할 수 있습니다. 이는 트래픽이 매우 많은 경우 비용을 절감하는 데 효과적입니다.

    - **필드 선택:** 로그에 포함될 특정 필드(예: IP 주소, HTTP 상태 코드)만 선택하여 필요한 데이터만 기록할 수 있습니다.

    - **캐시 동작(Cache Behavior) 지정:** 특정 URL 경로 패턴(`images/*`)에 해당하는 요청만 로그로 전송하도록 설정할 수 있습니다.

CloudFront 실시간 로그는 동적으로 변화하는 콘텐츠 전송 상황을 즉각적으로 파악하고, 이에 대응하는 자동화된 솔루션을 구축하는 데 필수적인 기능입니다.