
Amazon S3ì˜ ë³µì œ ê¸°ëŠ¥ì„ ì§ì ‘ ì‹¤ìŠµí•˜ë©° CRR(Cross-Region Replication)ì„ ì„¤ì •í•˜ê³ , ë³µì œê°€ ì–´ë–»ê²Œ ìž‘ë™í•˜ëŠ”ì§€ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.

### 1ë‹¨ê³„: ì›ë³¸ ë° ëŒ€ìƒ ë²„í‚· ìƒì„± ðŸžï¸

ë³µì œë¥¼ ì„¤ì •í•˜ë ¤ë©´ ìµœì†Œ ë‘ ê°œì˜ ë²„í‚·ì´ í•„ìš”í•©ë‹ˆë‹¤. í•˜ë‚˜ëŠ” ì›ë³¸ ë²„í‚·(Source Bucket)ì´ê³ , ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ëŒ€ìƒ ë²„í‚·(Target Bucket)ìž…ë‹ˆë‹¤.

1. **ì›ë³¸ ë²„í‚· ìƒì„±:**
    
    - ë²„í‚· ì´ë¦„: `s3-stephane-bucket-origin-v2`
    - ë¦¬ì „: `eu-west-1`
    - **ë²„ì „ ê´€ë¦¬(Versioning) í™œì„±í™”**

2. **ëŒ€ìƒ ë²„í‚· ìƒì„±:**
    
    - ë²„í‚· ì´ë¦„: `s3-stephane-bucket-replica-v2`
    - ë¦¬ì „: `us-east-1` (CRRì„ ìœ„í•´ ì›ë³¸ê³¼ ë‹¤ë¥¸ ë¦¬ì „ ì„ íƒ)
    - **ë²„ì „ ê´€ë¦¬(Versioning) í™œì„±í™”**

> **ì¤‘ìš”:** ë³µì œëŠ” ë°˜ë“œì‹œ **ë²„ì „ ê´€ë¦¬**ê°€ í™œì„±í™”ëœ ë²„í‚·ì—ì„œë§Œ ìž‘ë™í•©ë‹ˆë‹¤.

### 2ë‹¨ê³„: ë³µì œ ê·œì¹™ ìƒì„± ë° ì„¤ì • âš™ï¸

ì›ë³¸ ë²„í‚·ì—ì„œ ë³µì œ ê·œì¹™ì„ ë§Œë“¤ì–´ ëŒ€ìƒ ë²„í‚·ìœ¼ë¡œ ë°ì´í„°ê°€ ë³µì œë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

1. **ì›ë³¸ ë²„í‚·**(`s3-stephane-bucket-origin-v2`)ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
2. `ê´€ë¦¬(Management)` íƒ­ì„ í´ë¦­í•©ë‹ˆë‹¤.
3. `ë³µì œ ê·œì¹™(Replication rules)` ì„¹ì…˜ì—ì„œ `ë³µì œ ê·œì¹™ ìƒì„±(Create replication rule)`ì„ í´ë¦­í•©ë‹ˆë‹¤.
4. **ë³µì œ ê·œì¹™ ì„¤ì •:**
    
    - **ë³µì œ ê·œì¹™ ì´ë¦„:** `DemoReplicationRule`
    - **ìƒíƒœ:** `í™œì„±í™”(Enabled)`
    - **ì›ë³¸ ë²„í‚·:** í˜„ìž¬ ë²„í‚·ì„ ì„ íƒí•©ë‹ˆë‹¤.
    - **ê·œì¹™ ë²”ìœ„:** `ë²„í‚·ì˜ ëª¨ë“  ê°ì²´ì— ì ìš©(Apply to all objects in the bucket)`ì„ ì„ íƒí•©ë‹ˆë‹¤.
    - **ëŒ€ìƒ:** `ì´ ê³„ì •ì— ìžˆëŠ” ë²„í‚·(Bucket in this account)`ì„ ì„ íƒí•˜ê³ , **ëŒ€ìƒ ë²„í‚· ì´ë¦„**(`s3-stephane-bucket-replica-v2`)ì„ ìž…ë ¥í•©ë‹ˆë‹¤.
    - **IAM ì—­í• :** `ìƒˆ ì—­í•  ìƒì„±(Create new role)`ì„ ì„ íƒí•˜ì—¬ S3ê°€ ê°ì²´ë¥¼ ì½ê³  ì“°ëŠ” ê¶Œí•œì„ ìžë™ìœ¼ë¡œ ë¶€ì—¬í•˜ë„ë¡ í•©ë‹ˆë‹¤.

5. **ê¸°ì¡´ ê°ì²´ ë³µì œ ì—¬ë¶€:**
    
    - ê·œì¹™ì„ ìƒì„±í•  ë•Œ, `ê¸°ì¡´ ê°ì²´ë¥¼ ë³µì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?(Do you want to replicate existing objects?)`ë¼ëŠ” ë©”ì‹œì§€ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
    - ë³µì œ ê·œì¹™ì€ ìƒì„± ì‹œì  ì´í›„ì˜ **ìƒˆë¡œìš´ ê°ì²´**ë§Œ ë³µì œí•©ë‹ˆë‹¤. ì´ë¯¸ ì¡´ìž¬í•˜ëŠ” ê°ì²´ëŠ” ë³µì œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê¸°ì¡´ ê°ì²´ ë³µì œê°€ í•„ìš”í•˜ë‹¤ë©´ **S3 ë°°ì¹˜ ë³µì œ**ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
    - ì—¬ê¸°ì„œëŠ” `ì•„ë‹ˆìš”(No)`ë¥¼ ì„ íƒí•˜ê³  ê·œì¹™ì„ ì €ìž¥í•©ë‹ˆë‹¤.

### 3ë‹¨ê³„: ë³µì œ í™•ì¸í•˜ê¸° âœ…

ì´ì œ ì›ë³¸ ë²„í‚·ì— ìƒˆë¡œìš´ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ ë³µì œê°€ ì •ìƒì ìœ¼ë¡œ ìž‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

1. **ì›ë³¸ ë²„í‚·**(`s3-stephane-bucket-origin-v2`)ì— `coffee.jpg` íŒŒì¼ì„ ì—…ë¡œë“œí•©ë‹ˆë‹¤.
2. ëª‡ ì´ˆ í›„ì— **ëŒ€ìƒ ë²„í‚·**(`s3-stephane-bucket-replica-v2`)ì„ ìƒˆë¡œê³ ì¹¨í•˜ë©´ `coffee.jpg` íŒŒì¼ì´ ë³µì œë˜ì–´ ìžˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
3. ë‘ ë²„í‚·ì—ì„œ `ë²„ì „ í‘œì‹œ(Show versions)`ë¥¼ í™œì„±í™”í•˜ë©´, ì›ë³¸ê³¼ ëŒ€ìƒ ë²„í‚·ì˜ `coffee.jpg` íŒŒì¼ì´ **ë™ì¼í•œ ë²„ì „ ID**ë¥¼ ê°€ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

### 4ë‹¨ê³„: ì‚­ì œ ë§ˆì»¤ ë³µì œ ì„¤ì • ë° í™•ì¸ ðŸ—‘ï¸

ê°ì²´ ì‚­ì œ ì‹œ ì‚­ì œ ë§ˆì»¤ê°€ ë³µì œë˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

1. `ê´€ë¦¬(Management)` íƒ­ìœ¼ë¡œ ëŒì•„ê°€ì„œ ìƒì„±í•œ ë³µì œ ê·œì¹™ì„ `íŽ¸ì§‘(Edit)`í•©ë‹ˆë‹¤.
2. `ì‚­ì œ ë§ˆì»¤ ë³µì œ(Delete marker replication)` ì˜µì…˜ì„ **í™œì„±í™”(Enable)**í•˜ê³  ì €ìž¥í•©ë‹ˆë‹¤.
3. **ì›ë³¸ ë²„í‚·**ì—ì„œ `coffee.jpg` íŒŒì¼ì„ **ì‚­ì œ**í•©ë‹ˆë‹¤. (ë²„ì „ ê´€ë¦¬ í™œì„±í™” ìƒíƒœì—ì„œëŠ” ì‚­ì œ ë§ˆì»¤ê°€ ìƒì„±ë©ë‹ˆë‹¤.)
4. ëª‡ ì´ˆ í›„ **ëŒ€ìƒ ë²„í‚·**ì„ í™•ì¸í•˜ë©´, `coffee.jpg`ì˜ **ì‚­ì œ ë§ˆì»¤**ê°€ ë³µì œë˜ì–´ ê°ì²´ ëª©ë¡ì—ì„œ ë³´ì´ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.

> **ì£¼ì˜:** ë²„ì „ IDë¥¼ ëª…ì‹œí•˜ì—¬ ê°ì²´ë¥¼ ì˜êµ¬ ì‚­ì œ(Permanent Delete)í•˜ëŠ” ê²½ìš°, ì´ ìž‘ì—…ì€ ë³µì œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŠ” ì•…ì˜ì ì¸ ì˜êµ¬ ì‚­ì œê°€ ë‹¤ë¥¸ ë²„í‚·ìœ¼ë¡œ ì „íŒŒë˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•¨ìž…ë‹ˆë‹¤.
> 