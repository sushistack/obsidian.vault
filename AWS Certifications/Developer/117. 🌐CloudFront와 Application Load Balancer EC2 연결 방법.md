
CloudFront를 사용하여 Application Load Balancer(ALB) 또는 EC2 인스턴스를 오리진(Origin)으로 연결하는 방법에는 두 가지가 있습니다. 최신 방식은 **VPC 오리진(VPC Origins)**을 사용하는 것이며, 이전 방식은 퍼블릭 네트워크를 이용하는 것이었습니다.

---

### 1. 최신 방식: VPC 오리진 (VPC Origins) 🚀

![[Pasted image 20250809233812.png]]

이 방식은 가장 안전하고 권장되는 방법입니다. CloudFront와 VPC 내의 프라이빗 리소스를 직접 연결합니다.

- **작동 원리:**
    
    1. **CloudFront 배포 생성:** 사용자의 요청은 전 세계의 CloudFront 엣지 로케이션에 도달합니다.

    2. **VPC 오리진 설정:** CloudFront 배포의 오리진을 설정할 때, ALB, NLB(Network Load Balancer) 또는 EC2 인스턴스를 오리진으로 지정하고, 해당 리소스가 속한 VPC를 연결합니다.

    3. **프라이빗 연결:** CloudFront는 **VPC 오리진**을 통해 인터넷을 거치지 않고 VPC 내의 프라이빗 서브넷에 있는 오리진 리소스(ALB, EC2 등)로 직접 트래픽을 전달합니다.

- **장점:**
    
    - **강력한 보안:** 애플리케이션 리소스가 인터넷에 노출되지 않으므로 보안성이 매우 높습니다.

    - **단순한 설정:** CloudFront가 VPC와의 연결을 관리하므로, 개발자가 IP 주소를 관리하거나 보안 그룹 규칙을 복잡하게 설정할 필요가 없습니다.


---

### 2. 이전 방식: 퍼블릭 네트워크 연결 (Public Network) 🚧

![[Pasted image 20250809233846.png]]

VPC 오리진 기능이 도입되기 전에는 오리진 리소스를 퍼블릭하게 노출해야 했습니다.

- **작동 원리:**
    
    1. **퍼블릭 리소스:** 오리진(ALB 또는 EC2)을 퍼블릭 서브넷에 배치하고 퍼블릭 IP를 할당해야 합니다.

    2. **IP 주소 기반 보안:** CloudFront 엣지 로케이션의 IP 주소 목록을 확보합니다. 이 IP 주소는 수시로 변경되거나 추가될 수 있습니다.

    3. **보안 그룹 설정:** 오리진 리소스(ALB 또는 EC2)의 보안 그룹에서 CloudFront의 모든 IP 주소로부터의 인바운드 트래픽을 허용하도록 규칙을 설정해야 합니다.

- **문제점:**
    
    - **보안 위험:** 오리진이 퍼블릭 IP를 가지므로, 보안 그룹 설정에 오류가 있거나 IP 목록이 최신 상태가 아니면 악의적인 접근에 노출될 수 있습니다.

    - **관리 복잡성:** CloudFront의 IP 주소 목록을 주기적으로 업데이트해야 하는 관리 부담이 있습니다.

|구분|VPC 오리진 (권장)|퍼블릭 오리진 (이전 방식)|
|---|---|---|
|**연결 방식**|CloudFront와 VPC 간 프라이빗 연결|CloudFront와 오리진 간 퍼블릭 인터넷 연결|
|**오리진 노출 여부**|프라이빗 서브넷에 위치 (인터넷 노출 없음)|퍼블릭 서브넷에 위치 (인터넷에 노출됨)|
|**보안성**|매우 높음|상대적으로 낮음 (IP 기반으로만 제어)|
|**설정 복잡성**|간단함 (자동으로 연결 관리)|복잡함 (CloudFront IP 목록 수동 관리)|