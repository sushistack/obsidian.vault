
**파라미터**는 CloudFormation 템플릿에 동적인 입력 값을 제공하는 기능입니다. 이를 통해 템플릿을 여러 환경이나 사용자에게 재사용할 수 있으며, 입력 값을 미리 결정할 수 없는 상황에서 유용합니다. 파라미터를 사용하면 템플릿을 변경하지 않고도 설정 값을 업데이트할 수 있습니다.

파라미터는 다음의 경우에 사용해야 합니다.

- **리소스 구성이 향후 변경될 가능성이 있는 경우.**
- **입력 값이 미리 결정될 수 없는 경우.**

---

### 📝 파라미터 설정 및 검증

CloudFormation 파라미터는 다양한 설정으로 입력 값을 제어하고 유효성을 검사할 수 있습니다. 이를 통해 템플릿의 안정성을 높입니다.

|설정 항목|설명|예시|
|---|---|---|
|**Type**|파라미터 값의 데이터 타입을 정의합니다. `String`, `Number`, `CommaDelimitedList` 등이 있습니다. **`AWS-Specific Parameter`**를 사용하면 `AWS::EC2::Instance::Id`와 같이 AWS 리소스의 특정 유형에 맞는 유효성 검사를 자동으로 수행할 수 있습니다.|`Type: AWS::EC2::InstanceType`|
|**Description**|파라미터에 대한 사용자 친화적인 설명을 제공합니다.|`Description: The desired EC2 instance type.`|
|**Default**|파라미터에 대한 기본 값을 설정합니다. 사용자가 값을 입력하지 않으면 이 값이 사용됩니다.|`Default: t2.micro`|
|**AllowedValues**|파라미터가 허용하는 특정 값 목록을 정의합니다. 콘솔에서 드롭다운 메뉴로 제공되어 사용자가 정해진 값만 선택하도록 강제합니다.|`AllowedValues: [t2.micro, t2.small, t2.medium]`|
|**AllowedPattern**|정규식을 사용하여 입력 값의 형식을 제한합니다.|`AllowedPattern: "[a-zA-Z0-9]*"`|
|**NoEcho**|`true`로 설정하면 콘솔, 이벤트 로그 등에서 파라미터 값이 숨겨져 민감한 정보(예: 비밀번호)를 보호합니다.|`NoEcho: true`|
|**Min/MaxLength, Min/MaxValue**|문자열 길이 또는 숫자 값의 범위를 제한합니다.|`MinLength: 8`|

---

### 🔗 파라미터 및 리소스 참조: `!Ref` 함수

**`!Ref`** 함수는 CloudFormation 템플릿에서 파라미터나 다른 리소스를 참조하는 데 사용됩니다. YAML에서 `Fn::Ref`의 축약형으로 사용됩니다.

#### 1. 파라미터 참조

`!Ref`는 파라미터의 이름(논리적 ID)을 사용하여 템플릿의 다른 위치에서 그 값을 불러옵니다.

- **예시**:

```YAML
Parameters:
  SecurityGroupDescription:
	Type: String

# ... 다른 리소스 ...

Resources:
  MyServerSecurityGroup:
	Type: AWS::EC2::SecurityGroup
	Properties:
	  GroupDescription: !Ref SecurityGroupDescription  # 파라미터 참조
```
    
    이 예시에서 `MyServerSecurityGroup`의 `GroupDescription`은 `SecurityGroupDescription`이라는 파라미터에 입력된 값으로 설정됩니다.


#### 2. 리소스 참조

`!Ref`는 또한 템플릿 내의 다른 리소스(논리적 ID)를 참조할 때 사용됩니다. 이 경우 `!Ref`는 해당 리소스의 **물리적 ID**(예: 인스턴스 ID, 보안 그룹 ID)를 반환합니다.

- **예시**:

```YAML
Resources:
  MyInstance:
	Type: AWS::EC2::Instance
	Properties:
	  SecurityGroups:
		- !Ref SSHSecurityGroup   # 리소스 참조
		- !Ref ServerSecurityGroup
```
    
    이 예시에서 `MyInstance`의 `SecurityGroups` 속성은 `SSHSecurityGroup`과 `ServerSecurityGroup`이라는 이름으로 정의된 보안 그룹 리소스의 물리적 ID를 참조합니다.

---

### 💎 가상 파라미터 (Pseudo Parameters)

**가상 파라미터(Pseudo Parameters)**는 AWS가 모든 CloudFormation 템플릿에 기본적으로 제공하는 내장 변수입니다. 사용자가 별도로 정의하지 않아도 `!Ref` 함수를 사용하여 접근할 수 있습니다.

|가상 파라미터|반환 값|
|---|---|
|`AWS::AccountId`|현재 AWS 계정 ID|
|`AWS::Region`|스택이 배포된 리전 (예: `us-east-1`)|
|`AWS::StackId`|현재 CloudFormation 스택의 고유 ID|
|`AWS::StackName`|현재 CloudFormation 스택의 이름|
|`AWS::NoValue`|속성 값이 없음을 나타냅니다.|

이러한 가상 파라미터는 사용자가 계정 ID나 리전 정보를 수동으로 입력할 필요 없이 템플릿이 자동으로 환경 정보를 가져와서 동적인 작업을 수행할 수 있게 해줍니다.