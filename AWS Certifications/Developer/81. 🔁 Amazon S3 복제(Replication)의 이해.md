
Amazon S3 복제(Replication)는 S3 버킷에 저장된 객체를 다른 버킷에 자동으로 비동기적으로 복사하는 기능입니다. 이 기능은 재해 복구, 데이터 규정 준수, 또는 데이터 접근 지연 시간(Latency) 최소화 등 다양한 상황에서 매우 유용하게 사용됩니다. S3 복제에는 크게 두 가지 종류가 있습니다.

---

### CRR (Cross-Region Replication) 🌍

CRR은 한 AWS 리전의 S3 버킷에 있는 데이터를 다른 AWS 리전의 S3 버킷으로 복제하는 기능입니다.

- **설정 조건:**
    
    - 원본(Source) 버킷과 대상(Destination) 버킷 모두 **버전 관리(Versioning)**가 활성화되어 있어야 합니다.
    - 원본 버킷과 대상 버킷이 반드시 **다른 리전**에 있어야 합니다.
    - 두 버킷이 다른 AWS 계정에 속해 있어도 설정이 가능합니다.

- **작동 방식:**
    
    - 복제는 **비동기적**으로 백그라운드에서 진행됩니다.
    - S3 서비스가 원본 버킷에서 객체를 읽어 대상 버킷에 쓰는 데 필요한 **적절한 IAM 권한**이 부여되어야 합니다.

- **주요 사용 사례:**
    
    - **규정 준수:** 데이터가 특정 지리적 위치에 저장되어야 하는 규정을 충족하기 위해 사용됩니다.
    - **재해 복구:** 한 리전에 장애가 발생해도 다른 리전에 복제된 데이터를 이용해 비즈니스 연속성을 확보할 수 있습니다.
    - **지연 시간 최소화:** 사용자에게 더 가까운 리전에 데이터를 복제하여 데이터 접근 속도를 높일 수 있습니다.

---

### SRR (Same-Region Replication) 🏛️

SRR은 CRR과 달리 동일한 AWS 리전 내의 S3 버킷 간에 데이터를 복제하는 기능입니다.

- **설정 조건:**
    
    - 원본 버킷과 대상 버킷 모두 **버전 관리(Versioning)**가 활성화되어 있어야 합니다.
    - 원본 버킷과 대상 버킷이 반드시 **동일한 리전**에 있어야 합니다.
    - 두 버킷이 다른 AWS 계정에 속해 있어도 설정이 가능합니다.

- **주요 사용 사례:**
    
    - **로그 통합:** 여러 버킷에 흩어져 있는 로그 데이터를 하나의 중앙 집중식 버킷으로 모을 때 유용합니다.
    - **개발/테스트 환경:** 프로덕션 계정의 데이터를 개발/테스트 계정으로 복제하여 실제 데이터로 테스트 환경을 구성할 수 있습니다.


### 복제 설정 요약

|구분|CRR (Cross-Region Replication)|SRR (Same-Region Replication)|
|---|---|---|
|**복제 대상**|다른 AWS 리전의 버킷|동일 AWS 리전의 버킷|
|**주요 목적**|재해 복구, 규정 준수, 지연 시간 최소화|로그 통합, 개발/테스트 환경 구축|
|**필수 조건**|원본/대상 버킷의 버전 관리 활성화|원본/대상 버킷의 버전 관리 활성화|


### 1. 복제 규칙 적용 시점 ⏳

**복제 규칙을 설정한 이후에 업로드되는 새로운 객체만 복제됩니다.** 기존에 이미 버킷에 존재하던 객체는 자동으로 복제되지 않습니다.

- **기존 객체 복제:** 기존 객체를 복제하려면 **S3 배치 복제(S3 Batch Replication)** 기능을 사용해야 합니다. 이 기능을 활용하면 복제에 실패한 객체나 이미 존재하는 객체를 한 번에 복제할 수 있습니다.
    

---

### 2. 삭제 작업 복제 🗑️

S3 복제는 객체 삭제 작업에 대해서도 복제 규칙을 적용할 수 있습니다.

- **삭제 마커 복제:** 선택 사항으로, 원본 버킷에 **삭제 마커(Delete Marker)**가 추가될 때 이 마커를 대상 버킷에도 복제할 수 있습니다. 이를 활성화하면, 원본 버킷에서 `DELETE` 명령을 실행했을 때 대상 버킷에서도 해당 객체가 보이지 않게 됩니다.
    
- **영구 삭제는 복제되지 않음:** 버전 ID를 지정하여 객체를 영구 삭제하는 경우, 이 삭제 작업은 복제되지 않습니다. 이는 의도치 않은 영구 삭제가 다른 버킷으로 전파되는 것을 방지하기 위함입니다.
    

### 3. 복제 체이닝(Chaining) 불가 🔗

S3 복제는 **연쇄적으로 작동하지 않습니다.**

- `버킷1` -> `버킷2`로 복제가 설정되어 있고, 다시 `버킷2` -> `버킷3`으로 복제가 설정되어 있다고 가정해 보겠습니다.
- 이때 `버킷1`에 업로드된 객체는 `버킷2`로 복제되지만, **`버킷3`에는 복제되지 않습니다.** `버킷2`에 직접 업로드된 객체만 `버킷3`으로 복제됩니다.
