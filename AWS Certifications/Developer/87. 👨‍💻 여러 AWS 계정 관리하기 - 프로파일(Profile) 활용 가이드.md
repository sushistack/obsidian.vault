
하나의 개발 환경에서 여러 AWS 계정(예: 개인 계정, 회사 계정, 테스트 계정 등)을 관리하는 것은 매우 흔한 일입니다. `AWS CLI`는 **프로파일(Profile)** 기능을 통해 이 작업을 간단하고 안전하게 수행할 수 있도록 지원합니다.

---

### 1. 기본 프로파일과 여러 AWS 계정의 문제점

`AWS CLI`를 처음 설정할 때 `aws configure` 명령어를 사용하면 **기본(default)** 프로파일이 생성됩니다. 이 프로파일은 `~/.aws/credentials` 파일에 접근 키 ID와 시크릿 접근 키를 저장하여 하나의 AWS 계정에 연결합니다.

- **`~/.aws/credentials` 파일 예시:**

```TOML
[default]
aws_access_key_id = <기본 계정의 ACCESS_KEY>
aws_secret_access_key = <기본 계정의 SECRET_KEY>
```

하지만 여러 계정을 사용하려면 다른 계정의 자격 증명을 관리할 새로운 방법이 필요합니다.

---

### 2. AWS CLI 프로파일 생성하기

`aws configure` 명령어에 `--profile` 옵션을 추가하면 새로운 프로파일을 생성하고 설정할 수 있습니다.

**명령어 형식:**

```Bash
aws configure --profile <프로파일_이름>
```

**실습 예시:**

```Bash
aws configure --profile my-other-aws-account
```

위 명령어를 실행하면, CLI가 새로운 계정의 자격 증명과 리전 정보를 입력하라는 메시지를 표시합니다.

- `AWS Access Key ID`: 다른 계정의 접근 키 ID를 입력합니다.
- `AWS Secret Access Key`: 다른 계정의 시크릿 접근 키를 입력합니다.
- `Default region name`: 원하는 리전(예: `us-west-2`)을 입력합니다.

---
### 3. 프로파일 설정 파일 확인하기

새로운 프로파일을 설정하면 `~/.aws` 디렉터리의 두 파일에 변경 사항이 반영됩니다.
- **`~/.aws/credentials` 파일:** 새로운 프로파일 이름과 해당 계정의 자격 증명이 추가됩니다.
 
```TOML
[default]
aws_access_key_id = <기본 계정의 ACCESS_KEY>
aws_secret_access_key = <기본 계정의 SECRET_KEY>

[my-other-aws-account]
aws_access_key_id = <다른 계정의 ACCESS_KEY>
aws_secret_access_key = <다른 계정의 SECRET_KEY>
```

- **`~/.aws/config` 파일:** 새로운 프로파일의 리전 정보가 추가됩니다.

```TOML
[profile my-other-aws-account]
region = us-west-2
```

---
### 4. 프로파일을 사용하여 AWS 명령어 실행하기

`AWS CLI` 명령어를 실행할 때, `--profile` 옵션을 추가하여 어떤 계정의 자격 증명을 사용할지 지정할 수 있습니다.

- **기본 프로파일 사용 (옵션 생략):**

```Bash
# 기본 계정의 S3 버킷 목록을 조회
aws s3 ls
```

- **새 프로파일 사용 (옵션 추가):**

```Bash
# 'my-other-aws-account' 프로파일의 S3 버킷 목록을 조회
aws s3 ls --profile my-other-aws-account
```

이처럼 `--profile` 옵션은 모든 AWS CLI 명령어에 적용할 수 있습니다. 이 방법을 사용하면 여러 계정의 자격 증명을 안전하게 관리하고, 명령어를 실행할 때마다 올바른 계정을 선택할 수 있습니다.

> **Tip:** 이 기능은 AWS 자격증 시험에 직접적으로 나오지 않을 수 있지만, 실제 개발 환경에서는 반드시 알아야 하는 필수적인 지식입니다.
> 