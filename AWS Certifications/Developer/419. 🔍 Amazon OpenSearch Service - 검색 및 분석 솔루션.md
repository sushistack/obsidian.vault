

Amazon OpenSearch Service는 이전의 **Amazon Elasticsearch Service**의 후속 서비스로, 검색 및 로그 분석, 데이터 시각화 등에 사용되는 분산형 검색 및 분석 엔진입니다. 기존 데이터베이스와 달리, 모든 필드에 대한 **자유로운 전문(Full-text) 검색**과 **부분 일치(Partial match)** 검색을 제공하여 애플리케이션의 검색 기능을 보완하는 데 주로 사용됩니다.

---

## 1. ⚙️ OpenSearch의 주요 특징

- **다양한 사용 사례**: 검색 기능 외에도 로그 분석, 실시간 애플리케이션 모니터링, 클릭스트림 분석 등 다양한 분석 작업에 활용됩니다.
    
- **두 가지 프로비저닝 모드**:
    
    - **관리형 클러스터(Managed Cluster)**: 사용자가 직접 EC2 인스턴스를 프로비저닝하고 관리합니다.
        
    - **서버리스(Serverless)**: AWS가 클러스터의 확장, 운영, 유지보수 등을 모두 관리합니다.
        
- **쿼리 언어**: 자체 쿼리 언어를 사용하며, SQL 호환성 플러그인을 통해 SQL 쿼리도 지원합니다.
    
- **데이터 시각화**: **OpenSearch Dashboards**를 사용하여 OpenSearch에 저장된 데이터를 시각화하고 대시보드를 구축할 수 있습니다.
    
- **보안**: Cognito 및 IAM과의 통합을 통해 접근 제어가 가능하며, 저장 중(at-rest) 및 전송 중(in-flight) 암호화를 모두 지원합니다.
    

---

## 2. 🚀 OpenSearch의 일반적인 아키텍처 패턴

OpenSearch는 주로 다른 AWS 서비스와 연동하여 사용됩니다. 다음은 몇 가지 일반적인 데이터 수집(ingestion) 패턴입니다.



### 패턴 1: 데이터베이스 보조 검색 기능

![[Pasted image 20250914193806.png]]

- **데이터 원본**: **DynamoDB**
- **동작 방식**:
    1. 사용자가 DynamoDB 테이블에 데이터를 삽입/업데이트/삭제합니다.
    2. **DynamoDB Streams**가 변경 사항을 실시간으로 캡처합니다.
    3. **Lambda 함수**가 DynamoDB Streams의 이벤트를 읽어와 OpenSearch에 데이터를 실시간으로 동기화합니다.

- **활용**: 애플리케이션은 OpenSearch에서 부분 일치 검색으로 아이템 ID를 찾고, 찾은 ID를 기반으로 DynamoDB에서 전체 데이터를 조회합니다.
    

### 패턴 2: 로그 및 지표 분석

![[Pasted image 20250914193845.png]]

- **데이터 원본**: **CloudWatch Logs**
- **동작 방식**:
    1. **CloudWatch Logs Subscription Filters**를 사용하여 로그 데이터를 필터링합니다.
    2. **Lambda 함수** 또는 **Kinesis Data Firehose**를 통해 필터링된 데이터를 OpenSearch로 전송합니다.
        - **Lambda**: 실시간(real-time) 데이터 처리가 필요한 경우에 적합합니다.
        - **Kinesis Data Firehose**: 거의 실시간(near real-time) 데이터 전송을 위해 사용되며, 중간에 Lambda 함수를 사용하여 데이터 변환을 수행할 수 있습니다.
- **활용**: OpenSearch에서 로그 데이터에 대한 분석 쿼리를 수행하고, OpenSearch Dashboards로 시각화합니다.

### 패턴 3: 스트리밍 데이터 처리

![[Pasted image 20250914193901.png]]

- **데이터 원본**: **Kinesis Data Streams**
- **동작 방식**:
    
    1. **Kinesis Data Firehose**: Kinesis Data Streams의 데이터를 읽어 OpenSearch로 전송합니다. 이 방식은 간단하며, 데이터 전송 파이프라인을 구축하는 데 유용합니다.

    2. **Lambda 함수**: Kinesis Data Streams의 데이터를 읽어와 사용자 정의 로직(예: 데이터 정제)을 수행한 후 OpenSearch로 전송합니다.

---

## 3. 🎯 결론

Amazon OpenSearch Service는 유연하고 강력한 검색 및 분석 기능을 제공하는 서비스입니다. **부분 검색**이나 **전문 검색**이 필요한 애플리케이션의 보조 솔루션으로 적합하며, **CloudWatch Logs**나 **Kinesis Streams**와 연동하여 로그 분석이나 실시간 데이터 분석 플랫폼을 구축하는 데 널리 사용됩니다.