
람다 함수의 권한은 크게 두 가지 방식으로 관리됩니다. 하나는 람다 함수가 **외부 서비스를 호출**할 때 필요한 **실행 역할(Execution Role)**이고, 다른 하나는 **외부 서비스가 람다 함수를 호출**할 때 필요한 **리소스 기반 정책(Resource-based Policy)**입니다. 이 두 가지 권한은 람다 함수의 상호작용 방향에 따라 다르게 적용됩니다.

---

## 1. 실행 역할(Execution Role)

**실행 역할**은 람다 함수가 실행되는 동안 **다른 AWS 서비스에 대한 권한**을 부여하는 IAM 역할입니다. 람다 함수가 SQS 큐에서 메시지를 읽거나, DynamoDB 테이블에 데이터를 쓰는 등 **능동적으로 다른 서비스를 이용**해야 할 때 사용됩니다.

- **`AWSLambdaBasicExecutionRole`**: 모든 람다 함수에 기본적으로 필요한 역할입니다. 이 역할을 통해 함수는 CloudWatch Logs에 로그를 기록할 수 있습니다.
    
- **이벤트 소스 매핑(Event Source Mapping)**: SQS, Kinesis, DynamoDB Streams 등에서 데이터를 읽어 람다 함수를 트리거하는 경우, 람다 서비스 자체가 데이터를 읽는 주체이므로, 람다 함수의 실행 역할에 해당 서비스의 읽기 권한이 반드시 포함되어야 합니다. 예를 들어, SQS 큐에서 메시지를 읽는 람다 함수의 실행 역할에는 `sqs:ReceiveMessage`, `sqs:DeleteMessage` 등의 권한이 필요합니다.

---

## 2. 리소스 기반 정책(Resource-based Policy)

**리소스 기반 정책**은 특정 서비스나 계정이 **람다 함수를 호출(Invoke)**할 수 있도록 허용하는 정책입니다. 이 정책은 람다 함수 자체에 연결되며, **외부에서 함수로 들어오는 접근**을 제어합니다.

- **S3 버킷 이벤트**: S3 버킷에 객체가 생성될 때 람다 함수를 트리거하는 경우, S3 서비스가 람다 함수를 호출하는 주체가 됩니다. 이 경우, 람다 함수의 리소스 기반 정책에 `s3.amazonaws.com` 서비스가 해당 함수를 호출할 수 있다는 권한이 명시됩니다.
    
- **EventBridge 규칙**: EventBridge 규칙이 특정 시간에 람다 함수를 호출하는 경우, `events.amazonaws.com` 서비스가 함수를 호출할 수 있도록 리소스 기반 정책이 설정됩니다.

자동 생성:

AWS 콘솔을 통해 S3, EventBridge 등의 트리거를 설정하면, 람다 함수가 정상적으로 호출될 수 있도록 필요한 리소스 기반 정책이 자동으로 추가됩니다. 이를 통해 사용자는 직접 IAM 정책을 작성할 필요 없이 서비스 간 연동을 쉽게 구성할 수 있습니다.

### 핵심 차이점 요약

|구분|실행 역할(Execution Role)|리소스 기반 정책(Resource-based Policy)|
|---|---|---|
|**적용 주체**|**람다 함수**|**다른 AWS 서비스/계정**|
|**작동 방향**|**함수 → 외부 서비스** (함수가 다른 서비스에 접근)|**외부 서비스 → 함수** (외부 서비스가 함수를 호출)|
|**사용 예시**|람다가 SQS 메시지를 **읽을 때**, DynamoDB에 **쓸 때**|S3가 람다를 **호출할 때**, API Gateway가 람다를 **트리거할 때**|