## 소개: CloudWatch 에이전트의 역할

기본적으로 AWS EC2 인스턴스는 CloudWatch로 로그를 보내지 않습니다. EC2 인스턴스, 온프레미스 서버와 같은 가상 서버에서 로그와 시스템 지표를 수집하려면 **CloudWatch 에이전트**를 설치해야 합니다. 이 에이전트는 서버에서 실행되는 작은 프로그램으로, 사용자가 지정한 로그 파일이나 시스템 지표를 수집하여 CloudWatch로 푸시(push)합니다.

💡 **중요**: 에이전트가 CloudWatch에 데이터를 전송하려면, 해당 EC2 인스턴스에 CloudWatch Logs에 로그를 보낼 수 있는 권한을 가진 **IAM 역할**이 부여되어야 합니다.

---

## 🆚 CloudWatch 에이전트의 종류

CloudWatch 에이전트는 두 가지 버전이 있습니다.

|구분|CloudWatch Logs Agent (구 버전)|CloudWatch Unified Agent (신 버전)|
|---|---|---|
|**기능**|로그만 수집하여 CloudWatch Logs로 전송|로그 및 시스템 지표(metrics) 모두 수집|
|**수집 대상**|가상 서버의 로그 파일|가상 서버의 로그 파일 및 시스템 지표|
|**지표 수집**|불가능|CPU, RAM, 디스크, 네트워크, 프로세스, 스왑 등 상세 지표 수집 가능|
|**설정 관리**|로컬 설정 파일|**SSM 파라미터 스토어**를 통한 중앙 집중식 설정 관리 가능|
|**권장 여부**|구 버전이므로 사용 비권장|**신 버전이며, 로그와 지표를 모두 수집 가능하여 강력히 권장**|

---

## 📈 CloudWatch Unified Agent의 상세 지표 수집 기능

CloudWatch Unified Agent는 기존 CloudWatch Logs Agent와 달리, 로그뿐만 아니라 서버의 상태를 보다 세밀하게 파악할 수 있는 다양한 시스템 지표를 수집합니다. 이는 EC2 기본 모니터링으로는 얻을 수 없는 추가적인 정보를 제공합니다.

|지표 범주|수집 가능한 상세 지표|
|---|---|
|**CPU**|`active`, `guest`, `idle`, `system`, `user`, `steal` 등|
|**RAM**|`free`, `inactive`, `used`, `total`, `cached` 등|
|**디스크**|`free`, `used`, `total` 등|
|**디스크 IO**|`writes`, `reads`, `bytes`, `iops` 등|
|**네트워크**|`TCP/UDP connections`, `packets`, `bytes` 등|
|**프로세스**|`dead`, `blocked`, `running`, `sleeping` 등|
|**스왑 메모리**|`free`, `used`, `used_percent` 등|

EC2의 기본 모니터링은 CPU 사용률, 디스크, 네트워크와 같은 일부 지표만 제공합니다. 반면, Unified Agent를 설치하면 **RAM(메모리), 스왑 공간, 프로세스**와 같이 더욱 상세하고 다양한 지표를 확인할 수 있어, 애플리케이션 성능 병목 현상을 정확하게 파악하는 데 큰 도움이 됩니다.

## 🏢 온프레미스 서버에서도 사용 가능

CloudWatch 에이전트의 또 다른 장점은 AWS 클라우드 환경뿐만 아니라 **온프레미스(On-Premises) 서버**에도 설치하여 사용할 수 있다는 점입니다. 이를 통해 하이브리드 클라우드 환경에서 온프레미스 서버의 로그 및 지표를 AWS CloudWatch로 통합하여 중앙 집중식으로 모니터링할 수 있습니다. 이는 기존 인프라와 AWS 환경을 동시에 관리해야 하는 기업에게 매우 유용합니다.