
Amazon ElastiCache는 Redis 및 Memcached를 지원하는 완전 관리형 인메모리 캐싱 서비스입니다. 이 가이드에서는 Redis 캐시를 직접 구성하고 생성하는 과정을 자세히 살펴보겠습니다. 이 실습은 비용이 발생할 수 있으니 주의 깊게 따라오세요.

---

### 1. ElastiCache Redis 캐시 생성 시작 🌟

ElastiCache Redis 캐시를 생성하는 과정은 여러 옵션을 포함합니다. 실습을 통해 모든 옵션을 자세히 살펴보겠습니다.

#### 1.1 캐시 엔진 선택 및 생성 방식

- **ElastiCache 대시보드 접근**: AWS Management Console에서 **ElastiCache** 서비스로 이동합니다.
- **Redis 캐시 생성 클릭**: **Redis 캐시 생성(Create Redis cache)** 버튼을 클릭합니다.
    - (참고: Memcached도 옵션으로 선택할 수 있습니다.)
- **생성 방식 선택**:
    - **Serverless (서버리스)**: 애플리케이션 트래픽에 맞춰 캐시가 자동으로 스케일링되며 서버 관리가 필요 없습니다. 관리 용이성이 높지만 비용이 더 비쌉니다.
    - **Design your own cache (직접 캐시 설계)**: 캐시 아키텍처를 직접 구성하여 AWS에서의 캐시 작동 방식을 이해하는 데 유리합니다.
    - **선택**: 이 실습에서는 **Design your own cache**를 선택합니다.

#### 1.2 구성 방법 및 클러스터 모드 선택

- **구성 방법(Configuration method)**:
    - **Restore from backup (백업에서 복원)**: 기존 백업에서 캐시를 복원합니다.
    - **Easy Create (쉬운 생성)**: 프로덕션, 개발/테스트, 데모 등 권장되는 모범 사례 구성을 사용합니다.
    - **Configure everything (모든 것 구성)**: 모든 옵션을 수동으로 설정합니다.
    - **선택**: 모든 옵션을 살펴보기 위해 **Configure everything**을 선택합니다.

- **클러스터 모드(Cluster mode)**:
    - **클러스터 모드 비활성화(Disabled)**: 단일 샤드(shard)를 사용하며, 하나의 프라이머리 노드와 최대 5개의 읽기 복제본을 가질 수 있습니다.
    - **클러스터 모드 활성화(Enabled)**: 여러 샤드를 사용하며, 각 샤드에 여러 서버가 분산되어 데이터를 파티셔닝합니다. 대규모 데이터셋 및 높은 처리량에 적합합니다.
    - **선택**: 이 실습에서는 **Disabled**를 선택합니다.

#### 1.3 클러스터 설정 및 노드 유형

- **Redis 클러스터 식별자(Redis cluster ID)**: `DemoCluster`
- **위치(Location)**: `AWS Cloud` (AWS Outpost를 사용하여 온프레미스에서도 실행 가능)
- **멀티 AZ (Multi-AZ)**:
    - 높은 가용성과 프라이머리 노드 장애 시 자동 장애 조치에 유용합니다. 추가 비용이 발생합니다.
    - **선택**: 이 실습에서는 비용 절감을 위해 **비활성화(Disabled)** 합니다.
- **자동 장애 조치(Auto failover)**: `Enabled` (멀티 AZ 활성화 시 유용)
- **엔진 버전(Engine version)**: 기본 설정을 유지합니다.
- **포트(Port)**: 기본 포트(예: 6379)를 유지합니다.
- **파라미터 그룹(Parameter group)**: 기본 설정을 유지합니다.
- **노드 유형(Node type)**:
    - **선택**: `t2.micro` 또는 `t3.micro`와 같은 프리티어 지원 마이크로 인스턴스 유형을 선택합니다.
- **복제본 수(Number of replicas)**:
    - 읽기 스케일링 및 고가용성을 위해 복제본을 추가할 수 있습니다 (멀티 AZ 모드에서 권장).
    - **선택**: 비용 절감을 위해 `0`으로 설정합니다.

#### 1.4 네트워크 및 보안 설정

- **서브넷 그룹(Subnet group)**:
    - **새 서브넷 그룹 생성(Create new subnet group)**을 선택하고 이름을 지정합니다 (예: `my-first-subnet-group`).
    - 캐시가 실행될 VPC를 선택하고, 자동으로 선택된 서브넷을 확인하거나 직접 지정합니다.
- **AZ 배치(AZ placements)**: 복제본이 배치될 특정 가용 영역을 지정할 수 있지만, 멀티 AZ를 비활성화했으므로 중요하지 않습니다.
- **저장 데이터 암호화(Encryption at-rest)**:
    - 저장된 데이터를 암호화할지 여부를 선택합니다. 활성화하는 경우 KMS 키를 지정해야 합니다.
    - **선택**: 이 실습에서는 **비활성화**합니다.
- **전송 중 암호화(Encryption in transit)**:
    - 클라이언트와 서버 간의 데이터 전송을 암호화할지 여부를 선택합니다.
    - **선택**: 이 실습에서는 **비활성화**합니다.
- **액세스 제어(Access Control)**: (전송 중 암호화 활성화 시 옵션이 나타남)
    - **Redis AUTH**: 암호 또는 AUTH 토큰을 사용하여 Redis 클러스터에 연결합니다.
    - **사용자 그룹 액세스 제어 목록(User Group Access Control List)**: ElastiCache 콘솔에서 사용자 그룹을 생성하여 접근을 제어합니다.
- **보안 그룹(Security groups)**: 네트워크 수준에서 캐시에 대한 접근을 관리할 보안 그룹을 선택하거나 새로 생성합니다.

#### 1.5 백업, 유지 관리 및 모니터링

- **백업(Backup)**:
    - 자동 백업을 활성화할지 여부 및 백업 보존 기간을 설정합니다.
- **유지 관리(Maintenance)**:
    - 마이너 버전 업그레이드와 같은 유지 관리가 수행될 유지 관리 기간을 설정합니다.
- **로그(Logs)**:
    - 슬로우 로그(Slow logs) 또는 엔진 로그(Engine logs)를 CloudWatch Logs로 내보낼 수 있습니다.
- **태그(Tags)**: 리소스 관리를 위한 태그를 추가합니다.

모든 설정을 검토한 후 **생성(Create)** 버튼을 클릭하여 ElastiCache Redis 캐시를 생성합니다.

---

### 2. ElastiCache Redis 캐시 관리 📊

캐시 생성이 완료되면 ElastiCache 대시보드에서 캐시 클러스터의 세부 정보를 확인할 수 있습니다.

- **엔드포인트(Endpoint)**: 생성된 캐시 클러스터의 **프라이머리 엔드포인트(Primary endpoint)**를 확인합니다. 읽기 복제본이 있는 경우 **리더 엔드포인트(Reader endpoint)**도 제공됩니다. 애플리케이션은 이 엔드포인트를 사용하여 캐시에 연결합니다.
- **세부 정보 확인**: 콘솔에서 노드 정보, 메트릭, 로그, 네트워크 보안 등 다양한 클러스터 세부 정보를 확인할 수 있습니다. 이는 RDS 콘솔과 유사하게 구성되어 있습니다.

**💡 참고**: 실제 애플리케이션에서 Redis 캐시에 연결하려면 특정 프로그래밍 언어(예: Python의 `redis-py` 라이브러리)를 사용하여 코드를 작성해야 합니다. 이 가이드에서는 복잡성을 피하기 위해 코드 예시는 포함하지 않습니다.

---

### 3. ElastiCache Redis 캐시 삭제 🗑️

더 이상 사용하지 않는 ElastiCache 클러스터는 비용이 계속 청구되지 않도록 삭제해야 합니다.

1. ElastiCache 대시보드에서 삭제할 Redis 클러스터를 선택합니다.
2. **작업(Actions)** > **삭제(Delete)**를 클릭합니다.
3. **백업 생성 여부**: 최종 백업 생성 여부를 묻는 메시지가 나타나면 **아니요(No)**를 선택합니다.
4. 클러스터 이름을 입력하여 삭제를 확인하고 **삭제(Delete)**를 클릭합니다.
