
Amazon S3 이벤트 알림은 S3 버킷에서 발생하는 특정 이벤트(예: 객체 생성/삭제)에 자동으로 반응할 수 있도록 해주는 기능입니다. 이를 통해 서버리스 아키텍처나 자동화된 워크플로우를 쉽게 구축할 수 있습니다.

---

### 1. S3 이벤트의 종류와 필터링

- **이벤트:** 객체 생성(`Put`), 객체 삭제(`Delete`), 객체 복원(`Restore`), 복제 이벤트(`Replication`) 등 다양한 이벤트가 발생할 수 있습니다.
- **필터링:** 모든 이벤트에 대해 알림을 받는 것이 아니라, 특정 조건을 만족하는 이벤트만 대상으로 지정할 수 있습니다.
    - **접두사(Prefix):** 특정 폴더 경로(`images/`)에 있는 객체만 필터링합니다.
    - **접미사(Suffix):** `.jpg`, `.jpeg` 등 특정 확장자를 가진 파일만 필터링합니다.

---

### 2. 이벤트 알림의 주요 목적지(Destinations)

![[Pasted image 20250803220606.png]]

S3에서 발생한 이벤트는 다음 세 가지 주요 서비스로 전송될 수 있습니다.
- **SNS 토픽(SNS Topic):** 메시지를 여러 구독자에게 동시에 보낼 때 사용됩니다.
- **SQS 큐(SQS Queue):** 메시지를 대기열에 저장하고, 다른 서비스가 비동기적으로 처리하도록 할 때 사용됩니다.
- **Lambda 함수(Lambda Function):** 이벤트 발생 시 특정 코드를 실행할 때 사용됩니다.

> **예시:** S3에 이미지가 업로드되면(이벤트) → Lambda 함수가 실행되어(목적지) → 썸네일을 자동 생성(액션)하는 워크플로우를 만들 수 있습니다.

---

### 3. S3 이벤트 알림을 위한 권한 설정

S3 이벤트 알림은 IAM 역할이 아닌, **리소스 접근 정책(Resource Access Policy)**을 사용하여 권한을 부여합니다.

|목적지|권한 설정 방법|
|---|---|
|**SNS 토픽**|**SNS 리소스 정책**을 SNS 토픽에 연결하여 S3가 메시지를 보낼 수 있도록 허용|
|**SQS 큐**|**SQS 리소스 정책**을 SQS 큐에 연결하여 S3가 메시지를 보낼 수 있도록 허용|
|**Lambda 함수**|**Lambda 리소스 정책**을 Lambda 함수에 연결하여 S3가 함수를 호출할 수 있도록 허용|

> **핵심:** S3 버킷 자체에 IAM 역할(Bucket Policy)을 설정하는 것이 아니라, **이벤트 목적지 서비스(SNS/SQS/Lambda)에 권한 정책을 연결**해야 합니다.

### 4. Amazon EventBridge 통합 (고급 기능)

S3 이벤트 알림은 Amazon EventBridge와 통합되어 더 강력한 기능을 제공합니다.

![[Pasted image 20250803220632.png]]

- **작동 방식:**
    1. S3에서 발생하는 모든 이벤트는 자동으로 **Amazon EventBridge**로 전송됩니다.
    2. EventBridge에 설정된 **규칙(Rules)**을 통해 이벤트를 필터링하고 다양한 목적지로 라우팅할 수 있습니다.

- **EventBridge 사용 시 장점:**
    - **고급 필터링:** 메타데이터, 객체 크기 등 더 세밀한 조건으로 이벤트를 필터링할 수 있습니다.
    - **다양한 목적지:** SQS, SNS, Lambda 외에 Step Functions, Kinesis 등 18개 이상의 AWS 서비스로 이벤트를 보낼 수 있습니다.
    - **안정적인 전달:** 이벤트 아카이빙 및 재생(Replay) 기능을 제공하여 안정성을 높입니다.

**결론:** S3 이벤트 알림은 S3 이벤트를 기반으로 자동화된 워크플로우를 구축하는 데 필수적인 기능이며, SNS/SQS/Lambda 외에 EventBridge를 활용하면 더욱 강력하고 유연한 솔루션을 만들 수 있습니다.