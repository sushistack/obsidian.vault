
## ⏳ 딜레이 큐(Delay Queue)란?

**딜레이 큐(Delay Queue)**는 메시지가 큐에 전송된 후 컨슈머에게 즉시 보이지 않고 일정 시간 동안 숨겨지는 SQS의 기능입니다. 이 시간 동안 메시지는 큐에 존재하지만, 컨슈머가 메시지를 폴링(polling)해도 수신할 수 없습니다.

### 주요 특징

![[Pasted image 20250817204117.png]]

- **메시지 가용성 지연:** 메시지가 큐에 도착하는 즉시 컨슈머가 읽는 것을 막아, 메시지 처리 시점을 지연시킬 필요가 있는 경우 유용합니다.
- **지연 시간:** 딜레이 시간은 **최대 15분**까지 설정할 수 있습니다.
- **기본값:** 기본적으로 딜레이 시간은 **0초**로 설정되어 있어, 메시지 전송과 동시에 컨슈머가 메시지를 읽을 수 있습니다.

### 딜레이 설정 방법

1. **큐 레벨에서 설정:** 큐를 생성하거나 편집할 때 `Delivery Delay` 값을 설정하여 해당 큐로 전송되는 모든 메시지에 동일한 지연 시간을 적용할 수 있습니다.
2. **메시지별로 설정:** `SendMessage` API를 호출할 때 `DelaySeconds` 파라미터를 사용하면, 큐의 기본 설정과 무관하게 개별 메시지에 대한 지연 시간을 지정할 수 있습니다.

---

## 🧪 딜레이 큐 실습 가이드

### 1. 딜레이 큐 생성

- **큐 이름:** `DelayQueue`
- **딜리버리 딜레이(Delivery Delay):** 10초로 설정합니다. 이렇게 설정하면 이 큐로 보내지는 모든 메시지는 컨슈머에게 보이기 전에 10초 동안 대기합니다.

### 2. 메시지 전송 및 지연 확인

1. 생성된 `DelayQueue`에서 **`Send and receive messages`**를 클릭합니다.
2. 메시지 본문을 입력하고, 기본 설정된 **`Delivery delay` 10초**를 확인합니다.
3. 메시지를 보낸 후, 동시에 **`Poll for messages`**를 클릭합니다.
4. 메시지가 즉시 나타나지 않고 10초 동안 대기합니다.
5. **10초가 지난 후** 메시지가 나타나는 것을 확인할 수 있습니다.

이 실습은 메시지 전송 시점과 컨슈머가 메시지를 실제로 수신할 수 있는 시점 사이에 의도적인 지연이 발생했음을 명확하게 보여줍니다. 이 기능은 특정 작업의 실행을 지연시키거나, 컨슈머의 준비가 덜 된 상태에서 메시지를 받지 않도록 하는 등의 다양한 비동기 워크플로우에서 유용하게 사용될 수 있습니다.