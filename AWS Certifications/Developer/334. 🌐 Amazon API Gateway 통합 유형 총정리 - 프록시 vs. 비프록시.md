
μ΄λ² κ°€μ΄λ“μ—μ„λ” Amazon API Gatewayκ°€ λ°±μ—”λ“ μ„λΉ„μ¤μ™€ μ—°λ™λλ” λ‹¤μ–‘ν• **ν†µν•© μ ν•(Integration Type)**μ— λ€ν•΄ μƒμ„Έν μ•μ•„λ³΄κ² μµλ‹λ‹¤. API Gatewayλ” λ‹¨μν μ”μ²­μ„ μ „λ‹¬ν•λ” κ²ƒμ„ λ„μ–΄, μ”μ²­κ³Ό μ‘λ‹µμ„ μμ λ΅­κ² λ³€ν•ν•λ” κ°•λ ¥ν• κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤.

---

## π€ 1λ‹¨κ³„: ν”„λ΅μ‹ ν†µν•©(Proxy Integration) vs. λΉ„ν”„λ΅μ‹ ν†µν•©(Non-Proxy Integration)

API Gatewayμ ν†µν•© μ ν•μ€ ν¬κ² **ν”„λ΅μ‹(Proxy)**μ™€ **λΉ„ν”„λ΅μ‹(Non-Proxy)**λ΅ λ‚λ‰©λ‹λ‹¤. μ΄ λ‘ κ°€μ§€ λ°©μ‹μ€ μ”μ²­/μ‘λ‹µ μ²λ¦¬ λ°©μ‹μ—μ„ λ…ν™•ν• μ°¨μ΄λ¥Ό λ³΄μ…λ‹λ‹¤.

### π§© λΉ„ν”„λ΅μ‹ ν†µν•© (Custom/Mapping Integration)

- **νΉμ§•**: API Gatewayκ°€ μ”μ²­μ„ λ°±μ—”λ“λ΅ λ³΄λ‚΄κΈ° μ „μ— **μ”μ²­ λ°μ΄ν„°(ν—¤λ”, μΏΌλ¦¬ νλΌλ―Έν„°, λ°”λ””)**λ¥Ό λ³€κ²½ν•κ±°λ‚ **μ‘λ‹µ λ°μ΄ν„°**λ¥Ό λ³€ν•ν•  μ μμµλ‹λ‹¤.
    
- **μ‘λ™ λ°©μ‹**: **λ§¤ν•‘ ν…ν”λ¦Ώ(Mapping Templates)**μ„ μ‚¬μ©ν•μ—¬ μ”μ²­μ„ λ°±μ—”λ“κ°€ μ΄ν•΄ν•  μ μλ” ν•μ‹μΌλ΅ λ³€ν™ν•κ³ , λ°±μ—”λ“μ μ‘λ‹µμ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ›ν•λ” ν•μ‹μΌλ΅ λ‹¤μ‹ λ³€ν™ν•©λ‹λ‹¤.
    
- **μ‚¬μ© μμ‹**: REST API(JSON)λ¥Ό νΈμ¶ν•μ—¬ SOAP API(XML) λ°±μ—”λ“μ™€ ν†µμ‹ ν•΄μ•Ό ν•  λ•, λλ” μΏΌλ¦¬ νλΌλ―Έν„° μ΄λ¦„μ„ λ°±μ—”λ“μ μ”κµ¬μ‚¬ν•­μ— λ§κ² λ³€κ²½ν•΄μ•Ό ν•  λ• μ μ©ν•©λ‹λ‹¤.
    
- **λ‹¨μ **: λ¨λ“  λ§¤ν•‘μ„ μλ™μΌλ΅ μ„¤μ •ν•΄μ•Ό ν•λ―€λ΅ μ„¤μ •μ΄ λ³µμ΅ν•κ³  μ‹κ°„μ΄ λ§μ΄ μ†μ”λ©λ‹λ‹¤.
    

### β΅οΈ ν”„λ΅μ‹ ν†µν•© (Proxy Integration)

![[Pasted image 20250907193831.png]]

- **νΉμ§•**: API Gatewayκ°€ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ λ°±μ—”λ“μ— **μλ” κ·Έλ€λ΅(as-is)** μ „λ‹¬ν•κ³ , λ°±μ—”λ“μ μ‘λ‹µμ„ **μλ” κ·Έλ€λ΅** ν΄λΌμ΄μ–ΈνΈμ— λ°ν™ν•©λ‹λ‹¤. μ¤‘κ°„μ—μ„ μ”μ²­/μ‘λ‹µμ„ μμ •ν•  μ μ—†μµλ‹λ‹¤.
    
- **μ‘λ™ λ°©μ‹**: API Gatewayλ” λ‹¨μν• **ν”„λ΅μ‹ μ—­ν• **λ§ μν–‰ν•λ©°, λ¨λ“  λΉ„μ¦λ‹μ¤ λ΅μ§κ³Ό λ°μ΄ν„° ν•μ‹ μ²λ¦¬λ” λ°±μ—”λ“(μ: Lambda ν•¨μ)μ— μ„μ„λ©λ‹λ‹¤.
    
- **μ‚¬μ© μμ‹**: λ€λ¶€λ¶„μ μ„λ²„λ¦¬μ¤ μ•„ν‚¤ν…μ²μ—μ„ Lambda ν•¨μμ™€ μ—°λ™ν•  λ• μ‚¬μ©λ©λ‹λ‹¤. Lambda ν•¨μκ°€ μ”μ²­μ λ¨λ“  μ •λ³΄λ¥Ό μ§μ ‘ λ°›μ•„ μ²λ¦¬ν•κ³  μ‘λ‹µμ„ κµ¬μ„±ν•©λ‹λ‹¤.
    
- **μ¥μ **: μ„¤μ •μ΄ λ§¤μ° κ°„λ‹¨ν•λ©°, μ μ—°ν• λ°±μ—”λ“ λ΅μ§μ„ κµ¬ν„ν•  μ μμµλ‹λ‹¤.

|νΉμ§•|ν”„λ΅μ‹ ν†µν•© (Lambda/HTTP Proxy)|λΉ„ν”„λ΅μ‹ ν†µν•© (Lambda/HTTP Non-Proxy)|
|---|---|---|
|**μ”μ²­/μ‘λ‹µ λ³€ν™**|λ¶κ°€λ¥ (μλ” κ·Έλ€λ΅ μ „λ‹¬)|κ°€λ¥ (λ§¤ν•‘ ν…ν”λ¦Ώ μ‚¬μ©)|
|**μ„¤μ • λ³µμ΅μ„±**|λ‚®μ (λ§¤μ° κ°„λ‹¨)|λ†’μ (λ§¤ν•‘ ν…ν”λ¦Ώ μ„¤μ • ν•„μ”)|
|**μ£Όμ” μ—­ν• **|λ‹¨μ μ „λ‹¬μ|λ³€ν™ λ° μ¤‘κ°μ|

---

## π› οΈ 2λ‹¨κ³„: λ§¤ν•‘ ν…ν”λ¦Ώ(Mapping Templates)κ³Ό VTL

**λ§¤ν•‘ ν…ν”λ¦Ώ**μ€ λΉ„ν”„λ΅μ‹ ν†µν•©μ—μ„ μ”μ²­κ³Ό μ‘λ‹µμ„ λ³€ν™ν•λ” λ° μ‚¬μ©λλ” λ„κµ¬μ…λ‹λ‹¤. μ΄ ν…ν”λ¦Ώμ€ **Velocity Template Language(VTL)**λΌλ” μ¤ν¬λ¦½ν… μ–Έμ–΄λ¥Ό κΈ°λ°μΌλ΅ ν•©λ‹λ‹¤.

### π“ λ§¤ν•‘ ν…ν”λ¦Ώμ κΈ°λ¥

- **λ°μ΄ν„° μ¶”μ¶**: μ”μ²­μ ν—¤λ”, μΏΌλ¦¬ νλΌλ―Έν„°, λ°”λ””, κ²½λ΅ λ“±μ—μ„ λ°μ΄ν„°λ¥Ό μ¶”μ¶ν•©λ‹λ‹¤.
    
- **μ”μ²­ λ³€ν™**: μ¶”μ¶ν• λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•μ—¬ λ°±μ—”λ“κ°€ μ”κµ¬ν•λ” ν•μ‹μΌλ΅ μƒλ΅μ΄ μ”μ²­ νμ΄λ΅λ“(payload)λ¥Ό μƒμ„±ν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, JSON λ°μ΄ν„°λ¥Ό XML λ°μ΄ν„°λ΅ λ³€ν™ν•  μ μμµλ‹λ‹¤.
    
- **μ‘λ‹µ λ³€ν™**: λ°±μ—”λ“λ΅λ¶€ν„° λ°›μ€ μ‘λ‹µμ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ΄ν•΄ν•  μ μλ” ν•μ‹μΌλ΅ λ‹¤μ‹ λ³€ν™ν•©λ‹λ‹¤.

### π’΅ λ§¤ν•‘ ν…ν”λ¦Ώμ ν™μ© μμ‹

![[Pasted image 20250907193857.png]]
- **REST(JSON)μ™€ SOAP(XML) κ°„ λ³€ν™**: JSON μ”μ²­μ„ λ°›μ•„μ„ SOAP μ„λΉ„μ¤μ— ν•„μ”ν• XML ν¬λ§·μΌλ΅ λ³€ν™ν•κ³ , λ‹¤μ‹ XML μ‘λ‹µμ„ JSONμΌλ΅ λ³€ν™ν•©λ‹λ‹¤.

![[Pasted image 20250907194103.png]]
- **μΏΌλ¦¬ νλΌλ―Έν„° μ΄λ¦„ λ³€κ²½**: `?name=foo`μ™€ κ°™μ€ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ `{"myVariable": "foo"}`μ™€ κ°™μ΄ λ°±μ—”λ“ Lambda ν•¨μκ°€ μ΄ν•΄ν•κΈ° μ‰¬μ΄ JSON κ°μ²΄λ΅ λ³€ν™ν•©λ‹λ‹¤.


---

## π 3λ‹¨κ³„: λ‹¤μ–‘ν• ν†µν•© μ ν• μƒμ„Έ λ¶„μ„

### 1. Mock ν†µν•© (MOCK Integration)

- **νΉμ§•**: μ”μ²­μ„ λ°±μ—”λ“λ΅ λ³΄λ‚΄μ§€ μ•κ³ , API Gateway λ‚΄λ¶€μ—μ„ λ―Έλ¦¬ μ •μλ μ‘λ‹µμ„ μ¦‰μ‹ λ°ν™ν•©λ‹λ‹¤.
    
- **μ©λ„**: λ°±μ—”λ“ κ°λ°μ΄ μ™„λ£λμ§€ μ•μ•μ„ λ•, API Gatewayμ λ™μ‘μ„ ν…μ¤νΈν•κ±°λ‚ ν”„λ°νΈμ—”λ“ κ°λ°μλ“¤μ΄ κ°€μ§ μ‘λ‹µμ„ κ°€μ§€κ³  κ°λ°μ„ μ§„ν–‰ν•  λ• μ μ©ν•©λ‹λ‹¤. **μ΄μ ν™κ²½μ—μ„λ” μ‚¬μ©ν•μ§€ μ•μµλ‹λ‹¤.**
    

### 2. AWS μ„λΉ„μ¤ ν†µν•© (AWS Service Integration)

- **νΉμ§•**: API Gatewayλ¥Ό ν†µν•΄ μ§μ ‘ AWS μ„λΉ„μ¤(μ: SQS, DynamoDB, SNS)λ¥Ό νΈμ¶ν•©λ‹λ‹¤.
    
- **ν†µν•© λ°©μ‹**: λΉ„ν”„λ΅μ‹ λ°©μ‹μΌλ΅, λ§¤ν•‘ ν…ν”λ¦Ώμ„ μ‚¬μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ AWS μ„λΉ„μ¤ API νΈμ¶ ν•μ‹μ— λ§κ² λ³€ν™ν•©λ‹λ‹¤.
    
- **μμ‹**: ν΄λΌμ΄μ–ΈνΈκ°€ `/message` μ—”λ“ν¬μΈνΈμ— POST μ”μ²­μ„ λ³΄λ‚΄λ©΄, API Gatewayκ°€ λ§¤ν•‘ ν…ν”λ¦Ώμ„ ν†µν•΄ SQS Queueμ— λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄λ” API νΈμ¶λ΅ λ³€ν™ν•μ—¬ μ‹¤ν–‰ν•©λ‹λ‹¤.
    

### 3. HTTP ν†µν•© (HTTP Integration)

![[Pasted image 20250907193808.png]]

- **νΉμ§•**: HTTP/S μ—”λ“ν¬μΈνΈλ΅ μ”μ²­μ„ μ „λ‹¬ν•©λ‹λ‹¤. λ°±μ—”λ“λ΅λ” Application Load Balancer, EC2 μΈμ¤ν„΄μ¤, λλ” μ™Έλ¶€ μ›Ήμ‚¬μ΄νΈκ°€ μ¬ μ μμµλ‹λ‹¤.
    
- **ν†µν•© λ°©μ‹**: **ν”„λ΅μ‹**μ™€ **λΉ„ν”„λ΅μ‹** λ¨λ‘ κ°€λ¥ν•©λ‹λ‹¤.
    
    - **HTTP ν”„λ΅μ‹**: μ”μ²­μ„ μλ” κ·Έλ€λ΅ λ°±μ—”λ“μ— μ „λ‹¬ν•κ³  μ‘λ‹µμ„ λ°ν™ν•©λ‹λ‹¤.
        
    - **HTTP λΉ„ν”„λ΅μ‹**: λ§¤ν•‘ ν…ν”λ¦Ώμ„ μ‚¬μ©ν•μ—¬ μ”μ²­κ³Ό μ‘λ‹µμ„ λ³€ν•ν•©λ‹λ‹¤. λν•, ν΄λΌμ΄μ–ΈνΈλ” λ¨λ¥΄λ” **API Key**μ™€ κ°™μ€ μ¶”κ°€ HTTP ν—¤λ”λ¥Ό λ°±μ—”λ“λ΅ λ³΄λ‚Ό μ μμµλ‹λ‹¤.
        

### 4. Lambda ν•¨μ ν†µν•© (Lambda Function Integration)

- **νΉμ§•**: μ”μ²­μ„ Lambda ν•¨μλ΅ μ „λ‹¬ν•©λ‹λ‹¤.
    
- **ν†µν•© λ°©μ‹**:
    
    - **Lambda ν”„λ΅μ‹**: ν΄λΌμ΄μ–ΈνΈμ μ”μ²­ μ •λ³΄(ν—¤λ”, μΏΌλ¦¬ νλΌλ―Έν„°, λ°”λ”” λ“±)λ¥Ό ν•λ‚μ JSON κ°μ²΄(**μ΄λ²¤νΈ κ°μ²΄**)λ΅ λ¬¶μ–΄ Lambda ν•¨μμ— μ „λ‹¬ν•©λ‹λ‹¤.
        
    - **Lambda λΉ„ν”„λ΅μ‹**: λ§¤ν•‘ ν…ν”λ¦Ώμ„ ν†µν•΄ μ”μ²­μ μΌλ¶€ λ°μ΄ν„°λ¥Ό μ¶”μ¶ν•μ—¬ Lambda ν•¨μλ΅ λ³΄λƒ…λ‹λ‹¤. Lambda ν•¨μμ λ°ν™κ°’λ„ λ§¤ν•‘ ν…ν”λ¦Ώμ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈ μ‘λ‹µμΌλ΅ λ³€ν™ν•  μ μμµλ‹λ‹¤.
        
    - **μ°Έκ³ **: λ€λ¶€λ¶„μ κ²½μ°, μ„¤μ •μ΄ κ°„λ‹¨ν•κ³  μ μ—°ν• **Lambda ν”„λ΅μ‹ ν†µν•©**μ΄ μ„ νΈλ©λ‹λ‹¤.
        

|ν†µν•© μ ν•|νΉμ§•|μ‚¬μ© μμ‹|
|---|---|---|
|**MOCK**|λ°±μ—”λ“ μ—†μ΄ μ¦‰μ‹ μ‘λ‹µ|ν”„λ°νΈμ—”λ“ κ°λ° μ‹ λ©μ—… API μ κ³µ|
|**AWS Service**|AWS μ„λΉ„μ¤ μ§μ ‘ νΈμ¶|SQSμ— λ©”μ‹μ§€ λ„£κΈ°, DynamoDBμ— λ°μ΄ν„° μ“°κΈ°|
|**HTTP**|HTTP/S μ—”λ“ν¬μΈνΈμ™€ ν†µμ‹ |μ›Ήμ„λ²„(ALB, EC2), μ™Έλ¶€ API νΈμ¶|
|**Lambda**|Lambda ν•¨μμ™€ ν†µμ‹ |μ„λ²„λ¦¬μ¤ λ°±μ—”λ“ λ΅μ§ κµ¬ν„|