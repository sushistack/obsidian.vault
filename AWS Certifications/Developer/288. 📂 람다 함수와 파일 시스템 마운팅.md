
**파일 시스템 마운팅**은 람다 함수가 VPC 내에서 실행될 때, **EFS(Elastic File System)**와 같은 네트워크 파일 시스템에 접근할 수 있게 해주는 기능입니다. 람다 함수는 초기화 단계에서 EFS 파일 시스템을 로컬 디렉터리에 마운트하여 파일 읽기 및 쓰기 작업을 수행할 수 있습니다.

---

## 람다와 EFS 연동

람다 함수와 EFS를 연동하려면 다음 조건이 충족되어야 합니다.

- **VPC 배포:** 람다 함수는 반드시 사용자의 **VPC 내에 배포**되어야 합니다.
    
- **EFS 액세스 포인트(Access Point):** EFS에 접근할 때 **액세스 포인트** 기능을 활용해야 합니다. 액세스 포인트는 특정 애플리케이션에 대한 EFS 파일 시스템의 진입점 역할을 하며, 사용자 ID와 디렉터리 경로를 강제하여 권한 관리를 간소화합니다.
    
- **네트워킹:** 람다 함수가 EFS에 접근하려면 네트워크 연결이 필요합니다. 람다 함수가 배포된 **프라이빗 서브넷**에서 EFS 마운트 대상(Mount Target)으로의 프라이빗 연결이 가능해야 합니다.

### 주의사항: EFS 연결 제한

람다 함수 인스턴스가 생성될 때마다 EFS에 새로운 연결이 생성됩니다. 따라서 단시간에 많은 람다 함수가 실행되는 경우, EFS의 **최대 연결 제한** 또는 **연결 버스트 한도**에 도달할 수 있으므로 주의해야 합니다.

---

## 람다 함수 스토리지 옵션 비교 📊

람다 함수에서 사용할 수 있는 다양한 스토리지 옵션을 목적, 성능, 비용 관점에서 비교해 보겠습니다.

|구분|`/tmp` 임시 스토리지|람다 레이어(Lambda Layers)|Amazon S3|Amazon EFS|
|---|---|---|---|---|
|**최대 크기**|10 GB|250 MB (최대 5개 레이어)|무제한|탄력적(Elastic)|
|**데이터 영속성**|**일시적** (인스턴스 종료 시 삭제)|**영구적** (불변)|**영구적** (객체로 저장)|**영구적**|
|**데이터 타입**|동적|정적 (읽기 전용)|동적|동적|
|**스토리지 유형**|파일 시스템|아카이브|객체 스토리지|파일 시스템|
|**접근 방법**|파일 시스템 작업 (읽기/쓰기)|코드 내에서 바로 사용|S3 API 호출 (Get, Put 등)|파일 시스템 마운팅|
|**접근 속도**|**가장 빠름** (디스크 접근)|**매우 빠름** (디스크 접근)|빠름 (네트워크 접근)|빠름 (네트워크 접근)|
|**데이터 공유**|**단일 함수 인스턴스**|**모든 함수 인스턴스**|**모든 함수 인스턴스**|**모든 함수 인스턴스**|
|**비용**|512MB까지 무료, 이후 추가 비용|함수 가격에 포함|S3 가격 정책 (스토리지/요청)|EFS 가격 정책 (스토리지/처리량)|

### 각 스토리지 옵션의 용도

- **`/tmp`**: 함수 실행 중 생성되는 임시 파일, 중간 결과물 등 **단일 실행 인스턴스** 내에서 빠르게 사용하고 버릴 데이터에 적합합니다.
    
- **람다 레이어**: 함수 간에 공유되는 **불변의 코드 및 종속성(라이브러리)**을 관리하는 데 최적화되어 있습니다.
    
- **S3**: 정적 콘텐츠 저장, 백업, 객체 저장 등 **대용량의 데이터를 영구적으로 저장**하고 웹을 통해 접근할 필요가 있을 때 유용합니다.
    
- **EFS**: 여러 람다 함수 인스턴스가 **공통 파일 시스템**에 동시에 접근하여 읽고 쓰는 작업이 필요할 때 사용됩니다.