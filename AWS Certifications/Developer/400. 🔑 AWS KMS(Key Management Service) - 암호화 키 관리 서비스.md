
AWS **KMS(Key Management Service)**는 클라우드 환경에서 암호화 키를 생성, 관리, 제어하는 완전 관리형 서비스입니다. AWS의 거의 모든 서비스에서 암호화 기능에 통합되어 있으며, 손쉬운 사용성과 강력한 보안 감사 기능을 제공합니다.

---

## 1. 🔍 KMS의 핵심 기능

- **완전 관리형 서비스**: AWS가 암호화 키의 물리적 보안과 인프라를 모두 관리합니다.
    
- **통합성**: S3, EBS, RDS 등 대부분의 AWS 서비스와 원활하게 통합되어 저장 중 암호화(Encryption at Rest)를 쉽게 활성화할 수 있습니다.
    
- **보안 감사**: **CloudTrail**을 통해 KMS 키의 모든 API 호출 내역을 기록하므로, 키 사용에 대한 상세한 보안 감사가 가능합니다.
    
- **API 사용**: 개발자는 AWS CLI나 SDK를 사용하여 KMS 키로 데이터를 직접 암호화하고 복호화할 수 있습니다. 중요한 비밀 데이터(예: 비밀번호)는 평문으로 저장하지 않고 KMS로 암호화하여 코드에 포함할 수 있습니다.
    

---

## 2. 🧩 KMS 키의 종류

KMS는 키의 유형과 관리 주체에 따라 다양한 종류의 키를 제공합니다.

### 1) 키 유형

- **대칭 키(Symmetric Key)**: 암호화와 복호화에 하나의 키만 사용됩니다. 대부분의 AWS 서비스 통합에 사용됩니다. 사용자는 키 자체에 접근할 수 없고, KMS API를 통해서만 키를 사용할 수 있습니다.
    
- **비대칭 키(Asymmetric Key)**: 암호화에 사용되는 **공개 키(Public Key)**와 복호화에 사용되는 **개인 키(Private Key)**가 쌍을 이룹니다. 외부 사용자가 공개 키로 데이터를 암호화한 후 AWS에 보내면, AWS 계정 내에서 개인 키로 복호화하는 시나리오에 유용합니다.
    

### 2) 관리 주체

- **AWS 소유 키(AWS Owned Keys)**: AWS 서비스가 소유하고 관리하는 키로, 사용자에게 보이지 않으며 무료입니다. (예: S3 SSE-S3 암호화)
    
- **AWS 관리형 키(AWS Managed Keys)**: AWS 계정 내에 생성되지만, AWS가 관리합니다. 이름이 `aws/`로 시작합니다(예: `aws/RDS`, `aws/EBS`). 특정 서비스에서만 사용할 수 있으며 무료입니다.
    
- **고객 관리형 키(Customer Managed Keys)**: 사용자가 직접 생성하고 관리하는 키로, 유료(월 $1)입니다. 키 정책, 별칭(alias), 로테이션을 직접 제어할 수 있습니다. 외부에서 키를 가져와(Import) 사용할 수도 있습니다.
    

---

## 3. 🔄 키 로테이션 (Key Rotation)

암호화 키를 정기적으로 교체하여 보안을 강화합니다.

- **AWS 관리형 키**: AWS가 자동으로 1년마다 키를 로테이션합니다.
    
- **고객 관리형 키**: 사용자가 직접 로테이션을 활성화할 수 있으며, 주기를 설정하거나 수동으로 로테이션할 수 있습니다. 가져온 키는 수동으로만 로테이션할 수 있습니다.
    

---

## 4. 🌍 리전 및 키 복사

![[Pasted image 20250913171405.png]]

KMS 키는 **리전(Region)에 종속적**입니다. 따라서 한 리전의 KMS 키를 다른 리전으로 직접 이동할 수 없습니다.

- **EBS 볼륨 복사 예시**:

1. **원본 EBS 볼륨**의 스냅샷을 생성합니다.
    
2. 스냅샷을 다른 리전으로 **복사**할 때, 새로운 리전의 KMS 키로 **재암호화**해야 합니다.
    
3. 새로운 리전에서 재암호화된 스냅샷으로 새로운 EBS 볼륨을 생성합니다.
    

---

## 5. 🛡️ KMS 키 정책

KMS 키에 대한 접근을 제어하는 IAM 정책과 유사한 정책입니다.

- **기본 정책**: KMS 키 생성 시 자동으로 부여되며, 해당 AWS 계정의 IAM 사용자 및 역할이 키에 접근할 수 있도록 허용합니다.
    
- **커스텀 정책**: 사용자가 직접 정의하는 정책으로, 특정 사용자, 역할 또는 **다른 AWS 계정**에게 키 접근 권한을 부여할 수 있습니다. **교차 계정(Cross-Account)** 접근 권한을 설정하려면 반드시 커스텀 정책을 사용해야 합니다.
    

### 교차 계정 스냅샷 공유 예시

1. 계정 A에서 **고객 관리형 KMS 키**로 암호화된 EBS 스냅샷을 생성합니다.
    
2. KMS 키 정책을 편집하여 계정 B가 해당 키를 사용할 수 있도록 권한을 부여합니다.
    
3. 암호화된 스냅샷을 계정 B와 공유합니다.
    
4. 계정 B는 스냅샷을 복사할 때, 자신의 계정에 있는 KMS 키를 사용하여 스냅샷을 재암호화합니다.
    
5. 재암호화된 스냅샷을 사용하여 새로운 EBS 볼륨을 생성합니다.