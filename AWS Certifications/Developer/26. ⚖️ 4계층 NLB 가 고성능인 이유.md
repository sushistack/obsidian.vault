### 4계층 로드 밸런서(NLB)의 성능 우위 요인

#### 1. 낮은 프로토콜 계층에서의 작동 (Layer 4)

- **단순성**: 4계층 로드 밸런서는 OSI 모델의 트랜스포트 계층(Transport Layer)에서 작동합니다. 이 계층에서는 주로 **IP 주소와 포트 번호**만을 기반으로 트래픽을 처리합니다.

- **패킷 수준 처리**: 로드 밸런서가 들어오는 IP 패킷의 대상 IP 주소와 포트만 확인하여 미리 정해진 대상 서버의 IP 주소와 포트로 트래픽을 전달합니다. 이는 애플리케이션 계층(Layer 7)처럼 HTTP 헤더, URL 경로, 쿠키 등 **패킷 내부의 데이터를 분석할 필요가 없습니다.**

- **오버헤드 감소**: 복잡한 프로토콜 파싱 및 애플리케이션 로직 처리가 없으므로, 로드 밸런서 자체의 CPU 및 메모리 사용량이 훨씬 적습니다. 이는 각 요청을 처리하는 데 필요한 리소스가 적다는 것을 의미하며, 결과적으로 **더 많은 동시 연결과 더 높은 처리량**을 달성할 수 있습니다.

#### 2. 연결 기반 처리

- **TCP/UDP 연결 관리**: 4계층 로드 밸런서는 기본적으로 TCP 연결 또는 UDP 세션을 관리합니다. 일단 클라이언트와 대상 서버 간에 연결이 설정되면, 로드 밸런서는 해당 연결 내의 모든 후속 패킷을 추가적인 심층 검사 없이 효율적으로 전달합니다.

- **연결 유지**: 7계층 로드 밸런서가 각 HTTP 요청마다 새로운 결정을 내리거나 복잡한 세션 관리가 필요한 반면, 4계층 로드 밸런서는 확립된 연결을 통해 단순히 데이터 스트림을 전달하므로 오버헤드가 적습니다.

#### 3. SSL/TLS 종료 없음

- **암호화/복호화 오버헤드 없음**: 4계층 로드 밸런서인 NLB는 기본적으로 SSL/TLS 트래픽을 종료(복호화)하지 않습니다. 즉, 암호화된 트래픽을 복호화하고 다시 암호화하는 컴퓨팅 집약적인 작업이 NLB에서는 발생하지 않습니다.

- **투명한 전달**: 암호화된 트래픽은 대상 서버로 투명하게 전달되며, 대상 서버에서 직접 SSL/TLS를 처리합니다. 이로 인해 로드 밸런서의 처리 부담이 크게 줄어들어 성능이 향상됩니다. (물론 NLB도 TLS 트래픽을 종료하는 옵션을 제공하지만, 이는 기본 동작이 아니며, 성능에 영향을 미칠 수 있습니다.)

#### 4. 고정 IP 주소 및 DNS 캐싱

- **고정 IP**: NLB는 가용 영역(AZ)당 고정 IP 주소를 제공하여 DNS 조회를 줄이고, DNS 캐싱을 통한 빠른 연결 설정에 유리합니다.

- **직접 라우팅**: 일부 구현에서는 로드 밸런서가 트래픽을 포워딩할 때 NAT(Network Address Translation)만 수행하거나, DSR(Direct Server Return)과 같은 기술을 사용하여 반환 트래픽이 로드 밸런서를 거치지 않고 직접 클라이언트로 전송되도록 하여 오버헤드를 더욱 줄일 수 있습니다.

---

### 결론

요약하자면, 4계층 로드 밸런서는 **더 낮은 계층에서 더 적은 정보를 기반으로 트래픽을 처리**하기 때문에 7계층 로드 밸런서에 비해 훨씬 단순하고 효율적입니다. 이러한 단순성은 각 요청을 처리하는 데 필요한 컴퓨팅 리소스를 줄여주어, **수백만 건의 요청을 초당 처리할 수 있는 압도적인 성능과 극도로 낮은 지연 시간**을 달성하게 합니다. 이는 복잡한 애플리케이션 계층 기능을 필요로 하지 않지만, 극단적인 처리량과 안정적인 연결이 중요한 시나리오에 NLB가 최적의 선택이 되는 이유입니다.