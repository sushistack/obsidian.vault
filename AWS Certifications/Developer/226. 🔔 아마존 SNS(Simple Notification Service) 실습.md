
## 🏗️ SNS 토픽 생성

SNS의 핵심인 **토픽(Topic)**은 메시지를 발행하고 구독하는 논리적인 통신 채널입니다.

### 1. 토픽 이름 및 유형 선택

- **이름:** `MyFirstTopic`
- **유형:** `Standard`. 이는 **최소 1회 전송 보장** 및 **최고의 처리량**을 제공합니다. (FIFO 토픽은 `.fifo` 접미사를 사용해야 하며, 순서 보장과 한 번만 전송을 지원하지만, 구독자가 SQS 큐로만 제한됩니다.)

### 2. 액세스 정책(Access Policy) 설정

- **용도:** 누가 토픽에 메시지를 발행할 수 있는지 정의합니다. S3 버킷 정책이나 SQS 큐 액세스 정책과 유사한 JSON 기반 정책입니다.
- **활용:** S3 버킷이 SNS 토픽으로 이벤트 알림을 보내도록 허용하는 등, 다른 AWS 서비스와의 통합에 필수적입니다.
- **실습:** 기본 설정을 유지합니다.

---

## 📝 토픽 구독(Subscription)

토픽이 생성되면, 메시지를 수신할 **구독자(Subscriber)**를 추가해야 합니다.

### 1. 구독 생성

- **프로토콜(Protocol):** 다양한 엔드포인트 중 하나를 선택합니다.
    
    - **AWS 서비스:** SQS, Lambda, Kinesis Data Firehose
    - **웹:** HTTP/HTTPS
    - **알림:** Email, SMS, 모바일 푸시

- **실습:** 가장 간단한 **`Email`** 프로토콜을 선택합니다.

### 2. 엔드포인트(Endpoint) 지정

- **엔드포인트:** 메시지를 받을 이메일 주소를 입력합니다. (예: `stephanetheteacher@mailinator.com`)

### 3. 필터 정책(Filter Policy)

- **용도:** 구독자가 받을 메시지를 특정 속성(attribute)을 기준으로 필터링할 수 있습니다.
- **실습:** 모든 메시지를 받기 위해 필터 정책을 설정하지 않습니다.

### 4. 구독 확인

- 구독을 생성하면 `Pending confirmation` 상태가 됩니다.
- 지정된 이메일 주소로 전송된 확인 링크를 클릭하여 구독을 활성화해야 합니다. 확인이 완료되면 상태가 `Confirmed`로 변경됩니다.

---

## 📩 메시지 발행 및 테스트

이제 토픽에 메시지를 발행하여 구독자에게 메시지가 제대로 전달되는지 확인합니다.

### 1. 메시지 발행

- **토픽 페이지:** `Publish message` 버튼을 클릭합니다.
- **메시지 본문:** `Hello World`와 같은 테스트 메시지를 입력합니다.
- **발행:** `Publish message`를 클릭하면 메시지가 토픽으로 전송됩니다.

### 2. 메시지 수신 확인

- 구독 확인에 사용했던 이메일 수신함으로 돌아갑니다.
- SNS로부터 `Hello World` 메시지가 포함된 알림 이메일이 수신된 것을 확인할 수 있습니다.

### 3. 리소스 정리

- 실습을 마친 후 불필요한 비용을 방지하기 위해 생성된 구독과 토픽을 순서대로 삭제합니다.

이 실습을 통해 SNS의 핵심인 **발행/구독(Pub/Sub)** 모델이 어떻게 동작하는지, 그리고 다양한 프로토콜을 사용하여 메시지를 여러 구독자에게 손쉽게 전달하는 방법을 직접 경험할 수 있습니다.