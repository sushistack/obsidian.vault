
Amazon Cognito는 크게 두 가지 주요 기능인 **User Pools**와 **Identity Pools**로 나뉩니다. 이 두 서비스의 명확한 차이점을 이해하는 것은 Cognito를 효과적으로 사용하는 데 매우 중요합니다.

---

## 🔑 Cognito User Pools: 인증(Authentication)

**Cognito User Pools**는 사용자의 **신원 확인(Identity Verification)**에 초점을 맞춥니다. 한마디로, 여러분의 애플리케이션 사용자를 위한 **사용자 데이터베이스** 역할을 수행합니다.

### 주요 기능 요약

- **사용자 관리**: 회원가입, 로그인, 비밀번호 재설정 등 사용자 계정을 직접 관리할 수 있습니다.1
    
- **페더레이션(Federation)**: Google, Facebook, Apple과 같은 **소셜 로그인**이나 SAML, OpenID Connect(OIDC)를 통한 **기업 로그인**을 지원하여 다양한 인증 방식을 통합합니다.2
    
- **커스터마이징**: 로고를 포함한 호스팅 UI를 커스터마이징할 수 있으며, Lambda 트리거를 통해 인증 플로우를 상세하게 제어할 수 있습니다.3
    
- **보안**: 적응형 인증(Adaptive Authentication)을 통해 로그인 시 위험도를 평가하고, 필요 시 MFA(다중 요소 인증)를 요구하여 보안을 강화합니다.
    
- **결과**: 사용자의 신원(ID)이 확인되면 JWT(JSON Web Token)를 반환합니다.


---

## 🛡️ Cognito Identity Pools: 권한 부여(Authorization)

**Cognito Identity Pools**는 사용자의 **AWS 리소스 접근 권한(Access Control)**에 초점을 맞춥니다. 이 서비스의 핵심 목적은 사용자에게 AWS 환경 내의 S3, DynamoDB, Lambda 등 서비스에 접근할 수 있는 **임시 AWS 자격 증명**을 제공하는 것입니다.

### 주요 기능 요약

- **권한 관리**: 외부 사용자(인증 또는 비인증)가 AWS 서비스에 접근할 수 있도록 IAM 역할과 정책을 매핑합니다.
    
- **자격 증명 교환**: 사용자의 신원(로그인 토큰)을 AWS STS(Security Token Service)를 통해 임시 AWS 자격 증명으로 교환하는 역할을 합니다.4
    
- **다양한 로그인 소스**: Cognito User Pools뿐만 아니라 소셜 IdP, OIDC, SAML 등 다양한 인증 소스를 통해 발급된 토큰을 받아들일 수 있습니다.
    
- **게스트 액세스**: 로그인하지 않은 **게스트 사용자**에게도 제한적인 AWS 리소스 접근 권한을 부여할 수 있습니다.
    
- **세분화된 제어**: IAM 정책 변수를 활용하여 사용자 ID를 기반으로 S3 버킷의 특정 경로에만 접근을 허용하는 등 매우 세밀한 권한 제어가 가능합니다.


---

## 🤝 User Pools + Identity Pools: 최고의 조합

두 서비스를 함께 사용하면 **인증**과 **권한 부여**라는 두 가지 핵심 기능을 완벽하게 분리하여 구현할 수 있습니다.

### 통합된 워크플로우

1. **인증**: 웹 또는 모바일 애플리케이션 사용자가 **Cognito User Pools**를 통해 로그인하여 신원을 인증받고 JWT를 얻습니다.
    
2. **자격 증명 교환**: 애플리케이션은 JWT를 **Cognito Identity Pools**로 보냅니다.5
    
3. **권한 부여**: Identity Pool은 JWT의 유효성을 검증한 후, 해당 사용자에게 매핑된 IAM 역할에 따라 임시 AWS 자격 증명을 발급합니다.
    
4. **AWS 리소스 접근**: 애플리케이션은 이 임시 자격 증명을 사용하여 S3, DynamoDB 등 AWS 서비스에 직접 API 호출을 실행합니다.6
    

이러한 분리된 아키텍처는 사용자 관리는 User Pools가, AWS 리소스 접근 제어는 Identity Pools가 담당하게 하여 애플리케이션의 보안과 확장성을 크게 향상시킵니다.

|기능|**Cognito User Pools**|**Cognito Identity Pools**|
|---|---|---|
|**목적**|**인증** (사용자 신원 확인)|**권한 부여** (AWS 리소스 접근 제어)|
|**주요 역할**|사용자 데이터베이스|AWS 자격 증명 교환기|
|**결과물**|JWT(JSON Web Token)|임시 AWS 자격 증명 (IAM 역할)|
|**핵심 키워드**|Authentication, Federation, Sign-up/in, MFA|Authorization, Access Control, IAM Role, STS|
|**사용 예시**|앱 로그인 기능, 소셜 로그인 연동|S3 버킷 접근, DynamoDB 테이블 접근|