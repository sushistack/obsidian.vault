
## π—οΈ ν‚¤λ„¤μ‹μ¤ λ°μ΄ν„° μ¤νΈλ¦Ό μƒμ„±

### 1. μ¤νΈλ¦Ό μ΄λ¦„ λ° μ©λ‰ λ¨λ“ μ„ νƒ

- **μ΄λ¦„:** `DemoStream`
- **μ©λ‰ λ¨λ“:**
    
    - **`On-demand` (μ¨λ””λ§¨λ“):** μ©λ‰μ„ μλ™μΌλ΅ ν™•μ¥ λ° μ¶•μ†ν•©λ‹λ‹¤. κ°λ°μκ°€ μƒ¤λ“λ¥Ό κ΄€λ¦¬ν•  ν•„μ”κ°€ μ—†μµλ‹λ‹¤.
    - **`Provisioned` (ν”„λ΅λΉ„μ €λ‹):** μ‚¬μ©μκ°€ μ§μ ‘ **μƒ¤λ“(Shard)** μλ¥Ό μ§€μ •ν•©λ‹λ‹¤. κ° μƒ¤λ“λ” μ΄λ‹Ή 1MB/1,000 λ μ½”λ“ μ“°κΈ°, μ΄λ‹Ή 2MB μ½κΈ° μ©λ‰μ„ κ°€μ§‘λ‹λ‹¤.

- **μ‹¤μµ:** λΉ„μ© ν¨μ¨μ μΈ λ°λ¨λ¥Ό μ„ν•΄ **`Provisioned` λ¨λ“λ¥Ό μ„ νƒν•κ³  μƒ¤λ“ μλ¥Ό 1κ°**λ΅ μ„¤μ •ν•©λ‹λ‹¤.

---

## π’» ν‚¤λ„¤μ‹μ¤ λ°μ΄ν„° μ¤νΈλ¦Όμ— λ°μ΄ν„° μ“°κΈ° (Put)

λ°μ΄ν„°λ¥Ό μ¤νΈλ¦Όμ— λ³΄λ‚΄λ” κ²ƒμ„ **Put**μ΄λΌκ³  ν•©λ‹λ‹¤. CLI(Command Line Interface)λ¥Ό μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.

### 1. AWS CloudShell μ‚¬μ©

- **AWS CloudShell:** AWS κ΄€λ¦¬ μ½μ†”μ—μ„ λ°”λ΅ μ‹¤ν–‰ν•  μ μλ” ν„°λ―Έλ„ ν™κ²½μ…λ‹λ‹¤. IAM μκ²© μ¦λ…κ³Ό λ¦¬μ „μ΄ μλ™μΌλ΅ κµ¬μ„±λμ–΄ μμ–΄ νΈλ¦¬ν•©λ‹λ‹¤.

### 2. `put-record` λ…λ Ή μ‚¬μ©

`put-record` APIλ¥Ό μ‚¬μ©ν•μ—¬ μ¤νΈλ¦Όμ— λ‹¨μΌ λ μ½”λ“λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.

- **Stream Name:** `DemoStream`μΌλ΅ μ§€μ •ν•©λ‹λ‹¤.
- **Partition Key:** λ°μ΄ν„°λ¥Ό λ…Όλ¦¬μ μΌλ΅ κ·Έλ£Ήν™”ν•κ³  μƒ¤λ“λ¥Ό μ§€μ •ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤. λ™μΌν• `Partition Key`λ¥Ό κ°€μ§„ λ°μ΄ν„°λ” λ™μΌν• μƒ¤λ“μ— μ €μ¥λμ–΄ **μμ„κ°€ λ³΄μ¥**λ©λ‹λ‹¤. (μ: `user1`)
- **Data:** λ³΄λ‚Ό λ°μ΄ν„°(μ: `user signup`)λ¥Ό μ…λ ¥ν•©λ‹λ‹¤.
- **`cli-binary-format`:** CLIμ—μ„ λ°”μ΄λ„λ¦¬ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•κΈ° μ„ν• ν•„μ νλΌλ―Έν„°μ…λ‹λ‹¤.

```Bash
aws kinesis put-record --stream-name DemoStream --partition-key user1 --data "user signup" --cli-binary-format raw-in-base64-out
aws kinesis put-record --stream-name DemoStream --partition-key user1 --data "user login" --cli-binary-format raw-in-base64-out
aws kinesis put-record --stream-name DemoStream --partition-key user1 --data "user logout" --cli-binary-format raw-in-base64-out
```

---

## β¬‡οΈ ν‚¤λ„¤μ‹μ¤ λ°μ΄ν„° μ¤νΈλ¦Όμ—μ„ λ°μ΄ν„° μ½κΈ° (Get)

### 1. μ¤νΈλ¦Ό μ •λ³΄ ν™•μΈ

λ°μ΄ν„°λ¥Ό μ½κΈ° μ „μ— `describe-stream` APIλ¥Ό μ‚¬μ©ν•μ—¬ μ¤νΈλ¦Όμ μƒ¤λ“ μ •λ³΄λ¥Ό ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.

```Bash
aws kinesis describe-stream --stream-name DemoStream
```

- **κ²°κ³Ό:** μ¤νΈλ¦Όμ `StreamDescription`κ³Ό μƒ¤λ“ ID(`shardId-0000000000000`)λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤. CLIλ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό μ½μΌλ ¤λ©΄ μ΄ μƒ¤λ“ IDκ°€ ν•„μ”ν•©λ‹λ‹¤.

### 2. `get-shard-iterator` λ…λ Ή μ‚¬μ©

`get-shard-iterator` APIλ¥Ό μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ¥Ό μ½μ„ μ‹μ‘ μ§€μ μ„ μ§€μ •ν•©λ‹λ‹¤.
- **`shard-iterator-type TRIM_HORIZON`:** μ¤νΈλ¦Όμ κ°€μ¥ μ²μλ¶€ν„° λ°μ΄ν„°λ¥Ό μ½μµλ‹λ‹¤.
- **κ²°κ³Ό:** `get-records` APIμ— μ‚¬μ©ν•  **`ShardIterator`**κ°€ λ°ν™λ©λ‹λ‹¤.


```Bash
aws kinesis get-shard-iterator --stream-name DemoStream --shard-id shardId-0000000000000 --shard-iterator-type TRIM_HORIZON
```

### 3. `get-records` λ…λ Ή μ‚¬μ©

`get-records` APIλ¥Ό μ‚¬μ©ν•μ—¬ μ‹¤μ  λ°μ΄ν„°λ¥Ό κ°€μ Έμµλ‹λ‹¤. `get-shard-iterator`μ—μ„ λ°›μ€ `ShardIterator`λ¥Ό νλΌλ―Έν„°λ΅ μ‚¬μ©ν•©λ‹λ‹¤.

- **κ²°κ³Ό:** λ°μ΄ν„°κ°€ **Base64**λ΅ μΈμ½”λ”©λ `Records` λ°°μ—΄μ΄ λ°ν™λ©λ‹λ‹¤.
- **λ°μ΄ν„° λ””μ½”λ”©:** Base64λ΅ μΈμ½”λ”©λ λ°μ΄ν„°λ¥Ό λ””μ½”λ”©ν•λ©΄(`user signup`, `user login` λ“±) μ›λ³Έ λ©”μ‹μ§€λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.

```Bash
aws kinesis get-records --shard-iterator <λ³µμ‚¬ν•_ShardIterator>
```

μ΄ μ‹¤μµμ„ ν†µν•΄ ν‚¤λ„¤μ‹μ¤ λ°μ΄ν„° μ¤νΈλ¦Όμ **Put(μ“°κΈ°)** λ° **Get(μ½κΈ°)** APIλ¥Ό μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ¥Ό μ§μ ‘ μ²λ¦¬ν•λ” κ³Όμ •μ„ μ΄ν•΄ν•  μ μμµλ‹λ‹¤. μ΄λ” μ‹¤μ‹κ°„ λ°μ΄ν„° μ²λ¦¬ νμ΄ν”„λΌμΈμ κΈ°λ³Έμ΄ λλ” μ‘μ—…μ…λ‹λ‹¤.