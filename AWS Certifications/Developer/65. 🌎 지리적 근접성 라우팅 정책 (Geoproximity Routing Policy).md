
이번 강의에서는 사용자와 리소스의 지리적 위치를 기반으로 트래픽을 라우팅하고, 특정 리소스로 트래픽을 유도할 수 있는 **지리적 근접성 라우팅 정책(Geoproximity Routing Policy)**에 대해 알아봅니다.

---
### 1. 지리적 근접성 라우팅 정책이란? 🤔

- **개념**: <mark class="hltr-red">사용자와 리소스 간의 거리를 기준</mark>으로 트래픽을 가장 가까운 리소스로 라우팅하는 정책입니다. 특히 바이어스(Bias) 값을 사용하여 라우팅 규칙에 인위적인 영향을 줄 수 있다는 점이 특징입니다.
    
- **바이어스(Bias)의 역할**:
    - **바이어스 증가 (양수 값)**: 특정 리소스의 지리적 영역을 <mark class="hltr-red">확장</mark>합니다. 즉, 실제 거리가 멀리 떨어진 사용자도 해당 리소스로 라우팅되도록 더 많은 트래픽을 유도합니다.
    - **바이어스 감소 (음수 값)**: 특정 리소스의 지리적 영역을 <mark class="hltr-red">축소</mark>합니다. 즉, 실제 거리가 가까운 사용자라도 해당 리소스로 라우팅될 확률을 줄입니다.
- **사용 방법**:
    - 이 정책은 Route 53의 <mark class="hltr-red">트래픽 흐름(Traffic flow)</mark> 기능을 통해서만 설정할 수 있습니다.
    - **AWS 리소스**: AWS 리전 이름을 지정하면 Route 53이 자동으로 해당 리전의 지리적 위치를 계산합니다.
    - **비-AWS 리소스**: 온프레미스 데이터센터와 같은 비-AWS 리소스의 경우, **위도와 경도**를 직접 입력하여 위치를 지정해야 합니다.

### 2. 지리적 근접성 라우팅 정책의 작동 예시 🗺️

바이어스 값이 라우팅에 어떻게 영향을 미치는지 그림으로 살펴보겠습니다.

#### 2.1. 바이어스 0 (기본값)

![[Pasted image 20250726223546.png]]

- **상황**: `us-west-1`과 `us-east-1`에 리소스가 있고, 양쪽 모두 바이어스가 `0`으로 설정된 경우.
    
- **결과**: 사용자의 위치에 따라 두 리전의 중간 지점을 기준으로 나뉘게 됩니다. 이 경계선 왼쪽의 사용자는 `us-west-1`로, 오른쪽의 사용자는 `us-east-1`로 라우팅됩니다. 이는 사용자와 지리적으로 가장 가까운 리소스로 라우팅하는 것과 유사합니다.

#### 2.2. 바이어스 적용 (양수)

![[Pasted image 20250726223610.png]]

- **상황**: `us-west-1`의 바이어스는 `0`이고, `us-east-1`의 바이어스는 `+50`으로 설정된 경우.
    
- **결과**: `us-east-1`의 바이어스가 <mark class="hltr-red">양수이므로, 이 리소스가 트래픽을 더 많이 끌어당</mark>깁니다. 이로 인해 두 리전 간의 경계선이 `us-west-1` 쪽으로 이동하게 됩니다. 따라서 `us-west-1`에 더 가까운 사용자들도 `us-east-1`로 라우팅될 수 있습니다.

### 3. 지리적 근접성 라우팅 정책의 활용 사례 💡

- **트래픽 분산 제어**: 트래픽 부하가 불균형한 경우, 바이어스 값을 조정하여 특정 리전으로 트래픽을 더 많이 보내거나 적게 보낼 수 있습니다.
    
- **리전 확장 및 축소**: 특정 리전의 리소스를 일시적으로 늘리거나 줄여야 할 때, 바이어스를 조정하여 사용자 트래픽을 유연하게 제어할 수 있습니다.
    
- **카나리 배포(Canary Deployment)**: 바이어스를 사용하여 새로운 버전의 애플리케이션이 배포된 리전에 소수의 사용자 트래픽만 유도하는 등 정교한 트래픽 제어가 가능합니다.
    

### 4. 결론 💡

**지리적 근접성 라우팅 정책**은 사용자의 위치와 리소스의 위치를 기반으로 하되, **바이어스**라는 값을 통해 특정 리소스로 트래픽을 인위적으로 유도하거나 배제할 수 있는 고급 기능입니다. 이를 통해 단순한 지리적 라우팅을 넘어, 비즈니스 및 운영 요구사항에 따라 트래픽 흐름을 전략적으로 제어할 수 있습니다.
