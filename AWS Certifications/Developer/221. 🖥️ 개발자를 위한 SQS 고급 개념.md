
## β³ λ΅± ν΄λ§(Long Polling)

![[Pasted image 20250817204339.png]]

**λ΅± ν΄λ§(Long Polling)**μ€ μ»¨μλ¨Έκ°€ SQS νμ—μ„ λ©”μ‹μ§€λ¥Ό μ”μ²­ν•  λ•, νμ— λ©”μ‹μ§€κ°€ μ—†λ”λΌλ„ μ¦‰μ‹ μ‘λ‹µμ„ λ°›μ§€ μ•κ³  μΌμ • μ‹κ°„ λ™μ• λ©”μ‹μ§€κ°€ λ„μ°©ν•κΈ°λ¥Ό κΈ°λ‹¤λ¦¬λ” λ°©μ‹μ…λ‹λ‹¤.

### μ ν΄λ§(Short Polling)κ³Όμ μ°¨μ΄μ 

|νΉμ§•|μ ν΄λ§ (κΈ°λ³Έκ°’)|λ΅± ν΄λ§|
|---|---|---|
|**λ€κΈ° μ‹κ°„**|0μ΄ (μ¦‰μ‹ μ‘λ‹µ)|1 ~ 20μ΄ (λ€κΈ°)|
|**API νΈμ¶ νμ**|λ©”μ‹μ§€κ°€ μ—†μ–΄λ„ μ§€μ†μ μΌλ΅ νΈμ¶|λ©”μ‹μ§€κ°€ λ„μ°©ν•  λ•κΉμ§€ λ€κΈ°ν•λ―€λ΅ νΈμ¶ νμ κ°μ†|
|**λΉ„μ© λ° ν¨μ¨μ„±**|λΉ„μ© μ¦κ°€, λΉ„ν¨μ¨μ |API νΈμ¶ κ°μ†λ΅ λΉ„μ© μ κ°, ν¨μ¨μ |
|**μ§€μ—° μ‹κ°„**|λ©”μ‹μ§€κ°€ λ„μ°©ν•΄λ„ λ‹¤μ νΈμ¶κΉμ§€ λ€κΈ°|λ©”μ‹μ§€ λ„μ°© μ¦‰μ‹ μμ‹  κ°€λ¥ν•μ—¬ μ§€μ—° μ‹κ°„ κ°μ†|

### λ΅± ν΄λ§ μ„¤μ • λ°©λ²•

- **ν λ λ²¨:** SQS νμ **`Receive message wait time`**μ„ 0μ΄λ³΄λ‹¤ κΈ΄ κ°’(μµλ€ 20μ΄)μΌλ΅ μ„¤μ •ν•©λ‹λ‹¤. μ΄ νμ—μ„ λ©”μ‹μ§€λ¥Ό λ°›λ” λ¨λ“  μ»¨μλ¨Έμ— μ μ©λ©λ‹λ‹¤.
    
- **API νΈμ¶ λ λ²¨:** `ReceiveMessage` API νΈμ¶ μ‹ **`ReceiveMessageWaitTimeSeconds`** νλΌλ―Έν„°λ¥Ό μ„¤μ •ν•μ—¬ κ°λ³„ API νΈμ¶μ—λ§ λ΅± ν΄λ§μ„ μ μ©ν•  μ μμµλ‹λ‹¤.
    

**κ¶μ¥ μ‚¬ν•­:** λΉ„μ© ν¨μ¨μ„± λ° λ‚®μ€ μ§€μ—° μ‹κ°„ λ•λ¬Έμ— SQS μ‚¬μ© μ‹ **λ΅± ν΄λ§μ„ ν™μ„±ν™”ν•λ” κ²ƒμ΄ κ°•λ ¥ν κ¶μ¥**λ©λ‹λ‹¤.

---

## π“‚ SQS ν™•μ¥ ν΄λΌμ΄μ–ΈνΈ (SQS Extended Client)

SQS λ©”μ‹μ§€μ μµλ€ ν¬κΈ°λ” **256KB**μ…λ‹λ‹¤. μ΄λ³΄λ‹¤ ν° λ©”μ‹μ§€(μ: λ€μ©λ‰ λ™μμƒ νμΌ, λ°μ΄ν„° μ…‹)λ¥Ό λ³΄λ‚΄λ ¤λ©΄ **SQS ν™•μ¥ ν΄λΌμ΄μ–ΈνΈ** λΌμ΄λΈλ¬λ¦¬(μλ°”μ©)λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤.

![[Pasted image 20250817204359.png]]

### λ™μ‘ μ›λ¦¬

1. **λ€μ©λ‰ νμΌ μ—…λ΅λ“:** μƒμ‚°μλ” SQS ν™•μ¥ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‚¬μ©ν•μ—¬ λ€μ©λ‰ λ©”μ‹μ§€λ¥Ό **S3 λ²„ν‚·**μ— μ—…λ΅λ“ν•©λ‹λ‹¤.
    
2. **ν¬μΈν„° λ©”μ‹μ§€ μ „μ†΅:** SQS νμ—λ” μ‹¤μ  λ€μ©λ‰ λ©”μ‹μ§€ λ€μ‹ , S3 κ°μ²΄λ¥Ό κ°€λ¦¬ν‚¤λ” **μ‘μ€ λ©”νƒ€λ°μ΄ν„°(ν¬μΈν„°)**λ§ λ‹΄κΈ΄ λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.
    
3. **λ©”μ‹μ§€ μμ‹ :** μ†λΉ„μλ” SQS ν™•μ¥ ν΄λΌμ΄μ–ΈνΈλ¥Ό ν†µν•΄ SQS νμ—μ„ ν¬μΈν„° λ©”μ‹μ§€λ¥Ό μμ‹ ν•©λ‹λ‹¤.
    
4. **S3μ—μ„ λ°μ΄ν„° λ΅λ“:** μ†λΉ„μλ” ν¬μΈν„° λ©”μ‹μ§€λ¥Ό μ‚¬μ©ν•μ—¬ S3 λ²„ν‚·μ—μ„ μ‹¤μ  λ€μ©λ‰ λ°μ΄ν„°λ¥Ό λ‹¤μ΄λ΅λ“ν•μ—¬ μ²λ¦¬ν•©λ‹λ‹¤.
    

μ΄ ν¨ν„΄μ€ SQSμ λ©”μ‹μ§€ ν¬κΈ° μ ν•μ„ μ°νν•μ—¬ μ‚¬μ‹¤μƒ **λ¬΄μ ν• ν¬κΈ°μ λ©”μ‹μ§€**λ¥Ό μ²λ¦¬ν•  μ μκ² ν•©λ‹λ‹¤.

---

## β¨οΈ SQS κ°λ°μμ© ν•µμ‹¬ API

|API νΈμ¶|μ„¤λ…|
|---|---|
|`CreateQueue`|νλ¥Ό μƒμ„±ν•©λ‹λ‹¤. `MessageRetentionPeriod`λ¥Ό ν†µν•΄ λ©”μ‹μ§€ λ³΄μ΅΄ κΈ°κ°„μ„ μ„¤μ •ν•  μ μμµλ‹λ‹¤.|
|`DeleteQueue`|νμ™€ ν•΄λ‹Ή νμ λ¨λ“  λ©”μ‹μ§€λ¥Ό ν• λ²μ— μ‚­μ ν•©λ‹λ‹¤.|
|`PurgeQueue`|ν μμ²΄λ” λ‚¨κ²¨λ‘κ³  ν λ‚΄μ λ¨λ“  λ©”μ‹μ§€λ§ μ‚­μ ν•©λ‹λ‹¤.|
|`SendMessage`|νμ— λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•©λ‹λ‹¤. `DelaySeconds` νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•΄ λ©”μ‹μ§€λ³„ μ§€μ—° μ‹κ°„μ„ μ„¤μ •ν•  μ μμµλ‹λ‹¤.|
|`ReceiveMessage`|νμ—μ„ λ©”μ‹μ§€λ¥Ό κ°€μ Έμµλ‹λ‹¤. `MaxNumberOfMessages`λ¥Ό 1~10 μ‚¬μ΄λ΅ μ„¤μ •ν•μ—¬ ν• λ²μ— μ—¬λ¬ λ©”μ‹μ§€λ¥Ό λ°›μ„ μ μμµλ‹λ‹¤.|
|`DeleteMessage`|μ»¨μλ¨Έκ°€ λ©”μ‹μ§€ μ²λ¦¬λ¥Ό μ™„λ£ν• ν›„ νμ—μ„ λ©”μ‹μ§€λ¥Ό μ‚­μ ν•©λ‹λ‹¤.|
|`ChangeMessageVisibility`|λ©”μ‹μ§€ κ°€μ‹μ„± μ ν• μ‹κ°„μ„ μ—°μ¥ν•μ—¬ λ©”μ‹μ§€ μ²λ¦¬ μ‹κ°„μ„ ν™•λ³΄ν•©λ‹λ‹¤.|
|**λ°°μΉ API**|`SendMessageBatch`, `DeleteMessageBatch`, `ChangeMessageVisibilityBatch`λ¥Ό μ‚¬μ©ν•λ©΄ ν• λ²μ API νΈμ¶λ΅ μ—¬λ¬ λ©”μ‹μ§€μ— λ€ν• μ‘μ—…μ„ μν–‰ν•μ—¬ λΉ„μ©μ„ μ κ°ν•  μ μμµλ‹λ‹¤.|