μ΄λ² κ°€μ΄λ“μ—μ„λ” Amazon API Gatewayμ μ¤‘μ”ν• κ΄€λ¦¬ κΈ°λ¥μΈ **λ΅κΉ…**, **λ¨λ‹ν„°λ§**, κ·Έλ¦¬κ³  **μ¤λ¥ μ ν•**μ— λ€ν•΄ μƒμ„Έν μ•μ•„λ³΄κ² μµλ‹λ‹¤. μ΄ κΈ°λ¥λ“¤μ„ ν†µν•΄ APIμ μ„±λ¥μ„ μ¶”μ ν•κ³ , λ¬Έμ λ¥Ό λ””λ²„κΉ…ν•λ©°, μ•μ •μ„±μ„ λ†’μΌ μ μμµλ‹λ‹¤.

---

## π“ 1λ‹¨κ³„: CloudWatchλ¥Ό ν™μ©ν• λ΅κΉ… λ° μ¶”μ 

### π“ CloudWatch Logs

![[Pasted image 20250907194607.png]]

API Gatewayλ” CloudWatch Logsμ™€ ν†µν•©λμ–΄ λ¨λ“  API μ”μ²­κ³Ό μ‘λ‹µμ— λ€ν• μƒμ„Έν• λ΅κ·Έλ¥Ό κΈ°λ΅ν•  μ μμµλ‹λ‹¤.

- **λ΅κ·Έ λ λ²¨**: **INFO**, **DEBUG**, **ERROR** λ“± λ‹¤μ–‘ν• λ΅κ·Έ λ λ²¨μ„ μ„¤μ •ν•  μ μμµλ‹λ‹¤. `DEBUG` λ λ²¨μ€ μ”μ²­/μ‘λ‹µ λ°”λ””λ¥Ό ν¬ν•¨ν• κ°€μ¥ λ§μ€ μ •λ³΄λ¥Ό μ κ³µν•μ§€λ§, **λ―Όκ°ν• λ°μ΄ν„°κ°€ λ…Έμ¶λ  μ μμΌλ―€λ΅ μ£Όμν•΄μ•Ό ν•©λ‹λ‹¤.**
    
- **μ„¤μ •**: λ΅κΉ…μ€ **μ¤ν…μ΄μ§€(Stage)** λ‹¨μ„λ΅ ν™μ„±ν™”λλ©°, κ° APIλ³„λ΅ μ„¤μ •μ„ μ¬μ •μν•  μ μμµλ‹λ‹¤.
    

### π” AWS X-Ray

API Gatewayμ— **X-Ray**λ¥Ό ν™μ„±ν™”ν•λ©΄ μ”μ²­μ΄ API Gatewayλ¥Ό ν†µκ³Όν•μ—¬ λ°±μ—”λ“ μ„λΉ„μ¤(μ: Lambda, EC2)μ— λ„λ‹¬ν•κ³  λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈμ—κ² λμ•„μ¤λ” μ „μ²΄ κ²½λ΅λ¥Ό μ‹κ°μ μΌλ΅ μ¶”μ ν•  μ μμµλ‹λ‹¤. μ΄λ” μ§€μ—° μ‹κ°„μ λ³‘λ© κµ¬κ°„μ„ νμ•…ν•κ³  λ¶„μ‚° μ‹μ¤ν…μ λ¬Έμ λ¥Ό ν•΄κ²°ν•λ” λ° λ§¤μ° μ μ©ν•©λ‹λ‹¤.

---

## π“ 2λ‹¨κ³„: CloudWatch μ§€ν‘(Metrics)λ΅ μ„±λ¥ λ¨λ‹ν„°λ§

API Gatewayλ” CloudWatch Metricsλ¥Ό ν†µν•΄ λ‹¤μ–‘ν• μ„±λ¥ μ§€ν‘λ¥Ό μ κ³µν•©λ‹λ‹¤. μ£Όμ” μ§€ν‘λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

### β³ μ§€μ—° μ‹κ°„(Latency)

- **`IntegrationLatency`**: API Gatewayκ°€ λ°±μ—”λ“μ— μ”μ²­μ„ μ „λ‹¬ν•κ³  μ‘λ‹µμ„ λ°›λ” λ° κ±Έλ¦¬λ” μ‹κ°„μ…λ‹λ‹¤. μ΄λ” **λ°±μ—”λ“ μ„λΉ„μ¤μ μ‘λ‹µ μ†λ„**λ¥Ό μΈ΅μ •ν•λ” μ§€ν‘μ…λ‹λ‹¤.
    
- **`Latency`**: ν΄λΌμ΄μ–ΈνΈκ°€ API Gatewayμ— μ”μ²­μ„ λ³΄λ‚΄κ³  μµμΆ… μ‘λ‹µμ„ λ°›κΈ°κΉμ§€ κ±Έλ¦¬λ” μ „μ²΄ μ‹κ°„μ…λ‹λ‹¤. `IntegrationLatency` μ™Έμ— μΈμ¦, μΊμ‹±, λ§¤ν•‘ λ“± API Gateway λ‚΄λ¶€ μ²λ¦¬ μ‹κ°„μ΄ ν¬ν•¨λ©λ‹λ‹¤.
    

**μ°Έκ³ **: API Gatewayμ μ”μ²­ νƒ€μ„μ•„μ›ƒμ€ **μµλ€ 29μ΄**μ…λ‹λ‹¤. `Latency` λλ” `IntegrationLatency`κ°€ 29μ΄λ¥Ό μ΄κ³Όν•λ©΄ API Gatewayλ” `504 Integration Failure` μ¤λ¥λ¥Ό λ°ν™ν•©λ‹λ‹¤.

### π’Ύ μΊμ‹ ν¨μ¨μ„±

- **`CacheHitCount`**: μΊμ‹μ—μ„ μ‘λ‹µμ΄ λ°ν™λ νμμ…λ‹λ‹¤.
    
- CacheMissCount: μΊμ‹κ°€ λΉ„μ–΄ λ°±μ—”λ“λ¥Ό νΈμ¶ν• νμμ…λ‹λ‹¤.
    
    μΊμ‹ ννΈ μκ°€ λ†’μ„μλ΅ API μΊμ‹κ°€ ν¨μ¨μ μΌλ΅ μ‘λ™ν•κ³  μμμ„ λ‚νƒ€λƒ…λ‹λ‹¤.
    

### π¨ μ¤λ¥ μ§€ν‘

- **`4XXError`**: ν΄λΌμ΄μ–ΈνΈ μΈ΅ μ¤λ¥(Client-side errors)λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤. μλ»λ μ”μ²­ ν•μ‹, κ¶ν• λ¶€μ΅±, λλ” ν• λ‹Ήλ‰ μ΄κ³Όμ™€ κ°™μ€ ν΄λΌμ΄μ–ΈνΈ λ¬Έμ λ΅ μΈν•΄ λ°μƒν•©λ‹λ‹¤.
    
- **`5XXError`**: μ„λ²„ μΈ΅ μ¤λ¥(Server-side errors)λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤. λ°±μ—”λ“ μ„λΉ„μ¤μ λ¬Έμ (μ: Lambda μ¤λ¥, νƒ€μ„μ•„μ›ƒ)λ΅ μΈν•΄ λ°μƒν•©λ‹λ‹¤.
    

---

## π« 3λ‹¨κ³„: μ¤λ΅ν‹€λ§(Throttling) λ° μ¤λ¥ μ½”λ“ μ΄ν•΄ν•κΈ°

### π›‘ μ¤λ΅ν‹€λ§

API Gatewayλ” κ³Όλ„ν• νΈλν”½μΌλ΅λ¶€ν„° APIμ™€ λ°±μ—”λ“λ¥Ό λ³΄νΈν•κΈ° μ„ν•΄ **μ¤λ΅ν‹€λ§**μ„ μ μ©ν•©λ‹λ‹¤.

- **κΈ°λ³Έ κ³„μ • ν•λ„**: κΈ°λ³Έμ μΌλ΅ AWS κ³„μ •μ λ¨λ“  APIλ” μ΄ **10,000 rps(μ΄λ‹Ή μ”μ²­ μ)**μ μ†ν”„νΈ ν•λ„κ°€ μμµλ‹λ‹¤. ν• APIμ— νΈλν”½μ΄ μ§‘μ¤‘λλ©΄ λ‹¤λ¥Έ APIλ„ μν–¥μ„ λ°›μ„ μ μμµλ‹λ‹¤.
    
- **μ¤λ¥ μ½”λ“**: μ¤λ΅ν‹€λ§μ΄ λ°μƒν•λ©΄ ν΄λΌμ΄μ–ΈνΈλ” **`429 Too Many Requests`** μ¤λ¥λ¥Ό λ°›μµλ‹λ‹¤. μ΄λ” ν΄λΌμ΄μ–ΈνΈ μΈ΅ μ¤λ¥λ΅, μ§€μ λ°±μ¤ν”„(exponential backoff)μ™€ κ°™μ€ μ¬μ‹λ„ μ „λµμ„ μ‚¬μ©ν•μ—¬ μ²λ¦¬ν•΄μ•Ό ν•©λ‹λ‹¤.
    
- **μ ν• μ„¤μ •**: APIμ μ¤ν…μ΄μ§€λ‚ λ©”μ„λ“μ— κ°λ³„μ μΌλ΅ μ¤λ΅ν‹€λ§ μ ν•μ„ μ„¤μ •ν•μ—¬ νΉμ • APIκ°€ μ „μ²΄ κ³„μ •μ ν• λ‹Ήλ‰μ„ λ¨λ‘ μ†μ§„ν•λ” κ²ƒμ„ λ°©μ§€ν•  μ μμµλ‹λ‹¤.
    

### β μ£Όμ” μ¤λ¥ μ½”λ“ μ ν•

API Gatewayλ” ν΄λΌμ΄μ–ΈνΈμ™€ λ°±μ—”λ“μ—μ„ λ°μƒν•λ” λ‹¤μ–‘ν• μ¤λ¥μ— λ€ν•΄ ν‘μ¤€ HTTP μ¤λ¥ μ½”λ“λ¥Ό λ°ν™ν•©λ‹λ‹¤.

#### **ν΄λΌμ΄μ–ΈνΈ μ¤λ¥ (`4XX`)**

- **`400 Bad Request`**: μ”μ²­ ν•μ‹μ΄ μλ»λμ—μµλ‹λ‹¤.
    
- **`403 Forbidden`**: API ν‚¤κ°€ μ—†κ±°λ‚ κ¶ν•μ΄ λ¶€μ΅±ν•μ—¬ μ ‘κ·Όμ΄ κ±°λ¶€λμ—μµλ‹λ‹¤.
    
- **`429 Too Many Requests`**: APIμ ν• λ‹Ήλ‰ λλ” μ¤λ΅ν‹€λ§ ν•λ„λ¥Ό μ΄κ³Όν–μµλ‹λ‹¤.
    

#### **μ„λ²„ μ¤λ¥ (`5XX`)**

- **`502 Bad Gateway`**: Lambda ν”„λ΅μ‹ ν†µν•©μ—μ„ Lambda ν•¨μμ μ‘λ‹µ ν•μ‹μ΄ μλ»λμ—μ„ λ• λ°μƒν•©λ‹λ‹¤.
    
- **`504 Integration Failure`**: API Gatewayκ°€ λ°±μ—”λ“λ΅λ¶€ν„° μ‘λ‹µμ„ λ°›κΈ° μ „μ— νƒ€μ„μ•„μ›ƒ(29μ΄)μ΄ λ°μƒν–μµλ‹λ‹¤.
    
- **`503 Service Unavailable`**: λ°±μ—”λ“ μ„λΉ„μ¤(μ: Lambda ν•¨μ)κ°€ μΌμ‹μ μΌλ΅ μ‚¬μ© λ¶κ°€λ¥ν• μƒνƒμ…λ‹λ‹¤.