
이번 아티클에서는 **Amazon Cognito** 서비스에 대해 자세히 알아보겠습니다. Cognito는 웹 및 모바일 애플리케이션 사용자를 위한 **인증, 권한 부여 및 사용자 관리**를 제공하는 서비스입니다. 특히 Cognito가 IAM(Identity and Access Management)과 어떻게 다른지, 그리고 두 가지 주요 구성 요소인 **사용자 풀(User Pool)**과 **자격 증명 풀(Identity Pool)**에 대해 중점적으로 설명합니다.

---

### 1️⃣ Cognito란 무엇인가?

Amazon Cognito는 애플리케이션 사용자의 **인증(Authentication)**과 **권한 부여(Authorization)**를 간편하게 관리하도록 돕는 서비스입니다. 여기서 '사용자'는 AWS 계정 외부에 있는, 즉 애플리케이션에 로그인하려는 일반 고객을 의미합니다.

Cognito는 다음과 같은 상황에 유용합니다.

- **수많은 외부 사용자:** 수백, 수천 명의 모바일 또는 웹 애플리케이션 사용자를 관리해야 할 때.
    
- **다양한 로그인 방식:** 소셜 미디어(Google, Facebook, Apple)나 SAML(Security Assertion Markup Language)과 같은 외부 IdP(Identity Provider)를 통한 로그인을 지원해야 할 때.
    
- **임시 AWS 자격 증명:** 애플리케이션 사용자가 S3 버킷에 파일을 업로드하는 것과 같이 AWS 리소스에 직접 접근해야 할 때.

---

### 2️⃣ Cognito와 IAM의 차이점

많은 분들이 Cognito와 IAM의 역할에 대해 혼동을 느끼지만, 두 서비스는 명확히 다른 목적을 가지고 있습니다.

| |**Amazon Cognito**|**AWS IAM**|
|---|---|---|
|**대상 사용자**|**애플리케이션 사용자.** AWS 계정 외부에 존재하는 일반 고객.|**AWS 계정 사용자.** AWS 리소스에 접근하는 관리자, 개발자, 또는 AWS 서비스.|
|**주요 역할**|애플리케이션 로그인, 회원 가입, 사용자 관리.|AWS 리소스에 대한 접근 제어(누가, 무엇을 할 수 있는지) 관리.|
|**용도 예시**|웹사이트 회원가입 및 로그인, 모바일 앱 로그인.|AWS 콘솔 접속, S3 버킷 관리, Lambda 함수 배포.|

간단히 말해, **Cognito는 애플리케이션 사용자에게 ID를 부여**하고, **IAM은 AWS 리소스에 대한 접근 권한을 관리**합니다.

---

### 3️⃣ Cognito의 주요 구성 요소: 사용자 풀과 자격 증명 풀

Cognito는 두 가지 핵심 서브 서비스로 구성되어 있으며, 이들은 종종 함께 사용됩니다.

#### **1. Cognito 사용자 풀 (User Pool)**

- **역할:** 사용자 디렉토리 역할을 하며, 애플리케이션 사용자의 **회원가입, 로그인 및 관리** 기능을 제공합니다.
    
- **기능:**
    
    - **인증:** 이메일/비밀번호, 전화번호, 소셜 로그인(Google, Facebook 등), SAML 인증 등 다양한 로그인 방식을 지원합니다.
        
    - **사용자 관리:** 사용자 속성, 그룹 관리, MFA(다단계 인증) 등을 설정할 수 있습니다.
        
- **통합:** API Gateway와 Application Load Balancer(ALB)에 직접 통합되어, **사용자 인증이 완료된 요청만** API나 애플리케이션에 전달하도록 할 수 있습니다.

#### **2. Cognito 자격 증명 풀 (Identity Pool)**

- **역할:** 인증된 사용자와 게스트 사용자에게 **임시 AWS 자격 증명**을 제공하여 AWS 리소스에 직접 접근할 수 있도록 돕습니다.
    
- **기능:**
    
    - **임시 자격 증명 발행:** 사용자가 사용자 풀(또는 다른 IdP)을 통해 인증을 마치면, 자격 증명 풀은 **일시적인 IAM 역할**을 부여합니다.
        
    - **AWS 리소스 접근:** 이 임시 자격 증명을 사용하여 S3 버킷에 파일 업로드, DynamoDB 테이블에 데이터 쓰기 등 특정 AWS 리소스에 대한 작업을 수행할 수 있습니다.
        
- **통합:** **사용자 풀과 연동**되어, 사용자 풀에서 로그인한 사용자에게 자격 증명 풀을 통해 AWS 리소스 접근 권한을 부여하는 워크플로우를 구축할 수 있습니다.

**요약하자면,** 사용자 풀은 로그인 기능을, 자격 증명 풀은 로그인 후 AWS 리소스 접근 권한을 제공하는 역할을 합니다. Cognito는 이 두 기능을 결합하여 애플리케이션의 사용자 인증 및 권한 부여 문제를 포괄적으로 해결해줍니다.