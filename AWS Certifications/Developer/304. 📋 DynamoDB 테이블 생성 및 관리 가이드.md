
AWS DynamoDB는 서버리스 NoSQL 데이터베이스 서비스로, 복잡한 데이터베이스 서버 관리 없이 테이블을 생성하고 데이터를 저장할 수 있습니다. 이 가이드는 DynamoDB 콘솔을 사용해 테이블을 만들고, 다양한 기본 키 유형을 활용하여 항목(Item)을 추가하는 과정을 상세히 설명합니다.

---

## 1. DynamoDB 테이블 생성하기

DynamoDB에서는 데이터베이스를 생성하는 대신, 바로 테이블을 생성합니다.

1. AWS 콘솔에서 DynamoDB 서비스로 이동합니다.
    
2. `테이블 생성(Create table)`을 클릭합니다.
    
3. **테이블 이름(Table name)**을 `Users`로 지정합니다.
    
4. **파티션 키(Partition key)**에 `user_ID`를 입력하고, 데이터 타입은 `String`으로 설정합니다. 이번 예시에서는 정렬 키(Sort key)를 비워 둡니다.
    
5. `사용자 지정 설정(Customize settings)`을 선택하여 고급 설정을 확인합니다.
    
    - **테이블 클래스(Table class)**: 기본값인 `DynamoDB Standard`를 유지합니다. 읽기/쓰기 빈도가 낮은 데이터의 경우 `DynamoDB Standard-IA`를 선택하여 비용을 절감할 수 있습니다.
        
    - **용량 모드(Capacity mode)**: `온디맨드(On-demand)`와 `프로비저닝(Provisioned)` 두 가지 모드가 있습니다. 프로비저닝 모드는 미리 읽기/쓰기 용량을 지정하는 방식이며, 프리 티어(Free Tier)를 활용할 수 있습니다. 여기서는 `프로비저닝`을 선택하고, 읽기 및 쓰기 용량 단위를 각각 `2`로 설정합니다.
        
    - `테이블 생성(Create table)`을 클릭하여 테이블 생성을 완료합니다.

---

## 2. 단일 파티션 키를 사용한 항목(Item) 관리

`Users` 테이블은 `user_ID`라는 단일 파티션 키를 사용합니다. 파티션 키는 테이블 내의 모든 항목에서 **고유(unique)**해야 합니다.

### **항목 생성하기**

1. `Users` 테이블로 이동하여 `항목 탐색(Explore items)`을 클릭합니다.
    
2. `항목 생성(Create item)`을 선택합니다.
    
3. `user_ID`에 `John123`을 입력합니다.
    
4. `새 속성 추가(Add new attribute)`를 클릭하여 `first_name`과 `last_name` 속성을 각각 추가하고 값을 입력합니다.
    
5. `항목 생성(Create item)`을 클릭하여 저장합니다.

### **스키마 유연성**

DynamoDB의 NoSQL 특성상, 각 항목의 속성(Attribute) 구성이 달라도 문제없습니다.

- `Alice456`이라는 새로운 항목을 생성하면서 `last_name` 속성은 생략하고, `age`라는 새로운 `Number` 타입 속성을 추가할 수 있습니다.
    
- 이 경우, `John123` 항목에는 `age` 속성이 없으며 `Alice456` 항목에는 `last_name` 속성이 없지만, DynamoDB는 이를 허용하고 정상적으로 저장합니다.
    

|`user_ID`|`first_name`|`last_name`|`age`|
|---|---|---|---|
|`John123`|`John`|`Doe`|_(null)_|
|`Alice456`|`Alice`|_(null)_|41|

이러한 유연성은 데이터 모델이 시간에 따라 변하거나, 모든 항목이 동일한 구조를 가질 필요가 없을 때 매우 유용합니다.

---

## 3. 파티션 키와 정렬 키를 사용한 테이블 관리

대부분의 경우, 복합 기본 키(Composite Primary Key)가 필요합니다. `UserPosts`라는 새로운 테이블을 만들어 이 개념을 실습해 보겠습니다.

### **테이블 생성**

1. 새 테이블 이름 `UserPosts`를 입력합니다.
    
2. **파티션 키**에 `user_ID`를, **정렬 키(Sort key)**에 `post_TS` (게시물 타임스탬프)를 입력하고, 모두 `String` 타입으로 설정합니다.
    
3. 이전과 동일하게 용량 모드를 `프로비저닝`으로 설정하고 테이블을 생성합니다.
    

### **복합 키로 항목 생성하기**

`UserPosts` 테이블에서는 **`user_ID`와 `post_TS`의 조합이 고유해야 합니다.**

1. `항목 생성(Create item)`을 클릭합니다.
    
2. `user_ID`에 `John123`, `post_TS`에 `2021-10-09T12:34:09Z`를 입력합니다.
    
3. `content`라는 새로운 속성을 추가하고 게시물 내용을 입력합니다.
    
4. `항목 생성(Create item)`을 클릭합니다.
    

이제 동일한 `user_ID`인 `John123`으로 새로운 게시물을 추가해 보겠습니다.

1. 다시 `항목 생성(Create item)`을 클릭합니다.
    
2. `user_ID`에 `John123`을 다시 입력하고, `post_TS`에는 `2021-11-04T...`와 같이 이전과 다른 타임스탬프를 입력합니다.
    
3. `content` 속성에 새로운 게시물 내용을 입력하고 저장합니다.

이 경우, `user_ID`는 동일하지만 `post_TS`가 다르므로 새로운 항목으로 정상적으로 저장됩니다. DynamoDB는 `user_ID`를 기준으로 데이터를 파티션(분할)하고, 동일한 파티션 키 내에서는 `post_TS`를 기준으로 데이터를 정렬합니다. 이 구조를 통해 특정 사용자의 모든 게시물을 효율적으로 조회하고 시간 순으로 정렬할 수 있습니다.

**주의 사항**: 만약 `John123`이 게시한 게시물이 1만 개라면, 그 모든 데이터는 동일한 파티션에 저장되어 데이터 불균형(data skew)을 초래할 수 있습니다. 이러한 경우를 대비하여 파티션 키를 신중하게 설계하는 것이 매우 중요합니다.