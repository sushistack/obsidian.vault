
AWS 람다 함수 URL은 복잡한 설정 없이 람다 함수를 웹 엔드포인트로 노출할 수 있는 강력한 기능입니다. 이 가이드에서는 람다 함수를 생성하고, 버전 및 별칭을 만든 다음, 함수 URL을 통해 공개적으로 액세스하는 방법을 단계별로 설명합니다.

---

## 1. 람다 함수 생성하기

가장 먼저, 간단한 람다 함수를 생성합니다.

1. AWS Management Console에서 Lambda 서비스로 이동합니다.
    
2. `함수 생성(Create function)`을 클릭합니다.
    
3. 함수 이름을 **`lambda-demo-url`**로 지정합니다.
    
4. 런타임은 **`Python 3.9`**를 선택합니다.
    
5. `함수 생성(Create function)` 버튼을 눌러 함수를 생성합니다.

생성된 함수는 다음과 같이 HTTP 응답을 반환하도록 코드가 미리 작성되어 있습니다.

```Python
import json

def lambda_handler(event, context):
    return {
        'statusCode': 200,
        'body': json.dumps('Hello from Lambda!')
    }
```

이 코드는 성공적인 HTTP 응답(상태 코드 200)과 "Hello from Lambda!"라는 메시지를 반환합니다.

## 2. 함수 테스트 및 버전 발행

함수 URL을 적용하기 전에, 함수가 올바르게 작동하는지 확인하고 버전을 발행해야 합니다.

1. 함수 페이지에서 `테스트(Test)` 탭을 선택합니다.
    
2. `새 테스트 이벤트 생성(New test event)`을 선택하고, 이벤트 이름을 `test`로 지정한 후 `저장(Save)`합니다.
    
3. `테스트(Test)` 버튼을 누르면, 실행 결과에 **`Status code: 200`**과 **`body: "Hello from Lambda!"`**가 표시되는 것을 확인할 수 있습니다.
    
4. 이제 코드를 배포 버전으로 고정하기 위해 **`작업(Actions)`** 메뉴에서 **`새 버전 발행(Publish new version)`**을 선택합니다.
    
5. 버전 설명을 `version 1`로 입력하고 `게시(Publish)`를 클릭합니다. 이제 `Version 1`이 생성되었습니다.

---

## 3. 별칭(Alias) 생성 및 함수 URL 연결

함수 URL은 특정 버전이 아닌 **별칭** 또는 **$LATEST** 버전에만 연결할 수 있습니다. 운영 환경에서는 별칭을 사용하여 트래픽을 관리하는 것이 일반적입니다.

1. 함수 페이지 왼쪽 메뉴에서 **`별칭(Aliases)`**를 선택합니다.
    
2. **`별칭 생성(Create alias)`**을 클릭합니다.
    
3. 별칭 이름을 `dev`로 지정하고, 가리키는 버전은 `Version 1`을 선택합니다.
    
4. `저장(Save)`을 클릭하여 별칭을 생성합니다.
    
5. 이제 왼쪽 메뉴에서 **`함수 URL(Function URL)`**을 선택합니다.
    
6. `함수 URL 생성(Create function URL)`을 클릭합니다.

---

## 4. 함수 URL 구성 및 공개 액세스 설정

함수 URL을 생성할 때 인증 유형을 지정하여 접근 권한을 설정할 수 있습니다.

- **인증 유형(AuthType):**
    
    - **NONE**: 인증 없이 누구나 함수 URL에 접근할 수 있도록 허용합니다. (이번 실습에서는 이 옵션을 선택합니다.)
        
    - **IAM**: IAM 권한이 있는 사용자만 접근할 수 있도록 제한합니다.
        
- **CORS 구성**: 다른 도메인에서 함수를 호출해야 하는 경우, 이 설정을 통해 CORS를 허용할 수 있습니다. 이번 실습에서는 따로 설정하지 않습니다.
    

`AuthType`을 **`NONE`**으로 선택하면, AWS는 자동으로 누구나 함수를 호출할 수 있는 **리소스 기반 정책**을 생성하여 함수에 연결합니다. 이 정책은 `lambda:InvokeFunctionUrl` 권한을 부여하며, 다음 코드와 유사한 형태로 자동 추가됩니다.

```JSON
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": "*",
      "Action": "lambda:InvokeFunctionUrl",
      "Resource": "arn:aws:lambda:us-east-1:123456789012:function:lambda-demo-url"
    }
  ]
}
```

`저장(Save)`을 클릭하면, `dev` 별칭에 연결된 고유한 함수 URL이 생성됩니다. 이 URL은 영구적으로 변하지 않습니다.

## 5. 함수 URL을 통한 접근 확인

생성된 함수 URL을 복사하여 새 웹 브라우저 탭에 붙여넣으면, 화면에 **`Hello from Lambda!`** 메시지가 표시되는 것을 확인할 수 있습니다. 이로써 복잡한 설정 없이도 람다 함수가 HTTP 엔드포인트로 성공적으로 노출된 것을 알 수 있습니다.

참고로, 함수 URL은 특정 **별칭** 또는 **$LATEST** 버전(게시되지 않은 최신 버전)에만 연결할 수 있으며, 이미 게시된 개별 버전에는 직접 연결할 수 없습니다.

이처럼 람다 함수 URL은 웹훅이나 간단한 API 엔드포인트를 빠르게 구축할 때 매우 유용한 기능입니다. 