
DynamoDB는 단순한 키-값 데이터베이스를 넘어, 다양한 보안 및 운영 기능을 제공하여 엔터프라이즈 애플리케이션에 적합합니다. 이 아티클에서는 DynamoDB의 주요 보안 기능, 백업, 전역 테이블, 로컬 개발 환경, 그리고 중요한 세부 접근 제어(Fine-Grained Access Control)에 대해 자세히 알아보겠습니다.

---

## 🔒 DynamoDB 주요 보안 기능

### **1. 네트워크 보안**

- **VPC 엔드포인트**: DynamoDB에 접근할 때 퍼블릭 인터넷을 사용하지 않고, 트래픽을 VPC(Virtual Private Cloud) 내부에 유지할 수 있습니다. 이는 데이터가 AWS 내부 네트워크를 통해 안전하게 이동하도록 보장하여 보안을 강화합니다.

### **2. 접근 제어**

- **IAM(Identity and Access Management)**: DynamoDB에 대한 모든 접근은 AWS IAM을 통해 세밀하게 제어됩니다. IAM 사용자, 그룹, 역할에 대한 정책을 정의하여 특정 DynamoDB 테이블, 아이템 또는 속성에 대한 접근 권한을 관리할 수 있습니다.

### **3. 데이터 암호화**

- **미사용 데이터 암호화(Encryption at Rest)**: DynamoDB에 저장된 데이터는 AWS KMS(Key Management Service)를 사용하여 자동으로 암호화됩니다. 이는 데이터가 디스크에 저장될 때 보호되도록 보장합니다.
    
- **전송 중 데이터 암호화(Encryption in Transit)**: DynamoDB와 클라이언트 간의 모든 데이터 전송은 SSL/TLS를 통해 암호화됩니다.

---

## 📊 백업 및 복구 기능

DynamoDB는 데이터 손실에 대비하여 두 가지 강력한 백업 및 복구 기능을 제공합니다.

- **PITR(Point-in-Time Recovery)**: 지정 시간 복구 기능은 활성화하는 즉시 테이블의 연속적인 백업을 제공합니다. 지난 35일 이내의 특정 시점으로 데이터를 복원할 수 있습니다.
    
    - **특징**: 백업 프로세스가 테이블 성능에 영향을 주지 않습니다.
        
- **온디맨드 백업(On-Demand Backup)**: 사용자가 원하는 시점에 수동으로 테이블의 스냅샷 백업을 생성할 수 있습니다. 생성된 백업은 언제든지 새 테이블로 복원할 수 있습니다.

---

## 🌎 글로벌 테이블(Global Tables)

**글로벌 테이블**은 여러 AWS 리전에 걸쳐 **다중 활성(multi-active), 완전 복제(fully replicated)** 테이블을 구축하는 기능입니다. 이를 통해 전 세계 사용자에게 낮은 지연 시간으로 데이터를 제공하고, 재해 복구(DR)를 위한 솔루션을 쉽게 구현할 수 있습니다.

- **동작 방식**:
    
    - 사용자가 한 리전의 테이블에 데이터를 쓰면, 해당 변경 사항은 다른 모든 리전의 복제본 테이블에 자동으로 전파됩니다.
        
    - **활성화 조건**: 글로벌 테이블을 생성하려면 원본 테이블에 **DynamoDB 스트림(Streams)**이 활성화되어 있어야 합니다. 스트림이 데이터 변경 사항을 캡처하여 다른 리전으로 복제하는 데 사용됩니다.

---

## 💻 DynamoDB 로컬(Local)

**DynamoDB 로컬**은 DynamoDB 웹 서비스의 시뮬레이션을 로컬 컴퓨터에서 실행할 수 있도록 하는 도구입니다.

- **용도**: DynamoDB 테이블을 직접 사용하지 않고도 애플리케이션을 개발하고 테스트할 수 있어, 비용을 절감하고 개발 속도를 높일 수 있습니다.

---

## 🗺️ 데이터 마이그레이션 서비스

- **AWS Database Migration Service (DMS)**: 다른 데이터베이스(예: MongoDB, Oracle, MySQL)에서 DynamoDB로, 또는 DynamoDB에서 다른 데이터베이스로 데이터를 쉽게 마이그레이션할 수 있는 서비스입니다.

---

## 🔐 세부 접근 제어(Fine-Grained Access Control)

웹 또는 모바일 애플리케이션의 최종 사용자가 DynamoDB에 직접 접근해야 할 경우, 모든 사용자에게 고정된 IAM 자격 증명을 부여하는 것은 보안상 위험합니다. 이 문제를 해결하기 위해 **연동 로그인(Federated Login)**과 IAM 정책의 조합을 사용합니다.

![[Pasted image 20250906195815.png]]

### **1. 연동 로그인(Federated Login)**

- **과정**: 사용자는 Cognito User Pool, Google, Facebook 등과 같은 **자격 증명 공급자(Identity Provider)**를 통해 로그인합니다.
    
- **임시 자격 증명 획득**: 로그인에 성공하면, 자격 증명 공급자를 통해 임시 AWS 자격 증명(Temporary Credentials)을 얻습니다. 이 임시 자격 증명은 보안이 훨씬 강화됩니다.

### **2. IAM 정책 및 조건(Conditions)**

임시 자격 증명은 **특정 IAM 역할**과 연결됩니다. 이 역할의 IAM 정책에 **조건(Condition)**을 추가하여 사용자가 접근할 수 있는 데이터 범위를 제한할 수 있습니다.

- **주요 조건 변수**:
    
    - **`dynamodb:LeadingKeys`**: 아이템의 **파티션 키(Primary Key)**를 기준으로 접근을 제한합니다. 예를 들어, 사용자는 자신의 `user_id`와 동일한 파티션 키를 가진 아이템에만 접근할 수 있습니다.
        
        - **예시 정책**: `dynamodb:LeadingKeys`에 `"${aws:userid}"` 또는 `"${dynamodb:IdentityId}"`와 같은 변수를 사용하여, 로그인한 사용자의 ID와 파티션 키 값이 일치하는 아이템에만 접근을 허용합니다.
            
- **`dynamodb:Attributes`**: 아이템의 **특정 속성(Attributes)**에 대한 접근을 제한합니다. 예를 들어, 사용자가 `SSN`(주민등록번호)과 같은 민감한 속성은 볼 수 없도록 설정할 수 있습니다.

**`dynamodb:LeadingKeys` 조건이 포함된 IAM 정책 예시**:

```JSON
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "dynamodb:GetItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem"
      ],
      "Resource": "arn:aws:dynamodb:REGION:ACCOUNT_ID:table/MyTable",
      "Condition": {
        "ForAllValues:StringEquals": {
          "dynamodb:LeadingKeys": [
            "${dynamodb:IdentityId}"
          ]
        }
      }
    }
  ]
}
```

위 정책은 `MyTable`에 대해 `PutItem`, `UpdateItem` 등의 쓰기 작업을 허용하되, **파티션 키 값(`dynamodb:LeadingKeys`)이 현재 사용자의 ID(`dynamodb:IdentityId`)와 동일한 아이템에만 허용**하도록 제한합니다. 이는 사용자가 **자신이 소유한 데이터에만** 접근하도록 보장하는 강력한 방법입니다.