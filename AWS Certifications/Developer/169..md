
Amazon ECS(Elastic Container Service)는 AWS에서 Docker 컨테이너를 쉽게 배포, 관리, 확장할 수 있게 해주는 완전 관리형 컨테이너 오케스트레이션 서비스입니다. ECS는 다양한 요구사항에 맞춰 두 가지 **시작 유형(Launch Type)**을 제공합니다.

---

### 1. ECS 시작 유형 (Launch Types)

#### EC2 시작 유형

![[Pasted image 20250810190459.png]]

- **개념:** 컨테이너를 실행할 EC2 인스턴스(서버)를 직접 관리해야 하는 방식입니다.
    
- **작동 방식:**
    
    1. 사용자가 ECS 클러스터에 EC2 인스턴스를 프로비저닝합니다. 이 인스턴스들은 **ECS 에이전트**를 실행하고 ECS 서비스에 등록됩니다.
    
    2. ECS는 이 인스턴스 위에 컨테이너(ECS 태스크)를 배치합니다.
    
- **특징:** 인프라를 직접 제어하고 최적화할 수 있어 커스터마이징의 자유도가 높지만, 서버 관리(패치, 스케일링 등)의 책임은 사용자에게 있습니다.
    

#### Fargate 시작 유형

![[Pasted image 20250810190553.png]]

- **개념:** 서버리스 컨테이너 플랫폼으로, EC2 인스턴스를 직접 관리할 필요가 없습니다.
    
- **작동 방식:**
    
    1. 사용자는 CPU와 메모리 요구사항만 정의합니다.

    2. AWS가 이 요구사항에 맞춰 컨테이너를 실행할 컴퓨팅 인프라를 자동으로 프로비저닝하고 관리합니다.

- **특징:** 인프라 관리에 대한 부담이 전혀 없어 개발에 집중할 수 있습니다. 사용한 만큼만 비용을 지불하는 종량제 모델이며, 시험에서 가장 많이 다루는 주제 중 하나입니다.
    

---

### 2. ECS 태스크를 위한 IAM 역할 🔑

ECS는 두 가지 유형의 IAM 역할을 사용하여 보안을 관리합니다.

#### EC2 인스턴스 프로파일 (EC2 Instance Profile)

- **적용 대상:** **EC2 시작 유형**에서만 사용됩니다.

- **역할:** ECS 에이전트가 AWS 서비스와 상호 작용하는 데 필요한 권한을 부여합니다. 예를 들어, ECR에서 Docker 이미지를 가져오거나, CloudWatch Logs에 컨테이너 로그를 전송하는 등의 작업에 사용됩니다.


#### ECS 태스크 역할 (ECS Task Role)

- **적용 대상:** **EC2 및 Fargate 시작 유형** 모두에서 사용됩니다.

- **역할:** 컨테이너(ECS 태스크)가 AWS API를 호출할 때 필요한 권한을 부여합니다. 각 태스크 정의(Task Definition)에 특정 역할을 할당하여, 태스크가 S3, DynamoDB 등 다른 AWS 서비스에 접근하는 것을 제어할 수 있습니다. 예를 들어, A 태스크는 S3에 접근하고 B 태스크는 DynamoDB에 접근하는 식으로 권한을 분리할 수 있습니다.


---

### 3. 로드 밸런서 통합 🌐

ECS 클러스터의 컨테이너를 외부에 노출하려면 로드 밸런서를 사용합니다.

- **Application Load Balancer (ALB):** HTTP/HTTPS 트래픽을 처리하며, 대부분의 웹 애플리케이션에 적합합니다. Fargate와 완벽하게 통합됩니다.

- **Network Load Balancer (NLB):** 매우 높은 처리량과 고성능이 요구되는 TCP/UDP 기반 트래픽에 적합합니다.

- **Classic Load Balancer (CLB):** 구세대 로드 밸런서로, Fargate와 통합되지 않고 기능이 제한적이므로 권장되지 않습니다.


---

### 4. 데이터 지속성: EFS (Elastic File System) 💾

컨테이너는 기본적으로 임시적(ephemeral)이므로, 데이터를 영구적으로 저장하려면 외부 스토리지 볼륨이 필요합니다.

- **EFS:** ECS에서 **EFS(Elastic File System)**를 사용하면 컨테이너에 파일 시스템을 쉽게 마운트할 수 있습니다. EFS는 네트워크 파일 시스템이므로, 여러 컨테이너가 동일한 파일 시스템을 공유할 수 있습니다.
    
- **EFS + Fargate:** EFS는 서버리스 서비스이므로, EFS와 Fargate를 함께 사용하면 컨테이너 인프라와 스토리지 모두를 관리할 필요가 없는 완벽한 서버리스 아키텍처를 구축할 수 있습니다. EFS는 다중 AZ를 지원하여 컨테이너가 다른 AZ에 있더라도 데이터를 공유할 수 있습니다.