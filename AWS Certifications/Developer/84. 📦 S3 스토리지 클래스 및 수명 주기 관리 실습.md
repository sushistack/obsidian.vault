
Amazon S3의 다양한 스토리지 클래스를 직접 설정하고, **수명 주기 규칙(Lifecycle Rule)**을 사용하여 객체 클래스를 자동으로 전환하는 방법을 실습해 보겠습니다.

---

### 1단계: S3 객체 업로드 시 스토리지 클래스 지정하기 💾

객체를 S3에 업로드할 때 원하는 스토리지 클래스를 직접 선택할 수 있습니다.

1. **버킷 생성:** `s3-storage-classes-demos-2022`라는 이름의 새 버킷을 생성합니다.
2. **파일 업로드:** `coffee.JPEG` 파일을 버킷에 업로드합니다.
3. **스토리지 클래스 선택:** 업로드 과정의 `속성(Properties)` 단계에서 `스토리지 클래스(Storage Class)`를 선택할 수 있습니다.
    - 기본값은 **`S3 Standard`**입니다.
    - `Intelligent-Tiering`, `Standard-IA`, `One Zone-IA`, `Glacier` 등 다양한 옵션이 있습니다. 여기서는 `S3 Standard-IA`를 선택하고 업로드를 완료합니다.

**결과 확인:** 버킷에 업로드된 `coffee.JPEG` 객체의 스토리지 클래스가 `S3 Standard-IA`로 설정된 것을 볼 수 있습니다.

---

### 2단계: 업로드된 객체의 스토리지 클래스 변경하기 🔄

이미 업로드된 객체의 스토리지 클래스도 언제든지 수동으로 변경할 수 있습니다.

1. 버킷에서 `coffee.JPEG` 객체를 선택합니다.
2. `속성(Properties)` 탭으로 이동하여 `스토리지 클래스(Storage Class)` 섹션의 `편집(Edit)`을 클릭합니다.
3. `One Zone-IA`와 같이 원하는 스토리지 클래스를 선택한 후 변경 사항을 저장합니다.

**결과 확인:** 객체의 스토리지 클래스가 `S3 One Zone-IA`로 변경된 것을 확인할 수 있습니다. 이처럼 필요에 따라 수동으로 스토리지 클래스를 유연하게 변경할 수 있습니다.

---

### 3단계: 수명 주기 규칙으로 스토리지 클래스 자동 전환하기 ⏳

데이터의 접근 패턴에 따라 스토리지 클래스를 자동으로 전환하도록 **수명 주기 규칙**을 설정할 수 있습니다. 이는 비용 최적화에 매우 효과적입니다.

1. 버킷의 **관리(Management)** 탭으로 이동합니다.
2. `수명 주기 규칙(Lifecycle rules)` 섹션에서 `수명 주기 규칙 생성(Create lifecycle rule)`을 클릭합니다.
3. **규칙 이름:** `DemoRule`
4. **규칙 범위:** `버킷의 모든 객체에 적용(Apply to all objects in the bucket)`을 선택합니다.
5. **규칙 작업:**
    
    - `현재 버전의 객체 이동(Transition current versions of objects between storage classes)`을 선택합니다.
    - 객체가 생성된 후 **30일**이 지나면 `S3 Standard-IA`로 이동하도록 규칙을 추가합니다.
    - 객체가 생성된 후 **60일**이 지나면 `S3 Intelligent-Tiering`으로 이동하도록 규칙을 추가합니다.
    - 객체가 생성된 후 **180일**이 지나면 `Glacier Flexible Retrieval`로 이동하도록 규칙을 추가합니다.
6. 설정한 규칙을 확인하고 `규칙 생성(Create rule)`을 클릭하여 저장합니다.
    

**결과 확인:** 이제 버킷에 있는 모든 객체는 이 규칙에 따라 지정된 기간이 지나면 자동으로 다른 스토리지 클래스로 전환됩니다. 수명 주기 규칙을 사용하면 수동으로 객체 클래스를 변경하는 번거로움 없이 비용을 효과적으로 관리할 수 있습니다.