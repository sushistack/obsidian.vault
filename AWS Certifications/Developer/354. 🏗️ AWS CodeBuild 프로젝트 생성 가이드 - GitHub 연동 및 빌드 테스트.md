
안녕하세요! AWS CodeBuild를 사용하여 애플리케이션의 테스트를 자동화하는 방법에 대해 상세히 알아보겠습니다. 이 가이드는 **"Congratulations"** 메시지가 배포 후에도 항상 표시되는지 확인하기 위한 테스트용 프로젝트를 만드는 과정을 다룹니다.

---

## 🚀 1. CodeBuild 프로젝트 생성 시작하기

AWS 콘솔에서 CodeBuild 서비스로 이동합니다. Build 프로젝트 메뉴 아래에서 **'새 프로젝트 생성'** 버튼을 클릭하여 프로젝트 생성을 시작합니다.

### **프로젝트 기본 설정**

|설정 항목|설명|
|---|---|
|**프로젝트 이름**|`MyFirstBuild`와 같이 프로젝트를 식별할 수 있는 이름을 지정합니다.|
|**설명 (선택 사항)**|프로젝트에 대한 간략한 설명을 추가할 수 있습니다.|
|**빌드 배지/태그**|이 예제에서는 사용하지 않습니다. 필요에 따라 설정할 수 있습니다.|

---

## 🔒 2. 소스(Source) 연동하기

CodeBuild는 다양한 소스 저장소와 연동할 수 있습니다. 이 가이드에서는 **GitHub**를 사용하며, OAuth 인증 방식을 통해 연결합니다.

1. **소스 공급자 선택:** `GitHub`를 선택합니다.
    
2. **연결 방식:** `OAuth`를 선택한 후, **'GitHub에 연결'** 버튼을 클릭합니다.
    
3. **권한 부여:** 새 창이 열리면 AWS CodeSuite에 GitHub 저장소에 대한 접근 권한을 부여합니다.
    
4. **연결 확인:** 인증이 완료되면 GitHub 계정과 CodeBuild가 성공적으로 연결됩니다.

### **저장소 설정**

연결이 완료되면 GitHub 저장소에서 빌드할 프로젝트를 선택합니다.

- **저장소 선택:** 검색 필드에 `nodejs app`을 입력하여 해당 저장소를 찾고 선택합니다.
    
- **빌드 트리거 설정:** `웹후크 재구축` 옵션을 활성화하여 코드 변경사항이 푸시(PUSH)될 때마다 자동으로 빌드가 시작되도록 설정합니다.
    
    - **이벤트 유형:** `PUSH` 이벤트에 대해서만 필터링 그룹을 설정합니다. (예: Pull Request 등 다른 이벤트는 제외)
        
    - **참고:** Pull Request가 생성될 때마다 테스트를 실행하는 것도 유효한 사용 사례입니다. 하지만 현재는 PUSH 이벤트에 집중합니다.
        

---

## 💻 3. 환경(Environment) 설정하기

빌드가 실행될 환경을 구성합니다. 여기서는 관리형 이미지를 사용하여 별도의 커스터마이징 없이 표준 환경을 설정합니다.

### **환경 설정 세부사항**

|설정 항목|설명|
|---|---|
|**환경 이미지**|`관리형 이미지`를 선택합니다.|
|**운영 체제**|`Ubuntu`를 선택합니다.|
|**런타임**|`Standard`를 선택합니다.|
|**이미지**|가장 최신 버전인 `standard:7.0`을 선택하고, `이 런타임 버전에 항상 최신 이미지 사용` 옵션을 활성화합니다.|
|**서비스 역할**|CodeBuild가 AWS 리소스에 접근하기 위한 역할을 생성합니다. 새로운 역할을 생성하며, 이름은 `CodeBuildDemoServiceRole`로 지정합니다.|

### **추가 설정 (Additional Configuration)**

- **타임아웃:** 기본값은 1시간이지만, 빌드 시간을 제어하기 위해 10분 등으로 조정할 수 있습니다.
    
- **VPC:** 빌드가 VPC 내부에서 실행되어야 할 경우, 특정 VPC를 선택할 수 있습니다. 이 기능을 통해 프라이빗 네트워크 내의 데이터베이스 등에 접근할 수 있지만, 이 예제에서는 사용하지 않습니다.
    
- **컴퓨팅:** 빌드에 사용될 컴퓨팅 자원(메모리, vCPU)을 선택합니다. 기본값(`3GB 메모리, 2 vCPU`)으로 충분합니다.
    
- **환경 변수:** 필요한 경우 환경 변수를 추가할 수 있습니다.
    

---

## 📝 4. Buildspec 파일 설정하기

CodeBuild는 **`buildspec.yaml`** 파일을 통해 빌드 및 테스트 명령을 실행합니다. 이 파일은 소스 코드의 루트 디렉터리에 위치해야 합니다.

- **Buildspec 설정:** `Buildspec 파일 사용` 옵션을 선택합니다.
    
- **파일 이름:** `buildspec.yaml`로 지정합니다.
    

**💡 중요:** 현재 단계에서는 아직 `buildspec.yaml` 파일을 소스 코드에 추가하지 않았기 때문에, 빌드를 실행하면 파일이 없다는 오류가 발생합니다. 이는 의도된 결과이며, 다음 단계에서 이 파일을 추가할 예정입니다.

---

## 📦 5. 아티팩트 및 로그 설정

- **아티팩트(Artifacts):** 빌드 결과물을 S3 버킷에 저장할지 여부를 설정합니다. 현재는 빌드하는 것이 없으므로 **'아티팩트 없음'** 으로 설정합니다.
    
- **로그:** 빌드 로그를 CloudWatch Logs 또는 S3에 저장하도록 설정할 수 있습니다.
    

모든 설정을 마치면 **'빌드 프로젝트 생성'** 버튼을 클릭하여 프로젝트를 완성합니다.

---

## 💥 6. 빌드 실행 및 실패 확인 (의도된 결과)

프로젝트가 생성되면, **'빌드 시작'** 버튼을 클릭하여 첫 빌드를 실행합니다.

- **빌드 진행 상황:** 빌드가 시작되고 진행 상황을 모니터링할 수 있습니다.
    
- **예상된 실패:** 위에서 언급했듯이, `buildspec.yaml` 파일이 아직 없기 때문에 빌드는 **실패**합니다.
    
    - **오류 메시지:** 로그를 확인하면, **`buildspec.yaml` 파일이 존재하지 않아 빌드 사양을 찾을 수 없다는 오류 메시지**를 확인할 수 있습니다.
        

이것으로 CodeBuild 프로젝트의 초기 설정이 완료되었습니다. 다음 단계에서는 이 프로젝트를 성공적으로 실행하기 위해 `buildspec.yaml` 파일을 추가하는 방법을 배우게 될 것입니다.