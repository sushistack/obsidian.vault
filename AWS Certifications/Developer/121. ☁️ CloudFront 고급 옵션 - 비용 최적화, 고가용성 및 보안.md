
Amazon CloudFront는 콘텐츠 전송을 최적화하고 보안을 강화하기 위한 여러 고급 옵션을 제공합니다. 이들은 비용 관리, 고가용성, 데이터 보안 등 다양한 측면에서 중요한 역할을 합니다.

---

### 1. 요금 및 가격 등급 (Pricing and Price Classes) 💰

CloudFront의 요금은 엣지 로케이션의 지리적 위치에 따라 다릅니다. 일부 지역은 네트워크 비용이 높아 다른 지역보다 요금이 비쌉니다. 이 비용 차이를 관리하기 위해 CloudFront는 세 가지 **가격 등급(Price Classes)**을 제공합니다.

- **`Price Class All`:** 전 세계 모든 엣지 로케이션을 사용합니다. 최고의 성능을 제공하지만, 가장 비싼 요금이 적용됩니다.

- **`Price Class 200`:** 가장 비싼 지역(예: 인도, 호주)을 제외한 대부분의 엣지 로케이션을 사용합니다. 성능과 비용 사이의 균형을 맞출 수 있습니다.

- **`Price Class 100`:** 가장 저렴한 지역(예: 미국, 캐나다, 유럽)의 엣지 로케이션만 사용합니다. 비용을 최소화하지만, 이 지역 외의 사용자에게는 지연 시간이 늘어날 수 있습니다.

![[Pasted image 20250809235123.png]]

이러한 가격 등급을 통해 애플리케이션의 사용자 분포와 예산에 맞춰 CloudFront의 지리적 범위를 유연하게 설정할 수 있습니다.

---

### 2. 다중 오리진(Multiple Origins) 및 오리진 그룹(Origin Groups) 🔄

![[Pasted image 20250809235139.png]]

CloudFront는 하나의 배포에서 여러 오리진(원본 서버)을 사용하는 기능을 제공합니다.

- **다중 오리진:** **캐시 동작(Cache Behaviors)**을 사용하여 URL 경로 패턴에 따라 요청을 다른 오리진으로 라우팅할 수 있습니다. 예를 들어, `/images/*` 요청은 S3 버킷으로, `/api/*` 요청은 애플리케이션 로드 밸런서로 보낼 수 있습니다. 이를 통해 정적 및 동적 콘텐츠를 각각의 특성에 맞게 최적화하여 제공할 수 있습니다.
    
- **오리진 그룹(Origin Groups):** **고가용성**과 **장애 복구(Failover)**를 위해 사용됩니다. 오리진 그룹은 **하나의 주(primary) 오리진**과 **하나의 보조(secondary) 오리진**으로 구성됩니다.
    
    - 주 오리진에 오류(HTTP 5xx, 4xx 응답 등)가 발생하면, CloudFront는 자동으로 보조 오리진으로 요청을 다시 보냅니다.
    
    - 이 기능은 **S3 CRR(Cross-Region Replication)**과 함께 사용하면 강력한 재해 복구 아키텍처를 구축할 수 있습니다. 예를 들어, 한 리전의 S3 버킷이 장애로 인해 응답하지 않을 경우, 복제된 다른 리전의 버킷으로 자동 페일오버하여 서비스 중단을 방지할 수 있습니다.


---

### 3. 필드 수준 암호화 (Field-Level Encryption) 🔐

![[Pasted image 20250809235158.png]]

필드 수준 암호화는 전송 중인 데이터의 특정 필드만 암호화하여 보호하는 고급 보안 기능입니다.

- **작동 원리:**
    
    1. 클라이언트가 CloudFront에 `POST` 요청을 보낼 때, 신용카드 번호와 같은 민감한 필드(최대 10개)를 지정합니다.
    
    2. CloudFront **엣지 로케이션**은 해당 필드를 미리 설정된 **공개 키(Public Key)**를 사용하여 즉시 암호화합니다.
    
    3. 암호화된 데이터는 애플리케이션 스택 전체(엣지 로케이션 → CloudFront → 오리진)를 거치는 동안 암호화된 상태로 유지됩니다.
    
    4. 웹 서버와 같은 최종 오리진만이 해당 공개 키와 쌍을 이루는 **비공개 키(Private Key)**를 사용하여 데이터를 복호화할 수 있습니다.

- **장점:** HTTPS(전송 중 암호화) 외에 추가적인 보안 계층을 제공합니다. 스택의 중간 단계(CloudFront, 로드 밸런서 등)에서는 민감한 정보에 접근할 수 없어, 데이터 유출 위험을 줄입니다.