이번 가이드에서는 Amazon API Gateway가 **마이크로서비스 아키텍처**에서 어떻게 핵심적인 역할을 하는지 설명하겠습니다. API Gateway는 여러 백엔드 서비스의 복잡성을 숨기고, 외부 클라이언트에게 단일하고 통합된 인터페이스를 제공하는 **API 게이트웨이** 역할을 수행합니다.

---

## 💻 1단계: 단일 진입점(Single Entry Point) 구축

![[Pasted image 20250907195729.png]]

마이크로서비스 아키텍처에서 각 서비스는 독립적인 기능을 담당하며 자체 엔드포인트를 가집니다. API Gateway는 이 모든 엔드포인트를 하나로 통합하는 **단일 진입점(Single Entry Point)**을 제공합니다.

- **복잡성 숨기기**: 클라이언트는 단일 URL(예: `api.example.com`)을 통해 모든 마이크로서비스에 접근할 수 있습니다. API Gateway는 내부적으로 어떤 서비스가 요청을 처리하는지 클라이언트에게 숨깁니다.
    
- **유연한 라우팅**: API Gateway의 리소스 및 메서드 설정을 통해 `/service1`, `/docs`, `/service2`와 같은 다양한 경로를 서로 다른 백엔드 서비스로 라우팅할 수 있습니다.
    
- **백엔드 예시**:
    
    - `/service1` → Amazon ECS Cluster
        
    - `/docs` → Amazon S3 Bucket (정적 문서)
        
    - `/service2` → Amazon EC2 Auto Scaling Group
        

---

## 🌐 2단계: 도메인 및 SSL 인증 관리

API Gateway는 AWS Route 53 및 Certificate Manager와 통합하여 커스텀 도메인과 SSL 인증서를 손쉽게 관리할 수 있습니다.

- **커스텀 도메인**: API Gateway의 기본 URL(`{api-id}.execute-api...`) 대신, `api.example.com`과 같은 사용자 지정 도메인을 등록할 수 있습니다. 이를 통해 더 기억하기 쉽고 전문적인 API 주소를 제공할 수 있습니다.
    
- **SSL/TLS**: API Gateway는 SSL/TLS 인증서를 사용하여 클라이언트와 API 간의 모든 통신을 암호화합니다. 이를 통해 보안을 강화할 수 있습니다.
    

---

## 🛠️ 3단계: 데이터 변환 및 규칙 적용

API Gateway는 단순한 라우팅을 넘어, 요청과 응답 데이터를 동적으로 변환하는 기능을 제공합니다.

- **요청/응답 변환**: 클라이언트의 요청 데이터를 백엔드 서비스의 요구사항에 맞게 변환하거나(예: JSON → XML), 백엔드 응답 데이터를 클라이언트의 형식에 맞게 변환할 수 있습니다. 이는 매핑 템플릿(Mapping Templates)을 통해 구현됩니다.
    
- **규칙 적용**: API Gateway는 요청에 대한 **스로틀링(Throttling)**, **권한 부여(Authorization)**, **유효성 검사(Validation)** 등 다양한 규칙을 적용하여 마이크로서비스를 보호하고 관리합니다.
    

### 📝 마이크로서비스 아키텍처에서 API Gateway의 역할 요약

|역할|설명|
|---|---|
|**단일 진입점**|여러 마이크로서비스의 복잡성을 숨기고, 외부에 단일한 URL을 제공합니다.|
|**라우팅 및 통합**|요청 경로에 따라 적절한 백엔드 서비스(Lambda, EC2, ECS, S3 등)로 라우팅합니다.|
|**보안 및 제어**|SSL/TLS, 인증, 권한 부여, 스로틀링, 할당량 등을 통해 API를 보호합니다.|
|**데이터 변환**|백엔드와 클라이언트 간에 데이터 형식을 변환하여 통합을 용이하게 합니다.|

결론적으로, API Gateway는 분산된 마이크로서비스를 통합하고 관리하는 강력한 도구이며, 모든 클라이언트 요청이 거치는 중앙 게이트웨이 역할을 수행하여 아키텍처의 안정성과 유연성을 크게 향상시킵니다.