

μ΄λ² κ°•μμ—μ„λ” μ—¬λ¬ λ¦¬μ†μ¤λ΅ νΈλν”½μ„ λ¶„μ‚°ν•λ©΄μ„λ„ ν—¬μ¤ μ²΄ν¬λ¥Ό ν†µν•΄ μ •μƒμ μΈ μ—”λ“ν¬μΈνΈλ§ μ‘λ‹µμ— ν¬ν•¨μ‹ν‚¤λ” **λ‹¤μ¤‘ κ°’ μ‘λ‹µ λΌμ°ν… μ •μ±…(Multi-value Answer Routing Policy)**μ— λ€ν•΄ μ•μ•„λ΄…λ‹λ‹¤.

---

### 1. λ‹¤μ¤‘ κ°’ μ‘λ‹µ λΌμ°ν… μ •μ±…μ΄λ€? π¤”

- **κ°λ…**: ν•λ‚μ DNS μΏΌλ¦¬μ— λ€ν•΄ μµλ€ 8κ°μ λ μ½”λ“λ¥Ό μ‘λ‹µμΌλ΅ λ°ν™ν•λ” μ •μ±…μ…λ‹λ‹¤. μ΄ μ •μ±…μ€ ν—¬μ¤ μ²΄ν¬μ™€ μ—°λ™ν•μ—¬ μ •μƒ(Healthy) μƒνƒμ λ¦¬μ†μ¤λ§ μ‘λ‹µμ— ν¬ν•¨μ‹ν‚µλ‹λ‹¤.
    
- **μ‘λ™ λ°©μ‹**:
    
    - Route 53μ€ λ™μΌν• λ μ½”λ“ μ΄λ¦„μ— λ€ν•΄ μ—¬λ¬ κ°μ λ μ½”λ“λ¥Ό μƒμ„±ν•  μ μλ„λ΅ ν—μ©ν•©λ‹λ‹¤.
    - κ° λ μ½”λ“μ—λ”Β **ν—¬μ¤ μ²΄ν¬λ¥Ό μ—°κ²°**ν•  μ μμµλ‹λ‹¤.
    - ν΄λΌμ΄μ–ΈνΈκ°€ DNS μΏΌλ¦¬λ¥Ό λ³΄λ‚΄λ©΄, Route 53μ€ μ—°κ²°λ ν—¬μ¤ μ²΄ν¬κ°€Β `Healthy`Β μƒνƒμΈ λ μ½”λ“λ“¤μ„ μµλ€ 8κ°κΉμ§€ λ°ν™ν•©λ‹λ‹¤.
    - ν΄λΌμ΄μ–ΈνΈλ” λ°ν™λ μ—¬λ¬ IP μ£Όμ† μ¤‘ ν•λ‚λ¥Ό λ¬΄μ‘μ„λ΅ μ„ νƒν•μ—¬ μ ‘μ†ν•©λ‹λ‹¤.

- **μ£Όμ” νΉμ§•**:
    
    - **ν΄λΌμ΄μ–ΈνΈ μΈ΅ λ¶€ν• λ¶„μ‚°**: μ—¬λ¬ κ°μ μ •μƒμ μΈ IP μ£Όμ†λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² μ κ³µν•μ—¬, ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ λ¶€ν• λ¶„μ‚°μ„ μν–‰ν•λ„λ΅ ν•©λ‹λ‹¤.
        
    - **ν—¬μ¤ μ²΄ν¬ ν•„μ**: μ΄ μ •μ±…μ ν•µμ‹¬μ€ ν—¬μ¤ μ²΄ν¬μ…λ‹λ‹¤. ν—¬μ¤ μ²΄ν¬κ°€ λΉ„μ •μƒ(`Unhealthy`)μΈ λ¦¬μ†μ¤λ” μ‘λ‹µμ— ν¬ν•¨λμ§€ μ•μΌλ―€λ΅, μ‚¬μ©μλ” ν•­μƒ μ •μƒμ μΈ μ—”λ“ν¬μΈνΈμ— μ ‘μ†ν•κ² λ©λ‹λ‹¤.
        
    - **Simple λΌμ°ν…κ³Όμ μ°¨μ΄**: Simple λΌμ°ν… μ •μ±…μ λ‹¤μ¤‘ κ°’ μ‘λ‹µμ€ ν—¬μ¤ μ²΄ν¬λ¥Ό μ§€μ›ν•μ§€ μ•μµλ‹λ‹¤. λ”°λΌμ„ Simple λΌμ°ν… μ •μ±…μΌλ΅ μ—¬λ¬ IPλ¥Ό λ°ν™ν•  κ²½μ°, κ·Έμ¤‘ μΌλ¶€κ°€ λΉ„μ •μƒμΌ μ μμµλ‹λ‹¤. λ°λ©΄ λ‹¤μ¤‘ κ°’ μ‘λ‹µ λΌμ°ν…μ€Β **μ¤μ§ μ •μƒμ μΈ λ¦¬μ†μ¤λ§ λ°ν™**ν•λ‹¤λ” μ μ—μ„ λ” μ•μ „ν•©λ‹λ‹¤.
        
    - **ELBμ λ€μ²΄μ¬κ°€ μ•„λ‹**: λ‹¤μ¤‘ κ°’ μ‘λ‹µ λΌμ°ν…μ€ λ΅λ“ λ°Έλ°μ„(ELB)μ μ—­ν• μ„ μ™„μ „ν λ€μ²΄ν•  μ μ—†μµλ‹λ‹¤. μ΄λ” λ‹¨μν• ν΄λΌμ΄μ–ΈνΈ μΈ΅ λ¶€ν• λ¶„μ‚°μ΄λ©°, ELBκ°€ μ κ³µν•λ” μ„Έμ… μ μ§€, SSL μΆ…λ£ λ“±κ³Ό κ°™μ€ κ³ κΈ‰ κΈ°λ¥μ€ μ κ³µν•μ§€ μ•μµλ‹λ‹¤.


### 2. λ‹¤μ¤‘ κ°’ μ‘λ‹µ λΌμ°ν… μ‹¤μµ π§

μ΄μ „μ— μƒμ„±ν• μ„Έ κ°μ EC2 μΈμ¤ν„΄μ¤μ— λ€ν• ν—¬μ¤ μ²΄ν¬λ¥Ό ν™μ©ν•μ—¬, λ‹¤μ¤‘ κ°’ μ‘λ‹µ λΌμ°ν… μ •μ±…μ μ‘λ™ λ°©μ‹μ„ ν™•μΈν•΄ λ³΄κ² μµλ‹λ‹¤.

#### 2.1 λ‹¤μ¤‘ κ°’ μ‘λ‹µ λ μ½”λ“ μ„ΈνΈ μƒμ„±

1. **Route 53 μ½μ†” μ ‘μ†**: μ΄μ „μ— λ“±λ΅ν• λ„λ©”μΈ(`yourchosendomain.com`)μ νΈμ¤ν… μ΅΄μΌλ΅ μ΄λ™ν•©λ‹λ‹¤.
2. **λ μ½”λ“ μƒμ„±**:Β `λ μ½”λ“ μƒμ„±(Create record)`Β ν΄λ¦­.
3. **μ²« λ²μ§Έ λ μ½”λ“ (λ―Έκµ­ λ™λ¶€)**:
    - **λ μ½”λ“ μ΄λ¦„**:Β `multi`Β (FQDN:Β `multi.yourchosendomain.com`)
    - **λ μ½”λ“ μ ν•**:Β `A`
    - **κ°’**: λ²„μ§€λ‹μ•„ λ¶λ¶€(`us-east-1`) EC2 μΈμ¤ν„΄μ¤μ IP μ£Όμ†λ¥Ό μ…λ ¥.
    - **λΌμ°ν… μ •μ±…**:Β `λ‹¤μ¤‘ κ°’ μ‘λ‹µ(Multi-value answer)`Β μ„ νƒ.
    - **ν—¬μ¤ μ²΄ν¬ μ—°λ™**:Β `ν—¬μ¤ μ²΄ν¬ ID`μ—μ„ μ΄μ „μ— μƒμ„±ν•Β `us-east-1`Β ν—¬μ¤ μ²΄ν¬λ¥Ό μ„ νƒν•©λ‹λ‹¤.
    - **λ μ½”λ“ ID**:Β `US`
    - **λ‹¤λ¥Έ λ μ½”λ“ μ¶”κ°€(Add another record)**Β ν΄λ¦­.

4. **λ‘ λ²μ§Έ λ μ½”λ“ (μ‹±κ°€ν¬λ¥΄)**:
    - **λ μ½”λ“ μ΄λ¦„**:Β `multi`Β (μ£Ό λ μ½”λ“μ™€ λ™μΌ)
    - **κ°’**: μ‹±κ°€ν¬λ¥΄(`ap-southeast-1`) EC2 μΈμ¤ν„΄μ¤μ IP μ£Όμ†λ¥Ό μ…λ ¥.
    - **λΌμ°ν… μ •μ±…**:Β `λ‹¤μ¤‘ κ°’ μ‘λ‹µ(Multi-value answer)`
    - **ν—¬μ¤ μ²΄ν¬ μ—°λ™**:Β `ap-southeast-1`Β ν—¬μ¤ μ²΄ν¬λ¥Ό μ„ νƒν•©λ‹λ‹¤.
    - **λ μ½”λ“ ID**:Β `Asia`
    - **λ‹¤λ¥Έ λ μ½”λ“ μ¶”κ°€(Add another record)**Β ν΄λ¦­.
5. **μ„Έ λ²μ§Έ λ μ½”λ“ (ν”„λ‘ν¬ν‘Έλ¥΄νΈ)**:
    - **λ μ½”λ“ μ΄λ¦„**:Β `multi`Β (μ£Ό λ μ½”λ“μ™€ λ™μΌ)
    - **κ°’**: ν”„λ‘ν¬ν‘Έλ¥΄νΈ(`eu-central-1`) EC2 μΈμ¤ν„΄μ¤μ IP μ£Όμ†λ¥Ό μ…λ ¥.
    - **λΌμ°ν… μ •μ±…**:Β `λ‹¤μ¤‘ κ°’ μ‘λ‹µ(Multi-value answer)`
    - **ν—¬μ¤ μ²΄ν¬ μ—°λ™**:Β `eu-central-1`Β ν—¬μ¤ μ²΄ν¬λ¥Ό μ„ νƒν•©λ‹λ‹¤.
    - **λ μ½”λ“ ID**:Β `EU`
6. **λ μ½”λ“ μƒμ„±**: μ„¤μ •μ΄ μ™„λ£λλ©΄Β `λ μ½”λ“ μƒμ„±(Create records)`μ„ ν΄λ¦­ν•©λ‹λ‹¤.


#### 2.2 μ¥μ•  μƒν™© μ‹ μ‘λ‹µ λ³€ν™” ν™•μΈ

1. **μ •μƒ μƒν™© ν™•μΈ**:
    
    - AWS Cloud Shellμ—μ„Β `dig multi.yourchosendomain.com`Β λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
    - μ„Έ κ°μ EC2 μΈμ¤ν„΄μ¤ λ¨λ‘ μ •μƒ μƒνƒμ΄λ―€λ΅, DNS μ‘λ‹µμΌλ΅Β **μ„Έ κ°μ IP μ£Όμ†**κ°€ λ¨λ‘ λ°ν™λλ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

2. **μλ„μ μΈ μ¥μ•  λ°μƒ**:
    - ν”„λ‘ν¬ν‘Έλ¥΄νΈ(`eu-central-1`) λ¦¬μ „μ EC2 μΈμ¤ν„΄μ¤λ¥Ό μ„ νƒν•κ³ , ν•΄λ‹Ή μΈμ¤ν„΄μ¤μ λ³΄μ• κ·Έλ£Ήμ—μ„Β `HTTP (80 ν¬νΈ)`Β κ·μΉ™μ„ μ‚­μ ν•μ—¬ μ™Έλ¶€ μ ‘μ†μ„ μ°¨λ‹¨ν•©λ‹λ‹¤.

    - μ μ‹ ν›„Β `EU Central 1`Β ν—¬μ¤ μ²΄ν¬μ μƒνƒκ°€ "λΉ„μ •μƒ(Unhealthy)"μΌλ΅ λ³€κ²½λ  κ²ƒμ…λ‹λ‹¤.
    
    - **μ°Έκ³ **: μ‹¤μµμ—μ„λ” ν—¬μ¤ μ²΄ν¬μΒ `μƒνƒ λ°μ „(Invert health check status)`Β κΈ°λ¥μ„ μ‚¬μ©ν•μ—¬ λΉ λ¥΄κ² λΉ„μ •μƒ μƒνƒλ¥Ό μ‹λ®¬λ μ΄μ…ν•  μλ„ μμµλ‹λ‹¤.
        
3. **μ¥μ•  μ΅°μΉ ν™•μΈ**:
    
    - ν—¬μ¤ μ²΄ν¬ μƒνƒκ°€Β `Unhealthy`λ΅ λ³€κ²½λ ν›„, λ‹¤μ‹ Cloud Shellμ—μ„Β `dig multi.yourchosendomain.com`Β λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
        
    - μ΄λ²μ—λ” λΉ„μ •μƒ μƒνƒμΈ ν”„λ‘ν¬ν‘Έλ¥΄νΈ IPλ¥Ό μ μ™Έν•κ³ , μ •μƒ μƒνƒμΈΒ **λ‘ κ°μ IP μ£Όμ†λ§**Β DNS μ‘λ‹µμΌλ΅ λ°ν™λλ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
        

### 3. κ²°λ΅  π’΅

**λ‹¤μ¤‘ κ°’ μ‘λ‹µ λΌμ°ν… μ •μ±…**μ€ μ—¬λ¬ κ°μ μ •μƒμ μΈ λ¦¬μ†μ¤λ΅ νΈλν”½μ„ λ¶„μ‚°ν•λ©΄μ„λ„, ν—¬μ¤ μ²΄ν¬λ¥Ό ν†µν•΄ λΉ„μ •μƒμ μΈ λ¦¬μ†μ¤λ¥Ό μλ™μΌλ΅ μ‘λ‹µμ—μ„ μ μ™Έμ‹ν‚¤λ” μ•μ „ν• λ¶€ν• λ¶„μ‚° λ©”μ»¤λ‹μ¦μ„ μ κ³µν•©λ‹λ‹¤. μ΄λ” λ΅λ“ λ°Έλ°μ„λ¥Ό μ‚¬μ©ν•μ§€ μ•κ³ λ„ μ„λΉ„μ¤μ κ°€μ©μ„±μ„ μΌμ • μμ¤€ ν™•λ³΄ν•  μ μκ² ν•΄μ£Όλ” μ μ©ν• κΈ°λ¥μ…λ‹λ‹¤.

---

κ¶κΈν• μ μ΄ μμΌμ‹λ©΄ μ–Έμ λ“ μ§€ μ§λ¬Έν•΄μ£Όμ„Έμ”.