

안녕하세요! 이번에는 AWS CloudWatch를 사용하여 **Auto Scaling Group(ASG)**을 모니터링하는 방법에 대해 알아보겠습니다. ASG의 성능과 상태를 정확하게 파악하기 위해서는 적절한 지표를 모니터링하는 것이 매우 중요합니다. CloudWatch는 ASG와 EC2 인스턴스에 대한 다양한 지표를 제공합니다.

---

## 1. 📊 ASG 레벨 지표 (Metrics)

**ASG 레벨 지표**는 Auto Scaling 그룹 전체의 상태를 나타내는 지표로, 기본적으로 비활성화되어 있어 **수동으로 활성화(opt-in)**해야 합니다. 이 지표들은 **1분 간격**으로 데이터를 수집합니다.

|지표 이름|설명|
|---|---|
|`GroupMinSize`|그룹의 최소 인스턴스 수|
|`GroupMaxSize`|그룹의 최대 인스턴스 수|
|`GroupDesiredCapacity`|그룹이 유지해야 하는 목표 인스턴스 수|
|`GroupInServiceInstances`|현재 정상적으로 서비스 중인 인스턴스 수|
|`GroupPendingInstances`|시작 중인 인스턴스 수|
|`GroupTerminatingInstances`|종료 중인 인스턴스 수|
|`GroupTotalInstances`|그룹 내 모든 인스턴스 수|

이러한 지표를 통해 ASG의 용량 변화를 추적하고, 스케일링 정책이 의도한 대로 작동하는지 확인할 수 있습니다.

### 👩‍💻 ASG 지표 활성화 방법

1. **EC2 콘솔**에서 **Auto Scaling Groups**로 이동합니다.
    
2. ASG를 선택하고, **Monitoring** 탭을 클릭합니다.
    
3. **Enable group metrics collection**을 클릭하여 그룹 레벨 지표를 활성화합니다.
    
4. 잠시 후 CloudWatch에서 해당 지표들을 확인할 수 있습니다.

---

## 2. 💻 EC2 인스턴스 레벨 지표

**EC2 인스턴스 레벨 지표**는 ASG에 속한 개별 인스턴스의 상태를 나타냅니다. 이 지표는 기본적으로 수집되며, 모니터링 상세도에 따라 수집 간격이 달라집니다.

- **기본 모니터링**: **5분** 간격으로 지표를 수집합니다.
    
- **상세 모니터링**: **1분** 간격으로 지표를 수집하며, 추가 비용이 발생할 수 있습니다.

|지표 이름|설명|
|---|---|
|`CPUUtilization`|CPU 사용률 (%)|
|`NetworkIn`|수신되는 네트워크 트래픽 (바이트)|
|`NetworkOut`|송신되는 네트워크 트래픽 (바이트)|
|`DiskReadBytes` / `DiskWriteBytes`|디스크 읽기/쓰기 작업량 (바이트)|
|`StatusCheckFailed`|인스턴스 또는 시스템 상태 검사 실패 여부 (0 또는 1)|

이 지표들은 ASG의 스케일링 정책에 대한 입력값으로 자주 활용됩니다. 예를 들어, `CPUUtilization`이 70%를 초과하면 ASG가 인스턴스를 추가하도록 설정할 수 있습니다.

---

## 📚 마무리

ASG의 성능을 최적화하고 안정적으로 운영하기 위해서는 **ASG 레벨 지표**와 **EC2 인스턴스 레벨 지표**를 모두 활용하는 것이 중요합니다. ASG 지표를 통해 그룹의 전반적인 상태를 파악하고, EC2 지표를 통해 개별 인스턴스의 부하 상태를 면밀히 분석함으로써 효과적인 자동 스케일링 전략을 수립할 수 있습니다.