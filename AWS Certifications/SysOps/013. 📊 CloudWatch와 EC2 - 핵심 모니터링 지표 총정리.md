
## ☁️ CloudWatch와 EC2 모니터링의 기본 원리

**CloudWatch**는 AWS의 모든 리소스에 대한 모니터링 서비스를 제공합니다. EC2 인스턴스의 경우, AWS가 자동으로 다양한 성능 및 상태 지표를 CloudWatch로 푸시(Push)합니다. 이 지표들은 인스턴스의 상태를 파악하고, 성능 문제를 해결하며, 필요에 따라 스케일링 정책을 설정하는 데 필수적입니다.

### 모니터링 주기

- **기본 모니터링(Basic Monitoring):** 인스턴스 생성 시 기본적으로 활성화되며, 지표를 **5분** 간격으로 수집합니다.
    
- **상세 모니터링(Detailed Monitoring):** 추가 비용을 지불하여 활성화할 수 있으며, 지표를 **1분** 간격으로 수집하여 더 세밀한 데이터 분석을 가능하게 합니다.
    

---

## 📋 EC2의 핵심 내장(Built-in) 지표

AWS가 EC2 인스턴스를 위해 기본적으로 제공하는 4가지 중요한 지표는 다음과 같습니다.

### 1. 💻 CPU 지표

- **`CPUUtilization`:** 인스턴스의 CPU 사용률(%)을 측정합니다.
    
- **`CPUCreditUsage` & `CPUCreditBalance`:** **T2/T3 시리즈**와 같은 버스터블(Burstable) 인스턴스에만 해당되는 지표입니다.
    
    - **`CPUCreditUsage`:** 버스팅에 사용된 크레딧의 양을 나타냅니다.
        
    - **`CPUCreditBalance`:** 현재 남아있는 크레딧 잔액을 나타냅니다.
        

### 2. 🌐 네트워크 지표

- **`NetworkIn` & `NetworkOut`:** 인스턴스로 들어오고 나가는 네트워크 트래픽의 바이트 수(Bytes)를 측정합니다.
    
- **`NetworkPacketsIn` & `NetworkPacketsOut`:** 인스턴스로 들어오고 나가는 네트워크 패킷의 수를 측정합니다.

### 3. 🚦 상태 점검(Status Check) 지표

AWS는 인스턴스의 상태를 확인하기 위해 두 가지 유형의 상태 점검을 수행합니다.

- **인스턴스 상태 점검(Instance Status Check):** EC2 가상 머신(VM) 자체의 소프트웨어 및 OS 수준의 문제를 확인합니다. (예: OS 충돌)
    
- **시스템 상태 점검(System Status Check):** 인스턴스가 실행되는 **물리적 하드웨어**에 문제가 있는지 확인합니다. (예: 하드웨어 고장)
    
- **`Attached EBS Status`:** 연결된 EBS 볼륨의 상태를 확인합니다.

### 4. 💾 디스크 지표

- **EBS 볼륨 기반 인스턴스:** 디스크 지표는 **EC2 인스턴스가 아닌** **연결된 EBS 볼륨**에서 별도의 지표(`VolumeReadBytes`, `VolumeWriteBytes`)로 제공됩니다. EC2 인스턴스 자체에서는 디스크 관련 지표가 0으로 표시됩니다.
    
- **인스턴스 스토어 기반 인스턴스:** 물리적 드라이브가 인스턴스에 직접 연결된 경우, **`DiskReadOps`, `DiskWriteOps`, `DiskReadBytes`, `DiskWriteBytes`** 지표가 EC2 인스턴스에서 직접 수집됩니다.
    

### ⚠️ 중요한 시험 포인트: RAM 지표

**RAM 사용량은 AWS의 기본 EC2 지표에 포함되지 않습니다.** CloudWatch에서 RAM 사용량을 모니터링하려면, 사용자가 직접 **CloudWatch 에이전트**를 인스턴스에 설치하고 **사용자 지정 지표(Custom Metrics)**로 푸시해야 합니다. 이는 시험에서 자주 등장하는 문제입니다.

---

## 🎨 사용자 지정 지표(Custom Metrics)

AWS가 기본 제공하지 않는 지표(예: RAM, 애플리케이션 수준의 성능 지표)는 사용자가 직접 CloudWatch에 푸시하여 모니터링할 수 있습니다.

- **푸시 주체:** 사용자의 인스턴스 또는 애플리케이션
    
- **최소 해상도:** 기본 해상도는 **1분**이며, 더 세밀한 분석을 위해 **1초** 단위의 **고해상도(High-Resolution)** 지표를 사용할 수 있습니다.
    
- **IAM 권한:** 인스턴스가 지표를 CloudWatch에 푸시하려면, 해당 인스턴스에 **`cloudwatch:PutMetricData`** 권한이 포함된 **IAM 역할**이 부여되어야 합니다.


---

## 📈 CloudWatch 대시보드 활용하기

CloudWatch 대시보드를 사용하면 여러 지표를 한곳에 모아 시각적으로 쉽게 모니터링할 수 있습니다.

1. CloudWatch 대시보드에서 `Create dashboard`를 클릭하여 새로운 대시보드를 생성합니다.
    
2. `Add widget`을 통해 원하는 EC2 지표(예: `CPUUtilization`, `CPUCreditBalance`)를 추가하여 한눈에 확인할 수 있습니다.


이러한 모니터링 기능을 통해 EC2 인스턴스의 성능을 최적화하고, 잠재적인 문제를 사전에 감지하여 안정적인 서비스 운영을 보장할 수 있습니다.