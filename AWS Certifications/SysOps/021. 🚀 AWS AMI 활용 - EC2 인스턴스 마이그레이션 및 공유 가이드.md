
## π“‹ κ°μ”

μ΄ κ°€μ΄λ“λ” AWS EC2 μΈμ¤ν„΄μ¤λ¥Ό λ‹¤λ¥Έ κ°€μ© μμ—­(AZ)μΌλ΅ λ§μ΄κ·Έλ μ΄μ…ν•λ” λ°©λ²•κ³Ό AWS κ³„μ • κ°„μ— AMI(Amazon Machine Image)λ¥Ό κ³µμ ν•κ±°λ‚ λ³µμ‚¬ν•λ” λ°©λ²•μ— λ€ν•΄ μƒμ„Έν μ„¤λ…ν•©λ‹λ‹¤. AMIλ” EC2 μΈμ¤ν„΄μ¤μ μ¤λƒ…μƒ· μ—­ν• μ„ ν•λ©°, λ™μΌν• ν™κ²½μ μƒ μΈμ¤ν„΄μ¤λ¥Ό λΉ λ¥΄κ³  μ‰½κ² μƒμ„±ν•  μ μκ² ν•΄μ£Όλ” μ¤‘μ”ν• AWS μ„λΉ„μ¤μ…λ‹λ‹¤.

---

## π—ΊοΈ AZ κ°„ EC2 μΈμ¤ν„΄μ¤ λ§μ΄κ·Έλ μ΄μ…

EC2 μΈμ¤ν„΄μ¤λ¥Ό λ™μΌ λ¦¬μ „ λ‚΄μ λ‹¤λ¥Έ AZλ΅ μ΄λ™ν•΄μ•Ό ν•  κ²½μ°, **AMI**λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ κ°€μ¥ μΌλ°μ μ΄κ³  ν¨μ¨μ μΈ λ°©λ²•μ…λ‹λ‹¤. μ΄ λ°©λ²•μ€ μ›λ³Έ μΈμ¤ν„΄μ¤μ λ°μ΄ν„°, νμΌ μ‹μ¤ν…, μ• ν”λ¦¬μΌ€μ΄μ…μ„ κ·Έλ€λ΅ λ³΄μ΅΄ν•λ©΄μ„ μƒλ΅μ΄ μ„μΉμ— μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•  μ μκ² ν•΄μ¤λ‹λ‹¤.

### λ§μ΄κ·Έλ μ΄μ… λ‹¨κ³„

|λ‹¨κ³„|μ„¤λ…|
|---|---|
|**1λ‹¨κ³„: AMI μƒμ„±**|λ§μ΄κ·Έλ μ΄μ…ν•λ ¤λ” μ›λ³Έ EC2 μΈμ¤ν„΄μ¤μ—μ„ AMIλ¥Ό μƒμ„±ν•©λ‹λ‹¤. μ΄ AMIλ” μΈμ¤ν„΄μ¤μ λ¨λ“  μ„¤μ •κ³Ό λ°μ΄ν„°λ¥Ό ν¬ν•¨ν•λ” ν…ν”λ¦Ώ μ—­ν• μ„ ν•©λ‹λ‹¤.|
|**2λ‹¨κ³„: μƒ μΈμ¤ν„΄μ¤ μƒμ„±**|AMIλ¥Ό μ‚¬μ©ν•μ—¬ μƒ EC2 μΈμ¤ν„΄μ¤λ¥Ό μ‹μ‘ν•©λ‹λ‹¤. μ΄λ•, μΈμ¤ν„΄μ¤ μ‹μ‘ λ§λ²•μ‚¬μ—μ„ μ›ν•λ” λ€μƒ AZμ μ„λΈλ„·μ„ μ„ νƒν•μ—¬ μΈμ¤ν„΄μ¤λ¥Ό λ°°μΉν•©λ‹λ‹¤.|
|**3λ‹¨κ³„: κ²€μ¦ λ° μ •λ¦¬**|μƒ μΈμ¤ν„΄μ¤κ°€ μ •μƒμ μΌλ΅ μ‘λ™ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤. λ¨λ“  κ²ƒμ΄ μ •μƒμ΄λΌλ©΄, ν•„μ”μ— λ”°λΌ μ›λ³Έ μΈμ¤ν„΄μ¤λ¥Ό μΆ…λ£ν•κ³  κ΄€λ ¨ λ¦¬μ†μ¤λ¥Ό μ •λ¦¬ν•  μ μμµλ‹λ‹¤.|

---

## π”— AWS κ³„μ • κ°„ AMI κ³µμ  (Cross Account AMI Sharing)

AWS AMIλ” λ‹¤λ¥Έ AWS κ³„μ •κ³Ό κ³µμ ν•  μ μμµλ‹λ‹¤. AMIλ¥Ό κ³µμ ν•λ©΄ AMIμ μ†μ κ¶μ€ μ›λ³Έ κ³„μ •μ— κ·Έλ€λ΅ μ μ§€λλ©°, κ³µμ λ°›μ€ κ³„μ •μ€ ν•΄λ‹Ή AMIλ¥Ό μ‚¬μ©ν•μ—¬ EC2 μΈμ¤ν„΄μ¤λ¥Ό μ‹μ‘ν•  μ μμµλ‹λ‹¤.

### κ³µμ  μ ν•

|μ ν•|μ„¤λ…|μ£Όμμ‚¬ν•­|
|---|---|---|
|**μ•”νΈν™”λμ§€ μ•μ€ AMI**|μ•”νΈν™”λμ§€ μ•μ€ λ³Όλ¥¨μ„ κ°€μ§„ AMIλ” νΉμ • κ³„μ • IDμ™€ κ³µμ ν•κ±°λ‚ **νΌλΈ”λ¦­(Public)**μΌλ΅ μ„¤μ •ν•μ—¬ μ „ μ„Έκ³„ λ¨λ“  AWS κ³„μ •κ³Ό κ³µμ ν•  μ μμµλ‹λ‹¤.|νΌλΈ”λ¦­ κ³µμ λ” λ³΄μ•μ— λ§¤μ° μ·¨μ•½ν•λ―€λ΅ μ‹ μ¤‘ν•΄μ•Ό ν•©λ‹λ‹¤.|
|**μ•”νΈν™”λ AMI**|KMS(Key Management Service) κ³ κ° κ΄€λ¦¬ ν‚¤(CMK)λ΅ μ•”νΈν™”λ AMIλ” κ³µμ ν•  λ• μ¶”κ°€μ μΈ λ‹¨κ³„λ¥Ό κ±°μ³μ•Ό ν•©λ‹λ‹¤.|AMIμ™€ ν•¨κ» μ•”νΈν™”μ— μ‚¬μ©λ **CMK**λ„ κ³µμ  λ€μƒ κ³„μ •μ— κ¶ν•μ„ λ¶€μ—¬ν•΄μ•Ό ν•©λ‹λ‹¤.|

### KMS μ•”νΈν™” AMI κ³µμ  μμ‹

![[Pasted image 20250925195852.png]]

1. **κ³„μ • A (μ›λ³Έ)**: AMIλ¥Ό CMK-Aλ΅ μ•”νΈν™”ν•©λ‹λ‹¤.
    
2. **κ³„μ • A**: κ³„μ • Bμ— AMIμ™€ CMK-Aμ— λ€ν• κ¶ν•(μ: `kms:DescribeKey`, `kms:Decrypt`, `kms:ReEncrypt` λ“±)μ„ λ¶€μ—¬ν•©λ‹λ‹¤.
    
3. **κ³„μ • B (λ€μƒ)**: κ³µμ λ AMIμ™€ ν‚¤ κ¶ν•μ„ ν†µν•΄ EC2 μΈμ¤ν„΄μ¤λ¥Ό μ‹μ‘ν•  μ μμµλ‹λ‹¤.

**μ£Όμ**: CMK κ¶ν•μ„ λ¶€μ—¬ν•μ§€ μ•μΌλ©΄ λ€μƒ κ³„μ •μ—μ„ AMIλ¥Ό μ‚¬μ©ν•  μ μ—†μµλ‹λ‹¤.

---

## π“ AWS κ³„μ • κ°„ AMI λ³µμ‚¬ (Cross Account AMI Copy)

![[Pasted image 20250925195904.png]]

κ³µμ λ°›μ€ AMIλ¥Ό μμ‹ μ κ³„μ •μΌλ΅ λ³µμ‚¬ν•μ—¬ **μμ²΄ μ†μ **ν•κ³  μ‹¶μ„ λ• μ‚¬μ©ν•©λ‹λ‹¤. λ³µμ‚¬ν•λ©΄ μ›λ³Έ AMIμ™€μ λ…λ¦½μ„±μ΄ μƒκΈ°λ©°, ν•„μ”μ— λ”°λΌ λ³µμ‚¬ κ³Όμ •μ—μ„ AMIλ¥Ό μ¬μ•”νΈν™”ν•  μλ„ μμµλ‹λ‹¤.

### λ³µμ‚¬ μ μ°¨ λ° νΉμ§•

1. **κ¶ν• λ¶€μ—¬**: μ›λ³Έ AMIμ μ†μ μ(κ³„μ • A)λ” λ€μƒ κ³„μ •(κ³„μ • B)μ—κ² AMIμ κΈ°λ°μ΄ λλ” EBS μ¤λƒ…μƒ·μ— λ€ν• μ½κΈ° κ¶ν•μ„ λ¶€μ—¬ν•΄μ•Ό ν•©λ‹λ‹¤.
    
2. **API νΈμ¶**: κ³„μ • Bλ” `CopyImage` APIλ¥Ό νΈμ¶ν•μ—¬ μ›λ³Έ AMIλ¥Ό μμ‹ μ κ³„μ •μΌλ΅ λ³µμ‚¬ν•©λ‹λ‹¤.
    
3. **μ†μ κ¶ μ΄μ „**: λ³µμ‚¬λ AMIμ μ†μ κ¶μ€ κ³„μ • Bλ΅ μ™„μ „ν μ΄μ „λ©λ‹λ‹¤.
    
4. **μ¬μ•”νΈν™”**: λ³µμ‚¬ κ³Όμ •μ—μ„ λ€μƒ κ³„μ •μ CMK(μ: CMK-B)λ¥Ό μ‚¬μ©ν•μ—¬ AMIλ¥Ό μ¬μ•”νΈν™”ν•  μ μμµλ‹λ‹¤.

### KMS μ•”νΈν™” AMI λ³µμ‚¬ μμ‹

![[Pasted image 20250925195930.png]]

1. **κ³„μ • A (μ›λ³Έ)**: AMIλ¥Ό CMK-Aλ΅ μ•”νΈν™”ν• ν›„, κ³„μ • Bμ—κ² EBS μ¤λƒ…μƒ· λ° CMK-Aμ— λ€ν• κ¶ν•μ„ λ¶€μ—¬ν•©λ‹λ‹¤.
    
2. **κ³„μ • B (λ€μƒ)**: `CopyImage` λ…λ Ήμ„ μ‹¤ν–‰ν•μ—¬ AMIλ¥Ό λ³µμ‚¬ν•©λ‹λ‹¤. μ΄λ•, λ³µμ‚¬ μµμ…μ—μ„ μμ‹ μ CMK-Bλ¥Ό μ§€μ •ν•μ—¬ μƒλ΅μ΄ AMIλ¥Ό μ¬μ•”νΈν™”ν•©λ‹λ‹¤.
    
3. **κ²°κ³Ό**: κ³„μ • Bλ” CMK-Bλ΅ μ•”νΈν™”λκ³  μμ²΄ μ†μ κ¶μ„ κ°€μ§„ μƒλ΅μ΄ AMIλ¥Ό κ°–κ² λ©λ‹λ‹¤.

---

## π”’ AMI κ¶ν• μ„¤μ • λ°©λ²•

AWS μ½μ†”μ—μ„ AMIμ κ¶ν•μ„ μ†μ‰½κ² μ„¤μ •ν•  μ μμµλ‹λ‹¤.

1. **AMI λ©”λ‰΄ μ ‘μ†**: AWS μ½μ†”μ—μ„ `EC2` > `AMI` λ©”λ‰΄λ΅ μ΄λ™ν•©λ‹λ‹¤.
    
2. **κ¶ν• νΈμ§‘**: μ›ν•λ” AMIλ¥Ό μ„ νƒν• ν›„, `μ‘μ—…` > `AMI κ¶ν• νΈμ§‘`μ„ ν΄λ¦­ν•©λ‹λ‹¤.
    
3. **μµμ… μ„¤μ •**:
    
    - **Public**: **μ•”νΈν™”λμ§€ μ•μ€ AMI**μ— ν•ν•΄ νΌλΈ”λ¦­μΌλ΅ μ„¤μ •ν•  μ μμµλ‹λ‹¤.
        
    - **Private**: `κ³„μ • ID μ¶”κ°€`λ¥Ό ν†µν•΄ νΉμ • κ³„μ •, μ΅°μ§(Organization) λλ” OU(Organizational Unit)μ™€ κ³µμ ν•  μ μμµλ‹λ‹¤.
        
    - **μ¤λƒ…μƒ· κ¶ν•**: `μ—°κ΄€λ μ¤λƒ…μƒ·μ— λ€ν• λ³Όλ¥¨ μƒμ„± κ¶ν• μ¶”κ°€` μµμ…μ„ ν†µν•΄ κ³µμ λ°›μ€ κ³„μ •μ΄ ν•΄λ‹Ή AMIλ¥Ό λ” μ›ν™ν•κ² μ‚¬μ©ν•  μ μλ„λ΅ ν•©λ‹λ‹¤.

μ΄λ¬ν• AMI κ¶ν• μ„¤μ •μ€ λ‹¤λ¥Έ μ‚¬μ©μμ™€ ν¨μ¨μ μΌλ΅ ν‘μ—…ν•κ±°λ‚ λ³΄μ• μ •μ±…μ„ κ΄€λ¦¬ν•λ” λ° λ§¤μ° μ¤‘μ”ν•©λ‹λ‹¤.