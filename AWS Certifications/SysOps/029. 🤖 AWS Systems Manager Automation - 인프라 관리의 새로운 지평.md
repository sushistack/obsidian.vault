안녕하세요! 이번에는 AWS Systems Manager의 강력한 기능인 **자동화(Automation)**에 대해 알아보겠습니다. 자동화는 복잡하고 반복적인 유지보수 및 배포 작업을 간소화하고 자동화하는 데 중점을 둔 기능입니다.

---

## 🧐 Automation이란?

**Automation**은 EC2 인스턴스, EBS 볼륨, AMI 등 AWS 리소스에 대해 고수준의 작업을 실행하는 기능입니다. 이전에 다룬 **Run Command**가 인스턴스 "내부"에서 명령을 실행하는 데 초점을 맞췄다면, **Automation**은 인스턴스 "외부"에서 리소스 자체에 대한 작업을 수행합니다.

![[Pasted image 20250927190313.png]]

### 주요 특징

- **고수준 작업**: 인스턴스 재시작, AMI 생성, EBS 스냅샷 생성과 같이 여러 단계를 포함하는 복잡한 작업을 하나의 자동화로 처리할 수 있습니다.
    
- **Runbook**: 자동화에 사용되는 문서를 **Runbook**이라고 부릅니다. AWS는 미리 정의된 다양한 Runbook을 제공하며, 사용자는 필요에 따라 직접 Runbook을 작성할 수 있습니다.
    
- **다양한 트리거**:
    
    - **수동 실행**: 콘솔, CLI, SDK를 통해 직접 실행할 수 있습니다.
        
    - **자동화된 트리거**:
        
        - **EventBridge**: 특정 이벤트가 발생했을 때 자동화를 실행합니다.
            
        - **유지 관리 기간(Maintenance Window)**: 정해진 스케줄에 따라 자동화를 실행합니다.
            
        - **AWS Config**: 리소스가 규정을 위반했을 때 자동으로 규정 준수 조치를 취합니다.
            

---

## 👩‍💻 실습: EC2 인스턴스 자동 재시작

이 실습에서는 AWS에서 제공하는 기본 자동화인 `AWS-RestartEC2Instance` Runbook을 사용하여 이전에 생성한 "개발 그룹(dev-group)"에 속한 EC2 인스턴스를 자동으로 재시작하는 과정을 진행합니다.

### 1. Automation 실행 설정

1. **Systems Manager** 콘솔에서 **Change Management** 아래 **Automation**으로 이동합니다.
    
2. **Execute automation**을 클릭합니다.
    
3. **Automation document** 선택: `AWS-RestartEC2Instance`를 검색하여 선택합니다. 이 Runbook은 EC2 인스턴스를 중지(stop)한 후 다시 시작(start)하는 두 단계로 구성되어 있습니다.
    
4. **Next**를 클릭합니다.
    

### 2. 타겟 인스턴스 및 실행 옵션 지정

1. **Execution mode**에서 **Rate control**을 선택합니다. 이를 통해 여러 인스턴스에 대한 작업을 한 번에 하나씩 제어할 수 있습니다.
    
2. **Targets** 섹션에서 **Parameter**를 `InstanceIds`로 설정하고 **Target a parameter**를 `Resource Group`으로 지정합니다.
    
3. **Resource Groups** 드롭다운 메뉴에서 이전에 생성했던 `dev-group`을 선택합니다.
    
4. **Concurrency**를 `1`로 설정하고, **Error threshold**를 `1`로 설정합니다. 이는 한 번에 하나의 인스턴스만 재시작하며, 오류 발생 시 작업을 중단하겠다는 의미입니다.
    
5. **Execute**를 클릭하여 자동화를 시작합니다.
    

---

## 📊 자동화 진행 상황 및 결과 확인

자동화가 시작되면 **Automation** 페이지에서 진행 상황을 실시간으로 추적할 수 있습니다.

1. 자동화 ID를 클릭하여 **Steps** 섹션을 확인합니다.
    
2. 자동화는 `stopInstances`와 `startInstances` 두 단계로 나뉘어 순차적으로 실행됩니다.
    
3. **EC2 인스턴스 콘솔**에서 해당 인스턴스의 상태를 확인하면, **`stopInstances`** 단계가 진행되는 동안 `Stopping` 또는 `Stopped` 상태로 변경되었다가, **`startInstances`** 단계가 진행되면서 `Pending` 상태로 변경된 후 최종적으로 `Running` 상태가 되는 것을 볼 수 있습니다.
    

|Step|Status|Description|
|---|---|---|
|`stopInstances`|Success|`i-xxxxxxxx` 인스턴스 중지 성공|
|`startInstances`|Success|`i-xxxxxxxx` 인스턴스 시작 성공|

이 과정을 통해 인스턴스에 직접 접근하지 않고도 Systems Manager가 인스턴스의 상태를 변경하는 것을 확인할 수 있습니다.

---

## 📚 마무리: Automation의 가치

**Automation**은 단순 반복 작업을 자동화하여 운영 효율성을 크게 향상시킵니다. 특히 Run Command와 달리, 인스턴스 내부의 스크립트 실행을 넘어 인스턴스 자체에 대한 생명주기 관리를 수행한다는 점에서 강력한 차별점을 가집니다.

- **보안 강화**: SSH 접근 없이 인프라 관리가 가능해 공격 표면을 줄일 수 있습니다.
    
- **운영 간소화**: 복잡한 스크립트를 직접 작성할 필요 없이, 미리 정의된 Runbook을 사용하거나 커스텀 Runbook을 만들어 작업 절차를 표준화할 수 있습니다.
    
- **오류 방지**: 동시성 및 오류 제어 기능을 통해 대규모 작업 시 발생할 수 있는 잠재적 위험을 줄일 수 있습니다.
    

AWS에서 제공하는 다양한 **Automation 문서**를 둘러보며, 여러분의 인프라 관리 업무에 어떻게 활용할 수 있을지 고민해보는 것을 추천합니다. 다음 시간에는 Systems Manager의 다른 핵심 기능에 대해 알아보겠습니다.