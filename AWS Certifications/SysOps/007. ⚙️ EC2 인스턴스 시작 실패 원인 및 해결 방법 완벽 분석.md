
## 🛑 EC2 인스턴스 시작 시 발생하는 일반적인 문제점

AWS에서 EC2 인스턴스를 시작할 때, 예상치 못한 오류가 발생하여 인스턴스가 실행되지 않는 경우가 있습니다. 이러한 문제들은 주로 **리소스 한도 초과**, **용량 부족**, 또는 **인스턴스 자체의 문제**로 인해 발생합니다. 이 글에서는 각 문제의 원인과 해결 방법을 상세히 알아보겠습니다.

---

### 1. ⚠️ 인스턴스 한도 초과 (Instance Limit Exceeded)

이 오류는 사용자가 **리전(Region)** 내에서 허용된 최대 **vCPU** 개수를 초과했을 때 발생합니다. AWS는 리전별로 **온디맨드(On-Demand)** 및 **스팟 인스턴스(Spot Instance)**에 대한 vCPU 한도를 설정하고 있습니다.

#### 원인 분석

- **vCPU 한도 초과:** 각 인스턴스 유형은 특정 수의 vCPU를 가지고 있으며, 실행 중인 모든 인스턴스의 vCPU 총합이 해당 리전의 한도를 넘었을 때 오류가 발생합니다.
    
- **적용 대상:** 온디맨드 및 스팟 인스턴스에만 적용됩니다. 예약 인스턴스(Reserved Instance)에는 적용되지 않습니다.
    

#### 해결 방법

- **다른 리전 사용:** 한도가 리전별로 적용되므로, 다른 AWS 리전에서 인스턴스를 시작하면 문제를 해결할 수 있습니다.
    
- **한도 상향 요청:** **Service Quotas** 콘솔을 통해 AWS에 vCPU 한도 증가를 요청할 수 있습니다. 요청이 승인되면 더 많은 인스턴스를 시작할 수 있습니다.
    

**✅ vCPU 한도 확인 방법**

1. **EC2 콘솔:** EC2 대시보드 좌측 메뉴에서 **`Limits`**를 클릭하고 `vCPU`를 검색합니다.
    
2. **Service Quotas 콘솔:** `Service Quotas` 서비스로 이동하여 `Amazon EC2`를 선택하고, `running on-demand`나 `spot instance`와 관련된 `standard` 항목을 찾아 한도를 확인합니다.
    

> **팁:** `t2.micro`와 같은 소형 인스턴스는 1 vCPU를 사용하는 반면, `c5.9xlarge` 같은 대형 인스턴스는 36 vCPU를 사용하여 한도에 더 빠르게 도달할 수 있습니다.

---

### 2. 📉 인스턴스 용량 부족 (Insufficient Instance Capacity)

이 오류는 특정 **가용 영역(Availability Zone, AZ)**에 사용자가 요청한 **인스턴스 유형**의 용량이 충분하지 않을 때 발생합니다. 이는 사용자 측의 문제가 아닌 AWS의 문제이며, 해당 가용 영역의 리소스가 일시적으로 부족한 상황입니다.

#### 원인 분석

- **AWS 용량 부족:** 특정 AZ에서 온디맨드 인스턴스를 시작할 수 있는 충분한 하드웨어 리소스가 없는 경우입니다.
    

#### 해결 방법

- **재시도:** 몇 분 정도 기다린 후 다시 요청하면, AWS의 리소스가 재배치되어 문제가 해결될 수 있습니다.
    
- **요청 수량 줄이기:** 한 번에 10개의 인스턴스를 요청하는 대신, 2~3개씩 나누어 요청해 보세요.
    
- **인스턴스 유형 변경:** 현재 요청하는 인스턴스 유형이 아닌 다른 유형으로 인스턴스를 시작한 후, 필요에 따라 크기를 조정(resize)하는 방법도 있습니다.
    
- **다른 가용 영역 사용:** 가장 효과적인 방법 중 하나로, 다른 AZ에서 인스턴스를 시작하면 용량 부족 문제를 해결할 수 있습니다.
    

---

### 3. 💥 인스턴스 즉시 종료 (Pending to Terminated)

인스턴스 상태가 **`pending`**에서 곧바로 **`terminated`**로 바뀌는 경우입니다. 이는 인스턴스가 성공적으로 시작되지 않았음을 의미하며, 다양한 원인이 있을 수 있습니다.

#### 원인 분석

|원인|설명|
|---|---|
|**EBS 볼륨 한도 초과**|한 리전 내에서 생성 가능한 EBS 볼륨 또는 스냅샷의 최대 수량에 도달했을 수 있습니다.|
|**손상된 EBS 스냅샷/AMI**|인스턴스를 시작하는 데 사용된 EBS 스냅샷 또는 AMI가 손상되었을 수 있습니다.|
|**KMS 키 권한 부족**|루트 EBS 볼륨이 암호화되어 있지만, 사용자가 해당 볼륨을 해독하기 위한 KMS(Key Management Service) 키에 대한 접근 권한이 없을 경우입니다.|
|**AMI 파일 누락**|AMI 기반 인스턴스 저장소에서 인스턴스 파일 중 일부가 누락된 경우입니다.|

#### 해결 방법

이러한 문제의 정확한 원인을 파악하는 가장 좋은 방법은 **EC2 콘솔**에서 해당 인스턴스의 **`Description`** 탭을 확인하는 것입니다. 이 탭에 인스턴스 종료에 대한 구체적인 **이유(Reason)**가 명시되어 있어, 정확한 해결책을 찾을 수 있습니다.

---

## 🎓 결론

EC2 인스턴스 시작 실패는 다양한 원인으로 발생할 수 있으며, 각 오류 메시지에 따라 적절한 해결 방법을 적용해야 합니다. EC2 콘솔의 **`Description`** 탭은 문제 해결의 첫걸음이므로, 항상 이 정보를 확인하는 습관을 들이는 것이 중요합니다. 이 가이드를 통해 인스턴스 시작 문제를 효과적으로 해결하시길 바랍니다.