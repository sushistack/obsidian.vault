
안녕하세요! 이번 시간에는 AWS Systems Manager의 **세션 관리자(Session Manager)**를 직접 사용하여 EC2 인스턴스에 접속하는 과정을 실습해보겠습니다. 이 실습을 통해 SSH 키 페어나 보안 그룹 규칙 없이도 안전하게 셸 환경에 접속할 수 있다는 것을 직접 확인할 수 있습니다.

---

## 1. 🔍 세션 관리자로 인스턴스에 접속하기

1. **Systems Manager** 콘솔로 이동하여 왼쪽 메뉴에서 **Session Manager**를 찾습니다.
    
2. **Start session**을 클릭합니다.
    
3. 세션 접속을 원하는 인스턴스를 선택합니다. 예를 들어, `MyProdInstance`를 선택합니다.
    
4. 선택한 인스턴스의 보안 그룹 인바운드 규칙에 SSH(포트 22)가 열려 있지 않더라도, 세션이 바로 시작되는 것을 확인할 수 있습니다.

### 셸 환경에서 명령어 실행하기

세션이 시작되면 웹 브라우저 기반의 셸 환경이 나타나고, 여기서 인스턴스에 직접 명령어를 실행할 수 있습니다.

- `echo "Hello, world!"`
    
- `ls`
    
- `cd /home/ec2-user`
    
- `sudo yum install -y httpd` (이전 실습에서 설치했으므로 `already installed` 메시지가 표시됨)

이처럼 세션 관리자를 통해 인스턴스 내부의 셸에 접근하여 다양한 작업을 수행할 수 있습니다.

---

## 2. 📖 세션 기록(History) 확인하기

세션이 종료되면, Session Manager는 모든 세션에 대한 기록을 남깁니다.

1. **Session Manager** 콘솔에서 **Session history** 탭을 클릭합니다.
    
2. 이전 세션에 대한 기록이 나타나는 것을 확인할 수 있습니다. 세션 ID, 시작/종료 시간, 세션을 시작한 사용자 등의 정보가 포함됩니다.

---

## 3. ⚙️ 세션 관리자 환경 설정

세션 관리자의 보안 및 로깅 관련 설정을 사용자 지정할 수 있습니다.

1. **Session Manager** 콘솔에서 **Preferences**를 클릭합니다.

### 주요 설정 항목

- **Idle session timeout**: 유휴 상태의 세션을 자동으로 종료하는 시간을 설정합니다.
    
- **KMS encryption**: 세션 데이터를 KMS(Key Management Service)로 암호화하여 보안을 강화합니다.
    
- **CloudWatch logging**: 모든 세션 및 실행된 명령어를 **CloudWatch Logs**에 기록할지 여부를 설정합니다.
    
- **S3 logging**: 세션 데이터를 **Amazon S3 버킷**에 저장할지 여부를 설정합니다. 이는 장기 보관 및 분석에 유용합니다.
    
- **Shell profile**: 리눅스 또는 윈도우 셸 환경에서 특정 사용자 (`ec2-user` 등)로 세션을 시작하도록 설정할 수 있습니다.
    

이러한 설정을 통해 기업의 보안 및 규정 준수 정책에 맞춰 세션 관리자 환경을 세밀하게 제어할 수 있습니다. 많은 기업들이 SSH 대신 세션 관리자를 사용하는 이유가 바로 여기에 있습니다.

---

## 📚 마무리: Session Manager의 진정한 가치

이번 실습을 통해 **Session Manager**가 인스턴스에 직접 SSH 포트를 노출하지 않고도 안전하게 접속할 수 있는 강력한 도구임을 확인했습니다.

| 혜택            | 설명                                                                   |
| ------------- | -------------------------------------------------------------------- |
| **향상된 보안**    | 인스턴스의 보안 그룹을 열 필요가 없어 공격 표면을 줄입니다. SSH 키를 관리할 필요가 없어 키 분실 위험이 사라집니다. |
| **명령어 기록**    | 모든 세션과 실행된 명령이 자동으로 로깅되어 감사 및 문제 해결에 큰 도움이 됩니다.                      |
| **중앙 집중식 관리** | 모든 접근이 IAM을 통해 제어되므로, 누가 어떤 리소스에 접근할 수 있는지 중앙에서 관리할 수 있습니다.          |

**Session Manager**는 보안을 최우선으로 생각하는 현대적인 클라우드 환경에서 필수적인 기능입니다. 앞으로 EC2 인스턴스에 접속할 때 이 기능을 적극적으로 활용해보세요.