
스프링 컨테이너는 협력하는 빈들 간의 관계를 자동으로 연결(autowire)할 수 있습니다. 스프링 컨테이너의 `ApplicationContext` 내용을 검사하여 빈의 협력자(다른 빈)를 자동으로 해결하도록 할 수 있습니다. 자동 연결의 장점은 다음과 같습니다:

- **자동 연결은 속성(property)이나 생성자 인수를 지정할 필요성을 크게 줄일 수 있습니다.** (이 장의 다른 부분에서 논의된 빈 템플릿(bean template)과 같은 다른 메커니즘도 이 점에서 유용합니다.)

- **자동 연결은 객체가 발전함에 따라 구성을 업데이트할 수 있습니다.** 예를 들어, 클래스에 의존성을 추가해야 하는 경우, 구성을 수정할 필요 없이 그 의존성이 자동으로 충족될 수 있습니다. 따라서 자동 연결은 개발 과정에서 특히 유용하며, 코드베이스가 더 안정될 때 명시적 연결로 전환하는 옵션을 무효화하지 않습니다.

XML 기반 구성 메타데이터를 사용할 때(의존성 주입 참조), `<bean/>` 요소의 `autowire` 속성을 사용하여 빈 정의에 대한 자동 연결 모드를 지정할 수 있습니다. 자동 연결 기능에는 네 가지 모드가 있습니다. 빈마다 자동 연결을 지정할 수 있으므로 어떤 빈을 자동 연결할지 선택할 수 있습니다. 다음 표는 네 가지 자동 연결 모드를 설명합니다:

| Mode          | Explanation                                                                                                                                                                             |
| ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `no`          | (기본) 자동 연결 없음. 빈 참조는 `ref` 요소로 정의되어야 합니다. 기본 설정을 변경하는 것은 특히 대규모 배포에서 권장되지 않습니다. 협력자를 명시적으로 지정하면 더 큰 제어와 명확성을 제공하기 때문입니다. 어느 정도 시스템의 구조를 문서화하는 역할도 합니다.                                  |
| `byName`      | 속성 이름에 의한 자동 연결. 스프링은 자동 연결이 필요한 속성과 동일한 이름을 가진 빈을 찾습니다. 예를 들어, 빈 정의가 이름으로 자동 연결되도록 설정되고 `master` 속성(즉, `setMaster(..)` 메서드)이 포함된 경우, 스프링은 `master`라는 이름의 빈 정의를 찾아 해당 속성을 설정하는 데 사용합니다. |
| `byType`      | 속성 타입의 빈이 컨테이너에 정확히 하나만 존재하는 경우 그 속성을 자동 연결할 수 있습니다. 둘 이상 존재하면 치명적인 예외가 발생하여 해당 빈에 대해 `byType` 자동 연결을 사용할 수 없음을 나타냅니다. 일치하는 빈이 없으면 아무 일도 일어나지 않습니다(속성이 설정되지 않음).                        |
| `constructor` | `byType`과 유사하지만 생성자 인수에 적용됩니다. 생성자 인수 타입의 빈이 컨테이너에 정확히 하나만 존재하지 않으면 치명적인 오류가 발생합니다.                                                                                                     |

byType 또는 생성자 자동 연결 모드에서는 배열과 타입이 지정된 컬렉션을 연결할 수 있습니다. 이러한 경우, 의존성을 충족시키기 위해 예상되는 타입과 일치하는 컨테이너 내의 모든 자동 연결 후보가 제공됩니다. 예상 키 타입이 `String`인 경우, 강력하게 타입이 지정된 `Map` 인스턴스를 자동으로 연결할 수 있습니다. 자동 연결된 `Map` 인스턴스의 값은 예상 타입과 일치하는 모든 빈 인스턴스로 구성되며, `Map` 인스턴스의 키는 해당 빈 이름을 포함합니다.

## Limitations and Disadvantages of Autowiring

자동 연결은 프로젝트 전반에 걸쳐 일관되게 사용될 때 가장 효과적입니다. 일반적으로 자동 연결을 사용하지 않는 경우, 하나 또는 두 개의 빈 정의에만 자동 연결을 사용하는 것은 개발자들에게 혼란을 줄 수 있습니다.

자동 연결의 한계와 단점을 고려해보십시오:

- **속성(property) 및 생성자 인수(constructor-arg) 설정에서의 명시적 의존성은 항상 자동 연결을 우선합니다.** 프리미티브, 문자열(String), 클래스(Class)와 같은 단순 속성(및 이러한 단순 속성의 배열)은 자동 연결할 수 없습니다. 이 제한은 설계 상의 의도된 것입니다.

- **자동 연결은 명시적 연결보다 덜 정확합니다.** 앞서 언급한 표에서 알 수 있듯이, 스프링은 예상치 못한 결과를 초래할 수 있는 모호성의 경우 추측을 피하기 위해 신중하게 처리합니다. 스프링이 관리하는 객체들 간의 관계는 더 이상 명시적으로 문서화되지 않습니다.

- **스프링 컨테이너에서 문서를 생성할 수 있는 도구들이 연결 정보를 사용할 수 없을 수 있습니다.**

- **컨테이너 내의 여러 빈 정의가 자동 연결될 setter 메서드나 생성자 인수에 지정된 타입과 일치할 수 있습니다.** 배열, 컬렉션 또는 Map 인스턴스의 경우 이는 반드시 문제가 되지 않습니다. 그러나 단일 값을 기대하는 의존성의 경우, 이러한 모호성은 임의로 해결되지 않습니다. 고유한 빈 정의가 없으면 예외가 발생합니다.

이러한 시나리오에서는 다음과 같은 몇 가지 옵션이 있습니다:

1. **명시적 연결을 선호하여 자동 연결을 포기합니다.**

2. **다음 섹션에서 설명하는 바와 같이 빈 정의의 `autowire-candidate` 속성을 `false`로 설정하여 자동 연결을 피합니다.**

3. **빈 정의의 `<bean/>` 요소에 `primary` 속성을 `true`로 설정하여 단일 빈 정의를 기본 후보로 지정합니다.**

4. **애노테이션 기반 구성에서 제공하는 보다 세분화된 제어를 구현합니다. 이는 애노테이션 기반 컨테이너 구성(Annotation-based Container Configuration)에서 설명됩니다.**

## Excluding a Bean from Autowiring

빈 단위로, 자동 연결에서 빈을 제외할 수 있습니다. 스프링의 XML 형식에서는 `<bean/>` 요소의 `autowire-candidate` 속성을 `false`로 설정합니다; `@Bean` 애노테이션을 사용할 경우, 속성 이름은 `autowireCandidate`입니다. 컨테이너는 해당 특정 빈 정의를 자동 연결 인프라, 예를 들어 `@Autowired`와 같은 애노테이션 기반 주입 지점에서 사용할 수 없도록 만듭니다.

```
`autowire-candidate` 속성은 타입 기반 자동 연결에만 영향을 미치도록 설계되었습니다. 이름으로 명시적인 참조에는 영향을 미치지 않으며, 지정된 빈이 자동 연결 후보로 표시되지 않더라도 이름으로 명시된 참조는 해결됩니다. 결과적으로, 이름으로 자동 연결할 때 이름이 일치하면 빈이 주입됩니다.
```

빈 이름에 대한 패턴 매칭을 기반으로 자동 연결 후보를 제한할 수도 있습니다. 최상위 `<beans/>` 요소는 `default-autowire-candidates` 속성 내에서 하나 이상의 패턴을 허용합니다. 예를 들어, 이름이 `Repository`로 끝나는 모든 빈에 대해서만 자동 연결 후보 상태를 제한하려면 `*Repository` 값을 제공합니다. 여러 패턴을 제공하려면 쉼표로 구분된 목록으로 정의합니다. 빈 정의의 `autowire-candidate` 속성에 대한 명시적인 `true` 또는 `false` 값은 항상 우선됩니다. 이러한 빈에 대해서는 패턴 매칭 규칙이 적용되지 않습니다.

이러한 기술은 자동 연결을 통해 다른 빈에 주입되기를 원하지 않는 빈에 유용합니다. 이는 제외된 빈이 자동 연결을 사용하여 자체적으로 구성될 수 없다는 것을 의미하지 않습니다. 오히려, 해당 빈 자체는 다른 빈을 자동 연결할 후보가 아닙니다.

```
스프링 6.2부터, `@Bean` 메서드는 자동 연결 후보 플래그의 두 가지 변형인 `autowireCandidate`와 `defaultCandidate`를 지원합니다.

애노테이터를 사용할 때, `defaultCandidate=false`로 표시된 빈은 추가적인 애노테이터 표시가 있는 주입 지점에서만 사용할 수 있습니다. 이는 특정 영역에서 주입 가능해야 하지만 다른 곳에서 동일한 타입의 빈에 방해가 되지 않도록 하기 위한 제한된 대리자(delegate)에 유용합니다. 이러한 빈은 단순히 선언된 타입만으로는 주입되지 않고, 타입과 특정 애노테이터가 함께 있을 때만 주입됩니다.

반면, `autowireCandidate=false`는 위에서 설명한 `autowire-candidate` 속성과 정확히 동일하게 동작합니다: 이러한 빈은 타입으로 전혀 주입되지 않습니다.
```