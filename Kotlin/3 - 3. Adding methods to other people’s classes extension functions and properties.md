### 확장 프로퍼티란?

확장 프로퍼티는 기존 클래스에 새로운 프로퍼티를 추가할 수 있는 기능입니다. 확장 프로퍼티는 게터와 세터를 가질 수 있지만, 백킹 필드를 가질 수 없습니다. 즉, 확장 프로퍼티는 계산된 프로퍼티(computed property)입니다.

### 확장 프로퍼티 정의하기

확장 프로퍼티는 `val` 또는 `var` 키워드를 사용하여 정의합니다. `val`로 정의된 확장 프로퍼티는 읽기 전용이며, 게터만 가질 수 있습니다. `var`로 정의된 확장 프로퍼티는 읽기와 쓰기가 모두 가능하며, 게터와 세터를 가질 수 있습니다.

#### 읽기 전용 확장 프로퍼티

```kotlin
val String.lastChar: Char
    get() = this[this.length - 1]

```

이제 `String` 객체에 대해 `lastChar` 프로퍼티를 호출할 수 있습니다:

```kotlin
fun main() {
    val str = "Kotlin"
    println(str.lastChar) // 출력: n
}

```

#### 읽기 및 쓰기 확장 프로퍼티

```kotlin
var String.lastChar: Char
    get() = this[this.length - 1]
    set(value) {
        // 이 예제에서는 세터를 의미 있게 구현할 수 없습니다.
        // String은 불변 객체이기 때문에 세터를 구현하는 것이 의미가 없습니다.
    }
```

### 확장 프로퍼티의 주의점

1. **백킹 필드 없음**: 확장 프로퍼티는 백킹 필드를 가질 수 없습니다. 따라서 확장 프로퍼티는 계산된 프로퍼티로만 사용할 수 있습니다.
2. **정적 함수로 컴파일**: 확장 프로퍼티는 실제로는 정적 함수로 컴파일됩니다. 따라서 확장 프로퍼티 내에서 `this` 키워드를 사용하면 리시버 객체를 참조합니다.
3. **멤버 프로퍼티와의 우선순위**: 확장 프로퍼티와 동일한 이름의 멤버 프로퍼티가 있을 경우, 멤버 프로퍼티가 우선적으로 호출됩니다. 따라서 확장 프로퍼티는 멤버 프로퍼티를 오버라이드할 수 없습니다.
4. **가시성 제어**: 확장 프로퍼티는 클래스의 내부 구현에 접근할 수 없습니다. 즉, 확장 프로퍼티는 클래스의 공개된 멤버만 사용할 수 있습니다.
5. **세터의 제한**: 확장 프로퍼티의 세터는 리시버 객체의 상태를 변경할 수 없습니다. 예를 들어, `String` 클래스는 불변 객체이므로, 세터를 의미 있게 구현할 수 없습니다.

### 예제 코드

다음은 확장 프로퍼티를 정의하고 사용하는 예제 코드입니다:

```kotlin
fun main() {
    // 읽기 전용 확장 프로퍼티 정의
    val String.lastChar: Char
        get() = this[this.length - 1]

    val str = "Kotlin"
    println(str.lastChar) // 출력: n

    // 읽기 및 쓰기 확장 프로퍼티 정의
    var StringBuilder.lastChar: Char
        get() = this[this.length - 1]
        set(value) {
            this.setCharAt(this.length - 1, value)
        }

    val sb = StringBuilder("Kotlin")
    println(sb.lastChar) // 출력: n
    sb.lastChar = 'x'
    println(sb) // 출력: Kotlix
}
```

### 주의점 요약

백킹 필드(backing field)는 프로퍼티의 값을 저장하는 실제 변수를 의미

1. **백킹 필드 없음**: 확장 프로퍼티는 백킹 필드를 가질 수 없습니다.
2. **정적 함수로 컴파일**: 확장 프로퍼티는 정적 함수로 컴파일됩니다.
3. **멤버 프로퍼티와의 우선순위**: 멤버 프로퍼티가 확장 프로퍼티보다 우선순위가 높습니다.
4. **가시성 제어**: 확장 프로퍼티는 클래스의 공개된 멤버만 사용할 수 있습니다.
5. **세터의 제한**: 확장 프로퍼티의 세터는 리시버 객체의 상태를 변경할 수 없습니다.

이러한 주의점을 염두에 두고 확장 프로퍼티를 사용하면, Kotlin의 강력한 기능을 효과적으로 활용할 수 있습니다. 확장 프로퍼티는 기존 클래스의 기능을 확장하고, 코드의 가독성과 유지보수성을 높이는 데 큰 도움이 됩니다.

