## **Ansible 인벤토리 구성하기**

Ansible은 인프라 내의 하나 이상의 시스템과 동시에 작업할 수 있는 강력한 자동화 도구입니다. 여러 서버와 작업하기 위해서는 Ansible이 해당 서버들과의 연결을 확립해야 합니다. 이는 Linux의 경우 SSH, Windows의 경우 PowerShell Remoting을 사용하여 이루어집니다. 이러한 방식 덕분에 Ansible은 에이전트가 필요 없는(Agentless) 도구로 작동할 수 있습니다.


### **에이전트리스(Agentless) Ansible**

에이전트리스란 대상 머신에 추가 소프트웨어를 설치할 필요가 없음을 의미합니다. Ansible은 단순한 SSH 연결만으로도 충분히 작동할 수 있습니다. 반면, 대부분의 다른 오케스트레이션 도구들은 자동화를 실행하기 전에 대상 시스템에 에이전트를 설치해야 하는 단점이 있습니다.

### **인벤토리 파일의 역할**

Ansible이 작업할 대상 시스템에 대한 정보는 인벤토리 파일에 저장됩니다. 새로운 인벤토리 파일을 생성하지 않으면, Ansible은 기본 인벤토리 파일인 /etc/ansible/hosts를 사용합니다. 인벤토리 파일은 INI 형식과 유사하며, 서버들이 한 줄씩 나열되어 있습니다.

### **그룹화 및 별칭 설정**

서버를 그룹으로 묶을 수 있으며, 그룹 이름은 대괄호([]) 안에 정의됩니다. 예를 들어, 웹 서버나 데이터베이스 서버와 같은 별칭을 사용하여 서버를 참조할 수 있습니다. 다음은 샘플 인벤토리 파일의 예입니다:

  
```ini
[webservers]
web1 ansible_host=192.168.1.10
web2 ansible_host=192.168.1.11

[databases]
db1 ansible_host=192.168.1.20
db2 ansible_host=192.168.1.21
```

이처럼 하나의 인벤토리 파일 내에 여러 그룹을 정의할 수 있습니다.

### **인벤토리 파일의 주요 파라미터**

• **ansible_host**: 서버의 FQDN 또는 IP 주소를 지정합니다.
• **ansible_connection**: Ansible이 대상 서버에 연결하는 방식을 정의합니다. 예를 들어, Linux 서버에는 SSH, Windows 서버에는 WIN RM을 사용할 수 있습니다. 로컬 호스트와 작업하려면 local로 설정할 수도 있습니다.
• **ansible_port**: 연결할 포트를 정의합니다. 기본값은 SSH의 경우 22번 포트이지만, 필요에 따라 변경할 수 있습니다.
• **ansible_user**: 원격 연결에 사용할 사용자를 정의합니다. 기본값은 Linux의 경우 root입니다.
• **ansible_ssh_pass**: SSH 비밀번호를 정의합니다. 그러나 비밀번호를 평문으로 저장하는 것은 이상적이지 않으며, 보안상의 이유로 SSH 키 기반의 무비밀번호 인증을 설정하는 것이 권장됩니다.

### **보안 고려사항**

인벤토리 파일에 비밀번호를 평문으로 저장하는 것은 보안에 취약할 수 있습니다. 실제 운영 환경에서는 SSH 키 기반의 무비밀번호 인증을 설정하는 것이 최선의 방법입니다. 그러나 학습 목적으로 기본적인 사용자 이름과 비밀번호를 사용하는 설정으로 시작할 수 있습니다. 이렇게 하면 보안 문제를 설정 및 문제 해결에 신경 쓰지 않고 Ansible의 기본 기능을 익힐 수 있습니다.

## **결론**

이번 강의에서는 Ansible의 인벤토리 파일 구성에 대해 살펴보았습니다. 인벤토리 파일은 Ansible이 관리할 대상 시스템을 정의하고, 연결 방식 및 사용자 정보를 설정하는 중요한 역할을 합니다. 다음 강의에서는 인벤토리 파일과 Ansible을 활용한 실습을 통해 더욱 깊이 있는 내용을 다룰 예정이니, 코딩 챌린지에 참여하여 인벤토리 파일과 Ansible을 직접 다뤄보시기 바랍니다.

