**Kotlin Coroutineì˜ ìŠ¤ì½”í•‘ í•¨ìˆ˜ ì •ë¦¬ ë° ì˜ˆì œ**

  

Kotlin Coroutineì—ì„œ **Coroutine Scope**ì™€ **Supervisor Scope**ëŠ” ë³‘ë ¬ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì‘ì—…ì„ ì—¬ëŸ¬ ê°œì˜ ì„œë¸Œ íƒœìŠ¤í¬ë¡œ ë¶„í•´í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” ë‘ ìŠ¤ì½”í•‘ í•¨ìˆ˜ì˜ ì°¨ì´ì ê³¼ ì‚¬ìš© ë°©ë²•ì„ ì˜ˆì œë¥¼ í†µí•´ ì„¤ëª…í•©ë‹ˆë‹¤.

**1. Coroutine Scopeì™€ Supervisor Scope ê°œìš”**

  

ê¸°ë³¸ì ìœ¼ë¡œ, ì½”ë£¨í‹´ì€ **ê³„ì¸µì ì¸ êµ¬ì¡°**ë¥¼ ê°€ì§€ë©°, íŠ¹ì •í•œ **Coroutine Scope**ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, viewModelScope ë‚´ì—ì„œ ì‹¤í–‰ëœ ì½”ë£¨í‹´ë“¤ì€ í•´ë‹¹ ìŠ¤ì½”í”„ì˜ **ìì‹**ì´ ë©ë‹ˆë‹¤.
í•˜ì§€ë§Œ, **ìŠ¤ì½”í•‘ í•¨ìˆ˜**ë¥¼ ì‚¬ìš©í•˜ë©´ **ìƒˆë¡œìš´ ì„œë¸Œ ìŠ¤ì½”í”„**ë¥¼ ì›í•˜ëŠ” ìœ„ì¹˜ì— ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

â€¢ coroutineScope {} â†’ ìƒˆë¡œìš´ ì„œë¸Œ ìŠ¤ì½”í”„ë¥¼ ë§Œë“¤ë©°, **í•˜ìœ„ ì½”ë£¨í‹´ì´ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ ìŠ¤ì½”í”„ê°€ ì·¨ì†Œë¨**.
â€¢ supervisorScope {} â†’ ìƒˆë¡œìš´ ì„œë¸Œ ìŠ¤ì½”í”„ë¥¼ ë§Œë“¤ë©°, **í•˜ìœ„ ì½”ë£¨í‹´ì´ ì‹¤íŒ¨í•´ë„ ë‹¤ë¥¸ ì½”ë£¨í‹´ì´ ê³„ì† ì‹¤í–‰ë¨**.

**2. ê¸°ë³¸ ì˜ˆì œ: Coroutine Scope ì‚¬ìš©**

  

ì•„ë˜ ì½”ë“œëŠ” CoroutineScopeë¥¼ ì‚¬ìš©í•˜ì—¬ 3ê°œì˜ ì‘ì—…(Task 1, 2, 3)ì„ ì‹¤í–‰í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤.

  

**ğŸ“Œ ìš”êµ¬ì‚¬í•­**

1. Task 1ê³¼ Task 2ëŠ” ë³‘ë ¬ë¡œ ì‹¤í–‰ë¨.
2. Task 3ì€ Task 1ê³¼ Task 2ê°€ ì™„ë£Œëœ í›„ ì‹¤í–‰ë¨.

```kotlin
import kotlinx.coroutines.*

fun main() = runBlocking {
    val scope = CoroutineScope(Job())  // ìƒˆë¡œìš´ CoroutineScope ìƒì„±

    scope.launch {
        println("Task 1 ì‹œì‘")
        delay(100)
        println("Task 1 ì™„ë£Œ")
    }

    scope.launch {
        println("Task 2 ì‹œì‘")
        delay(200)
        println("Task 2 ì™„ë£Œ")
    }

    // Task 1ê³¼ Task 2ê°€ ëë‚œ í›„ ì‹¤í–‰
    scope.launch {
        delay(300) // ì¼ë¶€ëŸ¬ ë” ëŠ¦ê²Œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •
        println("Task 3 ì‹¤í–‰")
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**

```
Task 1 ì‹œì‘
Task 2 ì‹œì‘
Task 1 ì™„ë£Œ
Task 2 ì™„ë£Œ
Task 3 ì‹¤í–‰
```

Task 1ê³¼ Task 2ê°€ ë™ì‹œì— ì‹¤í–‰ë˜ê³ , Task 3ì€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ì‹¤í–‰ë¨.

**3. coroutineScope í™œìš©: ë” ê¹”ë”í•œ ì½”ë“œ**

ìœ„ ì½”ë“œì—ì„œ Task 3ì„ Task 1, 2ê°€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê²Œ í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ëŠ” coroutineScopeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

```kotlin
import kotlinx.coroutines.*

fun main() = runBlocking {
    coroutineScope {
        launch {
            println("Task 1 ì‹œì‘")
            delay(100)
            println("Task 1 ì™„ë£Œ")
        }

        launch {
            println("Task 2 ì‹œì‘")
            delay(200)
            println("Task 2 ì™„ë£Œ")
        }
    }
    
    // Task 3ì€ Task 1, 2ê°€ ëë‚œ í›„ ì‹¤í–‰ë¨
    println("Task 3 ì‹¤í–‰")
}
```

**ì‹¤í–‰ ê²°ê³¼**

```
Task 1 ì‹œì‘
Task 2 ì‹œì‘
Task 1 ì™„ë£Œ
Task 2 ì™„ë£Œ
Task 3 ì‹¤í–‰
```

coroutineScope ë¸”ë¡ ë‚´ì˜ ëª¨ë“  ì½”ë£¨í‹´ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°í•œ í›„, Task 3ì´ ì‹¤í–‰ë¨.

**4. coroutineScope vs supervisorScope ë¹„êµ**

**(1) coroutineScope**

â€¢ ë‚´ë¶€ì—ì„œ ì‹¤í–‰ëœ ì½”ë£¨í‹´ ì¤‘ **í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ ìŠ¤ì½”í”„ê°€ ì·¨ì†Œë¨**.
â€¢ ì˜ˆì œì—ì„œ ì¼ë¶€ëŸ¬ Task 2ì—ì„œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ë©´, Task 3ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ.

```kotlin
import kotlinx.coroutines.*

fun main() = runBlocking {
    try {
        coroutineScope {
            launch {
                println("Task 1 ì‹œì‘")
                delay(100)
                println("Task 1 ì™„ë£Œ")
            }

            launch {
                println("Task 2 ì‹œì‘")
                delay(200)
                throw Exception("Task 2 ì‹¤íŒ¨")  // ì¼ë¶€ëŸ¬ ì˜ˆì™¸ ë°œìƒ
            }
        }
    } catch (e: Exception) {
        println("ì˜ˆì™¸ ë°œìƒ: ${e.message}")
    }

    println("Task 3 ì‹¤í–‰")  // ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
}
```

**ì‹¤í–‰ ê²°ê³¼**

```
Task 1 ì‹œì‘
Task 2 ì‹œì‘
ì˜ˆì™¸ ë°œìƒ: Task 2 ì‹¤íŒ¨
```

Task 2ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ì **ì „ì²´ ìŠ¤ì½”í”„ê°€ ì¢…ë£Œë˜ì—ˆìœ¼ë©°, Task 3ë„ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ**.

**(2) supervisorScope**

â€¢ ë‚´ë¶€ì—ì„œ ì‹¤í–‰ëœ ì½”ë£¨í‹´ ì¤‘ **í•˜ë‚˜ê°€ ì‹¤íŒ¨í•´ë„ ë‚˜ë¨¸ì§€ëŠ” ê³„ì† ì‹¤í–‰ë¨**.
â€¢ ì•„ë˜ ì˜ˆì œì—ì„œ Task 2ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ Task 3ì´ ì‹¤í–‰ë¨.

```kotlin
import kotlinx.coroutines.*

fun main() = runBlocking {
    supervisorScope {
        launch {
            println("Task 1 ì‹œì‘")
            delay(100)
            println("Task 1 ì™„ë£Œ")
        }

        launch {
            println("Task 2 ì‹œì‘")
            delay(200)
            throw Exception("Task 2 ì‹¤íŒ¨")  // ì¼ë¶€ëŸ¬ ì˜ˆì™¸ ë°œìƒ
        }
    }

    println("Task 3 ì‹¤í–‰")  // ì‹¤í–‰ë¨
}
```

**ì‹¤í–‰ ê²°ê³¼**

```
Task 1 ì‹œì‘
Task 2 ì‹œì‘
Task 1 ì™„ë£Œ
Task 3 ì‹¤í–‰
Exception in coroutine Task 2 ì‹¤íŒ¨
```

Task 2ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì§€ë§Œ, Task 1ê³¼ Task 3ì€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë¨.

**5. suspend í•¨ìˆ˜ì—ì„œ ìŠ¤ì½”í•‘ í•¨ìˆ˜ ì‚¬ìš©**

suspend í•¨ìˆ˜ ë‚´ë¶€ì—ì„œëŠ” launchë¥¼ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ **coroutineScope ë˜ëŠ” supervisorScopeë¥¼ ì‚¬ìš©**í•´ì•¼ í•©ë‹ˆë‹¤.

  

**ğŸ“Œ ì˜ˆì œ: suspend í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ coroutineScope ì‚¬ìš©**

```kotlin
import kotlinx.coroutines.*

suspend fun doSomeTasks() = coroutineScope {
    launch {
        println("Task 1 ì‹œì‘")
        delay(100)
        println("Task 1 ì™„ë£Œ")
    }

    launch {
        println("Task 2 ì‹œì‘")
        delay(200)
        println("Task 2 ì™„ë£Œ")
    }
}

fun main() = runBlocking {
    doSomeTasks()
    println("Task 3 ì‹¤í–‰")
}
```

**ì‹¤í–‰ ê²°ê³¼**

```
Task 1 ì‹œì‘
Task 2 ì‹œì‘
Task 1 ì™„ë£Œ
Task 2 ì™„ë£Œ
Task 3 ì‹¤í–‰
```

doSomeTasks()ê°€ ëë‚  ë•Œê¹Œì§€ Task 3ì´ ê¸°ë‹¤ë¦° í›„ ì‹¤í–‰ë¨.

**6. ì •ë¦¬**

|**ìŠ¤ì½”í•‘ í•¨ìˆ˜**|**íŠ¹ì§•**|**ì‹¤íŒ¨ ì‹œ ë™ì‘**|
|---|---|---|
|coroutineScope|ëª¨ë“  ìì‹ì´ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸°|í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ ì·¨ì†Œ|
|supervisorScope|ëª¨ë“  ìì‹ì´ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸°|ì‹¤íŒ¨í•œ ìì‹ë§Œ ì¢…ë£Œ, ë‚˜ë¨¸ì§€ëŠ” ê³„ì† ì‹¤í–‰|

**âœ… ì–¸ì œ ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í• ê¹Œ?**

â€¢ **ì½”ë£¨í‹´ ê°„ ì¢…ì†ì„±ì´ í´ ê²½ìš°** â†’ coroutineScope ì‚¬ìš©

â€¢ **ë…ë¦½ì ì¸ ì‘ì—…ì„ ë³‘ë ¬ ì‹¤í–‰í•  ê²½ìš°** â†’ supervisorScope ì‚¬ìš©

  

coroutineScopeëŠ” **ê¸°ë³¸ì ì¸ ê²½ìš°**ì— ì‚¬ìš©í•˜ê³ , íŠ¹ì •í•œ ì‹¤íŒ¨ í—ˆìš©ì´ í•„ìš”í•œ ê²½ìš°ì— supervisorScopeë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

ì´ì œ coroutineScopeì™€ supervisorScopeì˜ ì°¨ì´ì ê³¼ ì‚¬ìš© ë°©ë²•ì„ ì´í•´í–ˆì„ ê²ƒì…ë‹ˆë‹¤!

í”„ë¡œì íŠ¸ì—ì„œ ìƒí™©ì— ë§ëŠ” ìŠ¤ì½”í•‘ í•¨ìˆ˜ë¥¼ ì ì ˆíˆ ì‚¬ìš©í•´ë³´ì„¸ìš”. ğŸš€