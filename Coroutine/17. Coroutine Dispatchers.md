

## **1. Dispatcherë€?**

â€¢ **Dispatcher**ëŠ” ì½”ë£¨í‹´ì´ **ì–´ë–¤ ìŠ¤ë ˆë“œ ë˜ëŠ” ìŠ¤ë ˆë“œ í’€ì—ì„œ ì‹¤í–‰ë ì§€**ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.
â€¢ ì½”ë£¨í‹´ ì‹¤í–‰ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” **Coroutine Context**ì˜ ì¤‘ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.

## **2. ì‚¬ì „ ì •ì˜ëœ Dispatcher**

### **2.1 Dispatchers.Main**

â€¢ **UI ì• í”Œë¦¬ì¼€ì´ì…˜**ì—ì„œ ì‚¬ìš©ë˜ëŠ” Dispatcher.
â€¢ Android ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ **ë©”ì¸ ìŠ¤ë ˆë“œ**ì—ì„œ ì‘ì—…ì„ ì‹¤í–‰.
â€¢ ì£¼ë¡œ **ViewModel Scope**ì™€ ê°™ì´ UI ê´€ë ¨ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ì½”ë£¨í‹´ì— ì‚¬ìš©ë©ë‹ˆë‹¤.
â€¢ **ë™ì‘ ì›ë¦¬**:
	â€¢ Androidì˜ Handlerë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì¸ ìŠ¤ë ˆë“œì˜ ë©”ì‹œì§€ íì— **Runnable** í˜•íƒœë¡œ ì‘ì—…ì„ ì¶”ê°€.


**ì‚¬ìš© ì˜ˆì œ**

```kotlin
viewModelScope.launch(Dispatchers.Main) {
    // UI ì—…ë°ì´íŠ¸ ì‘ì—…
    textView.text = "Hello, World!"
}
```
  

### **2.2 Dispatchers.IO**

â€¢ **I/O ê´€ë ¨ ë¸”ë¡œí‚¹ ì‘ì—…**ì— ì í•©í•œ Dispatcher.
â€¢ ì˜ˆ: íŒŒì¼ ì½ê¸°/ì“°ê¸°, ë„¤íŠ¸ì›Œí¬ ìš”ì²­.
â€¢ ë‚´ë¶€ì ìœ¼ë¡œ **ê³µìœ  ìŠ¤ë ˆë“œ í’€**ì„ ì‚¬ìš©í•˜ë©°, ìµœëŒ€ **64ê°œì˜ ìŠ¤ë ˆë“œ**ë¥¼ ìƒì„± ê°€ëŠ¥.
â€¢ **I/O ì‘ì—…**ì´ ë§ì„ ê²½ìš°, ë§ì€ ìŠ¤ë ˆë“œê°€ **ëŒ€ê¸° ìƒíƒœ**ê°€ ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë„‰ë„‰í•œ ìŠ¤ë ˆë“œ í’€ì„ ì œê³µ.

**ì‚¬ìš© ì˜ˆì œ**

```kotlin
viewModelScope.launch(Dispatchers.IO) {
    val data = fetchDataFromNetwork()
    withContext(Dispatchers.Main) {
        // ë„¤íŠ¸ì›Œí¬ ê²°ê³¼ë¥¼ UIì— í‘œì‹œ
        textView.text = data
    }
}
```
  

### **2.3 Dispatchers.Default**

â€¢ **CPU ì§‘ì¤‘ ì‘ì—…**(CPU-intensive tasks)ì— ì í•©.
â€¢ ì˜ˆ: ë³µì¡í•œ ê³„ì‚°, ëŒ€ê·œëª¨ ë°ì´í„° ì •ë ¬, JSON íŒŒì‹±.
â€¢ ë‚´ë¶€ì ìœ¼ë¡œ **ê³µìœ  ìŠ¤ë ˆë“œ í’€**ì„ ì‚¬ìš©í•˜ë©°, **CPU ì½”ì–´ ìˆ˜ì™€ ë™ì¼í•œ ìŠ¤ë ˆë“œ**ë¥¼ ìƒì„±.
â€¢ ìŠ¤ë ˆë“œ í’€ í¬ê¸°ê°€ ì‘ì•„ **ìŠ¤ë ˆë“œ ê°„ ì „í™˜ ë¹„ìš©**ì„ ì¤„ì´ê³  CPU ì‚¬ìš©ì„ ìµœì í™”.

**ì‚¬ìš© ì˜ˆì œ**

```kotlin
viewModelScope.launch(Dispatchers.Default) {
    val factorial = calculateFactorial(1000)
    withContext(Dispatchers.Main) {
        // ê³„ì‚° ê²°ê³¼ë¥¼ UIì— í‘œì‹œ
        textView.text = factorial.toString()
    }
}
```
  

### **2.4 Dispatchers.Unconfined**

â€¢ **íŠ¹ì • ìŠ¤ë ˆë“œì— ì œí•œë˜ì§€ ì•Šì€ Dispatcher**.
â€¢ ì½”ë£¨í‹´ì€ **ì‹œì‘ëœ ìŠ¤ë ˆë“œ**ì—ì„œ ì‹¤í–‰ë˜ë©°, í˜¸ì¶œë˜ëŠ” suspend í•¨ìˆ˜ì— ë”°ë¼ ë‹¤ë¥¸ ìŠ¤ë ˆë“œë¡œ ì „í™˜ë  ìˆ˜ ìˆìŒ.
â€¢ **ì‚¬ìš© ìì œ ê¶Œì¥**:
	â€¢ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ë™ì‘ìœ¼ë¡œ ì¸í•´ ì¼ë°˜ì ì¸ ì½”ë“œì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŒ.

  

**ì‚¬ìš© ì˜ˆì œ**

```kotlin
GlobalScope.launch(Dispatchers.Unconfined) {
    println("Unconfined: ${Thread.currentThread().name}")
    delay(1000)
    println("After delay: ${Thread.currentThread().name}")
}
```
  

## **3. Dispatcher ê°„ ì°¨ì´ì **

| **Dispatcher** | **ì‚¬ìš©** **í™˜ê²½** | **ìŠ¤ë ˆë“œ** **í’€** **í¬ê¸°** | **ì‚¬ìš©** **ì‚¬ë¡€**               |
| -------------- | ------------- | -------------------- | --------------------------- |
| Main           | UI ê´€ë ¨ ì‘ì—…      | ë©”ì¸ ìŠ¤ë ˆë“œ(1ê°œ)           | UI ì—…ë°ì´íŠ¸, ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬          |
| IO             | I/O ì‘ì—…        | ìµœëŒ€ 64ê°œì˜ ìŠ¤ë ˆë“œ          | ë„¤íŠ¸ì›Œí¬ ìš”ì²­, íŒŒì¼ ì½ê¸°/ì“°ê¸°           |
| Default        | CPU ì§‘ì¤‘ ì‘ì—…     | CPU ì½”ì–´ ìˆ˜ì™€ ë™ì¼ (ìµœì†Œ 2ê°œ) | ë³µì¡í•œ ê³„ì‚°, JSON íŒŒì‹±, ëŒ€ê·œëª¨ ë°ì´í„° ì²˜ë¦¬ |
| Unconfined     | í…ŒìŠ¤íŠ¸ ë° íŠ¹ìˆ˜ ìƒí™©   | íŠ¹ì • ìŠ¤ë ˆë“œ ì—†ìŒ            | ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ                  |

## **4. ì»¤ìŠ¤í…€ Dispatcher ìƒì„±**


Kotlin CoroutinesëŠ” ê¸°ë³¸ ì œê³µ Dispatcher ì™¸ì—ë„, **ì‚¬ìš©ì ì •ì˜ Dispatcher**ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ë„êµ¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### **4.1 newSingleThreadContext**

â€¢ **ë‹¨ì¼ ìŠ¤ë ˆë“œ**ì—ì„œ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ” Dispatcher ìƒì„±.

**ì‚¬ìš© ì˜ˆì œ**

```kotlin
val singleThreadDispatcher = newSingleThreadContext("MySingleThread")

GlobalScope.launch(singleThreadDispatcher) {
    println("Single Thread: ${Thread.currentThread().name}")
}
```

### **4.2 newFixedThreadPoolContext**

â€¢ **ê³ ì • í¬ê¸° ìŠ¤ë ˆë“œ í’€**ì„ ì‚¬ìš©í•˜ëŠ” Dispatcher ìƒì„±.

**ì‚¬ìš© ì˜ˆì œ**

```kotlin
val fixedThreadPoolDispatcher = newFixedThreadPoolContext(4, "MyThreadPool")

GlobalScope.launch(fixedThreadPoolDispatcher) {
    println("Thread Pool: ${Thread.currentThread().name}")
}
```

### **4.3 Executor ê¸°ë°˜ Dispatcher**

â€¢ **ì»¤ìŠ¤í…€ Executor**ë¥¼ ì‚¬ìš©í•˜ì—¬ Dispatcher ìƒì„±.

**ì‚¬ìš© ì˜ˆì œ**

```kotlin
val fixedThreadPoolDispatcher = newFixedThreadPoolContext(4, "MyThreadPool")

GlobalScope.launch(fixedThreadPoolDispatcher) {
    println("Thread Pool: ${Thread.currentThread().name}")
}
```

## **5. Dispatcher ì‚¬ìš© ìš”ë ¹**

1. **UI ê´€ë ¨ ì‘ì—…**: Dispatchers.Main ì‚¬ìš©.
2. **I/O ì‘ì—…**: Dispatchers.IO ì‚¬ìš©.
3. **CPU ì§‘ì¤‘ ì‘ì—…**: Dispatchers.Default ì‚¬ìš©.
4. **ì»¤ìŠ¤í…€ ìŠ¤ë ˆë“œ ê´€ë¦¬ í•„ìš” ì‹œ**: newSingleThreadContext ë˜ëŠ” newFixedThreadPoolContext ì‚¬ìš©.

## **6. ê²°ë¡ **

â€¢ **Dispatcher**ëŠ” ì½”ë£¨í‹´ì´ ì‹¤í–‰ë  ìŠ¤ë ˆë“œ í™˜ê²½ì„ ì„¤ì •í•˜ëŠ” í•µì‹¬ ìš”ì†Œì…ë‹ˆë‹¤.=
â€¢ ì‚¬ì „ ì •ì˜ëœ Dispatcher(Main, IO, Default)ëŠ” ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¶©ë¶„íˆ í™œìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
â€¢ íŠ¹ìˆ˜í•œ ìš”êµ¬ì‚¬í•­ì´ ìˆëŠ” ê²½ìš° ì»¤ìŠ¤í…€ Dispatcherë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Dispatcherë¥¼ ì ì ˆíˆ í™œìš©í•˜ë©´ ì½”ë£¨í‹´ ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ê³¼ ì•ˆì •ì„±ì„ ê·¹ëŒ€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ˜Š