# **🎯 Helm Chart 의존성 버전 범위 설정**

## **1. 버전 범위 사용하기**

- Helm에서는 의존성 차트의 **버전 범위**를 지정할 수 있다. 예를 들어, >=, <=, = 등을 사용하여 버전 범위를 지정할 수 있음.

```yml
dependencies:
  - name: mysql
    version: ">=8.8.6, <9.0.0"
    repository: https://charts.bitnami.com/bitnami
```

### **가능한 연산자:**
- = : 정확히 일치하는 버전
- >= : 지정된 버전 이상
- < : 지정된 버전 미만
- <= : 지정된 버전 이하

> ✅ **범위 지정 이유**:
> 버전 범위를 사용하면 **미래 버전**을 자동으로 지원할 수 있다.
> 예를 들어, 2개월 후에 MySQL 9.0.0이 출시되면, >=8.8.6, <9.0.0으로 설정된 경우 자동으로 **9.0.0 버전**을 받아올 수 있다.

---

## **2. 특수 연산자: ^ 와 ~**
- **캐럿 (^) 연산자**:
    주로 **주요 버전**(Major version)을 고정하고, **보조 버전**(Minor version)과 **패치 버전**(Patch version)은 최신으로 업데이트

```yml
version: "^8.8.6"
```

이렇게 설정하면 Helm은 >=8.8.6 버전과 **다음 주요 버전(9.x.x)** 미만의 최신 버전을 가져옵니다.

- **틸드 (~) 연산자**:
    **패치 버전**만 업데이트하고, 주요 버전과 보조 버전은 고정

```yml
version: "~8.8.6"
```

이렇게 설정하면 >=8.8.6이지만, **다음 보조 버전**까지의 버전만 가져옵니다. 예를 들어 8.9.x는 허용되지만, 9.x.x는 불허합니다.

---

## **3. Helm Lock 파일 (Chart.lock )**

- helm dependency update 명령어를 실행하면, **Chart.lock** 파일이 생성된다.
- Chart.lock은 정확한 버전을 고정하며, 의존성 차트가 범위 내에서 자동으로 최신 버전을 선택한 뒤 해당 버전을 기록.

```sh
$ helm update dependency
```

- 이 파일은 다른 환경에서 **일관된 의존성 버전**을 보장.

> 📌 **Chart.lock** 파일은 Node.js의 package-lock.json과 유사하며, 설치 환경마다 **같은 버전**을 보장합니다.

---

## **4. Helm 의존성 업데이트**

- 의존성 업데이트 시 Helm은 지정된 범위 내에서 최신 버전을 선택해 **자동으로 다운로드**하고, Chart.lock 파일에 그 버전을 기록.

```
helm dependency update
```

---

# **📌 요약**

|**단계**|**설명**|
|---|---|
|1|의존성 버전 범위 설정 (>=, <=, =, ^, ~)|
|2|Helm은 범위 내에서 최신 버전을 자동으로 다운로드|
|3|Chart.lock 파일을 사용하여 일관된 버전 보장|

---

### **한 줄 정리**

**“버전 범위와 Helm Lock 파일을 사용하면, 미래에 버전이 업데이트 되어도 자동으로 최신 호환 버전을 받아올 수 있다!”**
