## **🔍 Helm Dry Run: 설치 전에 미리보기**

### **✅ 명령어 예시**

```
helm install mydb bitnami/mysql \
  --values ~/Documents/helm/my-values.yaml \
  --dry-run
```

---

## **🧠 Dry Run이란?**

- Helm이 **차트를 실제로 설치하지 않고** 실행 흐름을 시뮬레이션함
- 실제 클러스터에는 **아무 리소스도 생성되지 않음**
- 내부적으로는 아래 **1~4단계**까지는 모두 수행됨 (설치 제외)

---

## **⚙️ Dry Run의 작동 방식**

|**단계**|**설명**|
|---|---|
|1️⃣|차트(chart) 및 의존성 로딩|
|2️⃣|values.yaml 로드 및 사용자 값 오버라이드|
|3️⃣|템플릿 렌더링 (값이 치환된 YAML 생성)|
|4️⃣|YAML 생성 후 출력 (⚠️ 클러스터에는 **미반영**)|
|5️⃣|❌ **리소스는 실제 생성되지 않음**|

---

## **📦 Dry Run 출력 구조**

Dry run을 실행하면 **터미널에 3가지 주요 섹션**이 출력됨:

### **1. 🎯 Release 정보**

- 이름: mydb
- 상태: pending-install (왜냐하면 설치 안 했으니까!)
- 네임스페이스, revision 등도 확인 가능

---

### **2. 📄 Kubernetes 템플릿 (매우 중요!)**

- 실제로 생성될 Kubernetes 리소스들이 YAML 형태로 출력됨
- 예시로 MySQL 차트를 사용했다면:
    - ServiceAccount
    - Secret
    - ConfigMap
    - Service
    - StatefulSet 등

🔍 이 부분을 통해 “내가 기대한 리소스가 잘 생성되고 있는지”를 미리 확인할 수 있음

---

### **3. 📝 릴리스 노트 (NOTES.txt)**

- 패스워드, 접속 방법 등 유용한 정보 포함
- 실제 helm install 시에도 마지막에 나오는 부분과 동일
- 나중에 **내가 만든 Helm 차트에도 이 노트를 포함**할 수 있음

---

## **🛠️ Dry Run 활용 팁**

- **템플릿 디버깅**에 유용 (값이 잘 치환됐는지, 리소스가 누락되지 않았는지)
- **CI/CD에서 사전 검증용**으로 사용 가능
- 설치 전 **의도하지 않은 리소스 생성 방지**

---

## **🧪 마무리 요약**

|**기능**|**Dry Run 효과**|
|---|---|
|실습 전 검증|✅ 어떤 리소스가 생성될지 확인 가능|
|값 치환 확인|✅ values.yaml 값이 잘 들어갔는지 검토 가능|
|디버깅|✅ 오류 없이 설치 가능할지 사전 확인 가능|
|안전성|✅ 실제 리소스는 생성되지 않으므로 안전함|
