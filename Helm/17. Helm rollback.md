
## **ğŸ”**Â **helm rollback: íŠ¹ì • ë¦´ë¦¬ì¦ˆ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±**

### **ğŸ”¹ ë¡¤ë°±ì˜ ë°°ê²½**

```
helm history mywebserver
```

ì˜ˆì‹œ ê²°ê³¼:

```
REVISION  UPDATED                  STATUS   DESCRIPTION
1         2025-04-17T10:00:00Z     deployed Install complete
2         2025-04-17T10:10:00Z     failed   Upgrade "mywebserver" failed
```

- ë²„ì „ 2ëŠ” ì—…ê·¸ë ˆì´ë“œ ì‹¤íŒ¨ ìƒíƒœ
- ì•ˆì •ì ì¸ ìƒíƒœì˜€ë˜ **ë²„ì „ 1ë¡œ ë˜ëŒë¦¬ê³  ì‹¶ìŒ**

---

### **ğŸ”¨ ë¡¤ë°± ëª…ë ¹ì–´**

```
helm rollback mywebserver 1
```

âœ… ì‹¤í–‰ ê²°ê³¼:
- **ë²„ì „ 3**ì´ ìƒˆë¡œ ìƒì„±ë¨
- ë‚´ë¶€ì ìœ¼ë¡œëŠ” **ë²„ì „ 1ì˜ ì„¤ì •/í…œí”Œë¦¿ì„ ì¬ì‚¬ìš©**

```
helm history mywebserver
```

```
REVISION  UPDATED                  STATUS     DESCRIPTION
1         ...                      deployed   Install complete
2         ...                      failed     Upgrade failed
3         ...                      deployed   Rollback to 1
```

---

## **ğŸ” ê´€ë ¨ ì‹œí¬ë¦¿ í™•ì¸**

```
kubectl get secret
```

- sh.helm.release.v1.mywebserver.v1
- sh.helm.release.v1.mywebserver.v2
- sh.helm.release.v1.mywebserver.v3
    â†’ ë¡¤ë°± ì‹œì—ë„ ìƒˆë¡œìš´ ì‹œí¬ë¦¿ì´ ìƒì„±ë¨

---

## **âŒ ì‚­ì œ (Uninstall) ì‹œ íˆìŠ¤í† ë¦¬ ìœ ì§€ ì—¬ë¶€**

### **1. íˆìŠ¤í† ë¦¬**Â 

### **ìœ ì§€í•˜ë©´ì„œ ì‚­ì œ**

```
helm uninstall mywebserver --keep-history
```

- Helm ë¦´ë¦¬ìŠ¤ëŠ” ì‚­ì œë˜ì§€ë§Œ,
- helm history mywebserver ì—¬ì „íˆ ì¡°íšŒ ê°€ëŠ¥
- helm rollbackë„ ì‚¬ìš© ê°€ëŠ¥

```
helm rollback mywebserver 3
```

â†’ ì‚­ì œëœ ìƒíƒœì—ì„œë„ **íˆìŠ¤í† ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¬ì„¤ì¹˜ ê°€ëŠ¥**

---

### **2. íˆìŠ¤í† ë¦¬ ì—†ì´ ì™„ì „ ì‚­ì œ**

```
helm uninstall mywebserver
```

- --keep-history ì˜µì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´,
- **ì´ë ¥ë„ ëª¨ë‘ ì‚­ì œë¨**

```
helm history mywebserver
```

```
Error: release: not found
```

```
kubectl get secret
```

â†’ ê´€ë ¨ëœ sh.helm.release.v1.mywebserver.* ì‹œí¬ë¦¿ë„ ëª¨ë‘ ì‚¬ë¼ì§

---
## **ğŸ§  ìš”ì•½**

| **ëª…ë ¹ì–´**                              | **ì„¤ëª…**        |
| ------------------------------------ | ------------- |
| helm rollback <ë¦´ë¦¬ìŠ¤ëª…> <ë²„ì „>            | ì§€ì •í•œ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±   |
| helm uninstall <ë¦´ë¦¬ìŠ¤ëª…> --keep-history | ì‚­ì œí•˜ë˜ íˆìŠ¤í† ë¦¬ëŠ” ìœ ì§€ |
| helm uninstall <ë¦´ë¦¬ìŠ¤ëª…>                | íˆìŠ¤í† ë¦¬ê¹Œì§€ ì™„ì „ ì‚­ì œ  |

---

ğŸ“Œ **íŒ ì •ë¦¬**

- ì‹¤íŒ¨í•œ ì—…ê·¸ë ˆì´ë“œ ì´í›„ **ì •ìƒ ìƒíƒœë¡œ ë¹ ë¥´ê²Œ ë³µêµ¬**í•  ë•Œ helm rollbackì„ í™œìš©
- Helmì€ ë‚´ë¶€ì ìœ¼ë¡œ **ë²„ì „ë³„ ì‹œí¬ë¦¿(Secret)** ìœ¼ë¡œ ìƒíƒœë¥¼ ì €ì¥
- ë¡¤ë°± ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ **íˆìŠ¤í† ë¦¬ê°€ ë‚¨ì•„ ìˆì–´ì•¼ í•¨**
- ì‚­ì œí•  ë•Œ --keep-history ì˜µì…˜ì„ ê¼­ ê¸°ì–µí•˜ì!
