ë¬¼ë¡ ì´ì£ ! ì´ë²ˆ ê°•ì˜ì—ì„œëŠ” helm templateê³¼ helm install --dry-run ë‘ ëª…ë ¹ì–´ì˜ ì°¨ì´ì ê³¼, Helm í…œí”Œë¦¿ ë””ë²„ê¹…ì— ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì— í•µì‹¬ ë‚´ìš©ì„ ì •ë¦¬í•´ë“œë¦´ê²Œìš”. ğŸ‘‡

---

## **ğŸ§ª Helm í…œí”Œë¦¿ ë””ë²„ê¹…:**Â 

## **dry-run**

## Â **vs**Â 

## **template**

---

### **âš™ï¸ 1.**Â 

### **helm install --dry-run**

```
helm install my-app first-chart --dry-run
```

ğŸ” **íŠ¹ì§•:**

- **ì„¤ì¹˜í•˜ì§€ ì•Šê³ ** í…œí”Œë¦¿ë§Œ ë Œë”ë§
    
- **ë¬¸ë²• ì˜¤ë¥˜ + Kubernetes ìŠ¤í‚¤ë§ˆ ê²€ì¦**ê¹Œì§€ ìˆ˜í–‰
    
- **í´ëŸ¬ìŠ¤í„°ì™€ í†µì‹ **í•´ì„œ ë¦¬ì†ŒìŠ¤ ìœ íš¨ì„± ê²€ì‚¬ ìˆ˜í–‰
    

  

ğŸ“Œ **ì˜ˆ: ì¤‘ê´„í˜¸ ëˆ„ë½ ì‹œ**

```
metadata:
  name: {{ .Values.name      â† ì¤‘ê´„í˜¸ í•˜ë‚˜ ëˆ„ë½
```

ì‹¤í–‰ ì‹œ:

```
Error: parse error in "deployment.yaml": unexpected closing in operand
```

ğŸ“Œ **ì˜ˆ: kind í•„ë“œ ëˆ„ë½ ì‹œ**

```
apiVersion: apps/v1
metadata:
  name: my-app
# kind: Deployment â† ì£¼ì„ ì²˜ë¦¬
```

ì‹¤í–‰ ì‹œ:

```
Error: unable to build Kubernetes objects from release manifest: error validating data: ValidationError(Deployment): missing required field "kind"
```

âœ… **dry-runì€ ìŠ¤í‚¤ë§ˆ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•´ì£¼ë¯€ë¡œ ì‹¤ ë°°í¬ ì „ ê²€ì¦ ìš©ë„ë¡œ ìœ ìš©**í•©ë‹ˆë‹¤.

---

### **ğŸ§¾ 2.**Â 

### **helm template**

```
helm template first-chart
```

ğŸ” **íŠ¹ì§•:**

- **í…œí”Œë¦¿ì„ ë¡œì»¬ì—ì„œ ë Œë”ë§**
    
- **ë¬¸ë²• ì˜¤ë¥˜ëŠ” í™•ì¸ ê°€ëŠ¥**
    
- **Kubernetes ìŠ¤í‚¤ë§ˆ ìœ íš¨ì„± ê²€ì‚¬ëŠ” ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ**
    

  

ğŸ“Œ **ì˜ˆ: ì¤‘ê´„í˜¸ ëˆ„ë½ ì‹œ**

```
Error: parse error in "deployment.yaml": unexpected "}"
```

ğŸ“Œ **ì˜ˆ: kind ëˆ„ë½ ì‹œì—ë„ ì„±ê³µ**

  

í…œí”Œë¦¿ì€ ì •ìƒ ìƒì„±ë˜ì§€ë§Œ:

```
apiVersion: apps/v1
metadata:
  name: my-app
# kind ì—†ìŒ
```

â†’ **Kubernetesì— ì ìš©í•˜ë©´ ì˜¤ë¥˜ ë°œìƒ**

---

### **ğŸ§  ìš”ì•½ ë¹„êµ**

|**ê¸°ëŠ¥**|helm template|helm install --dry-run|
|---|---|---|
|í…œí”Œë¦¿ ë Œë”ë§|âœ… O|âœ… O|
|ë¬¸ë²• ì˜¤ë¥˜ ê°ì§€|âœ… O|âœ… O|
|ìŠ¤í‚¤ë§ˆ ìœ íš¨ì„± ê²€ì‚¬|âŒ X|âœ… O (K8s ê°ì²´ ìœ íš¨ì„± í™•ì¸)|
|Kubernetesì™€ í†µì‹ |âŒ X|âœ… O|
|ì‹¤ì œ ë°°í¬ ì—¬ë¶€|âŒ No|âŒ No|
|ë””ë²„ê¹…ì— ì¶”ì²œ ì‚¬ìš©ì²˜|êµ¬ë¬¸ í™•ì¸|ì‹¤ ë°°í¬ ì „ ì „ë°˜ì  ê²€ì¦ìš©|

  

---

### **ğŸ§ª íŒ: ë‘˜ ë‹¤ í™œìš©í•˜ê¸°**

1. helm template â†’ ë¹ ë¥´ê²Œ ë¬¸ë²•ë§Œ í™•ì¸
    
2. helm install --dry-run â†’ **ìŠ¤í‚¤ë§ˆ ìœ íš¨ì„±ê¹Œì§€ ì² ì €íˆ í™•ì¸**
    

---

### **ğŸ“Œ ë³´ë„ˆìŠ¤ íŒ**

- kind, apiVersion, metadata.nameëŠ” ëŒ€ë¶€ë¶„ì˜ Kubernetes ë¦¬ì†ŒìŠ¤ì— **í•„ìˆ˜**ì´ë¯€ë¡œ ëˆ„ë½ë˜ë©´ dry-runì—ì„œ ì˜¤ë¥˜ ë°œìƒ
    
- templateì€ **CI íŒŒì´í”„ë¼ì¸ì—ì„œ YAML ìƒì„±ë¬¼ ê²€í† ìš©**ìœ¼ë¡œë„ ë§ì´ ì‚¬ìš©
    

---

í•„ìš”í•˜ì‹œë©´ ì‹¤ì œ ì˜¤ë¥˜ ì˜ˆì œë‚˜ ì‹¤ìŠµìš© chartë„ ë§Œë“¤ì–´ë“œë¦´ ìˆ˜ ìˆì–´ìš” :)

ë‹¤ìŒ ê°•ì˜ë„ ìš”ì•½í•´ë“œë¦´ê¹Œìš”?