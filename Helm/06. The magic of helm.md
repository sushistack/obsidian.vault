# **ğŸ“¦ Helmì„ ì‚¬ìš©í•œ Kubernetesì— MySQL ì„¤ì¹˜ ê°€ì´ë“œ**

ì´ ë¬¸ì„œì—ì„œëŠ” **Helm Chart**ë¥¼ ì‚¬ìš©í•˜ì—¬ Kubernetes í´ëŸ¬ìŠ¤í„°ì— **MySQL**ì„ ì„¤ì¹˜í•˜ê³ , ì„¤ì¹˜ëœ MySQLì— í´ë¼ì´ì–¸íŠ¸ë¡œ ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™•ì¸í•˜ëŠ” ì „ì²´ ê³¼ì •ì„ ë‹¤ë£¹ë‹ˆë‹¤. ì‹¤ìŠµ í™˜ê²½ì€ minikubeë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤.

---

## **ğŸ§° ì‚¬ì „ ì¤€ë¹„**

### **í„°ë¯¸ë„ íƒ­ 3ê°œ ì¤€ë¹„**

- **1ë²ˆ íƒ­**: kubectl ëª…ë ¹ ì‹¤í–‰ìš©
- **2ë²ˆ íƒ­**: minikube ssh ì ‘ì†ìš©
- **3ë²ˆ íƒ­**: MySQL í´ë¼ì´ì–¸íŠ¸ìš© Pod ì ‘ì†

---

## **ğŸš€ ì„¤ì¹˜ ì „ í™•ì¸ ì‘ì—…**

### **1. í˜„ì¬ í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸**

**1ë²ˆ íƒ­:**

```
kubectl get pods
```

> ì¶œë ¥: No resources found (í˜„ì¬ í´ëŸ¬ìŠ¤í„°ì— ë¦¬ì†ŒìŠ¤ ì—†ìŒ)

---

### **2. Minikube ë‚´ë¶€ Docker ì´ë¯¸ì§€ í™•ì¸**

**2ë²ˆ íƒ­:**

```
minikube ssh
docker images
```

> ì¶œë ¥: ê¸°ë³¸ ì´ë¯¸ì§€ë“¤ë§Œ ì¡´ì¬, mysql ì—†ìŒ

---

## **ğŸ“¦ Helmì„ ì´ìš©í•œ MySQL ì„¤ì¹˜**

**1ë²ˆ íƒ­ì—ì„œ Helm ëª…ë ¹ ì‹¤í–‰:**

```
helm install mydb bitnami/mysql
```

- mydb: ì´ ì„¤ì¹˜ ì¸ìŠ¤í„´ìŠ¤ì˜ ì´ë¦„ (namespace ë‚´ ìœ ì¼í•´ì•¼ í•¨)
- bitnami/mysql: Bitnami ì €ì¥ì†Œì˜ MySQL ì°¨íŠ¸ ì‚¬ìš©
  

> ì„¤ì¹˜ í›„ ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë“¤ì´ ì¶œë ¥ë¨ (ì¤‘ìš”í•œ ì„¤ì • ì •ë³´ í¬í•¨)

---

## **ğŸ” ì„¤ì¹˜ í™•ì¸ ë° ì •ë³´ ì¡°íšŒ**

### **1. Pod í™•ì¸**

```
kubectl get pods
```

> mydbë¼ëŠ” ì´ë¦„ì´ í¬í•¨ëœ MySQL Podê°€ ìƒì„±ë˜ì–´ ì‹¤í–‰ ì¤‘

---

### **2. ì„œë¹„ìŠ¤ ì •ë³´ í™•ì¸**

ì„¤ì¹˜ ì™„ë£Œ ë©”ì‹œì§€ í•˜ë‹¨ì— í‘œì‹œëœ echo ëª…ë ¹ ì‹¤í–‰:

```
export SERVICE_NAME=$(kubectl get svc --namespace default -l app.kubernetes.io/name=mysql -o jsonpath="{.items[0].metadata.name}")
echo $SERVICE_NAME
```

---

### **3. ë¹„ë°€ë²ˆí˜¸ í™•ì¸ (Secretì—ì„œ ì¶”ì¶œ)**

```
kubectl get secret --namespace default mydb -o jsonpath="{.data.mysql-root-password}" | base64 --decode
```

> ìœ„ ëª…ë ¹ìœ¼ë¡œ ì¶”ì¶œëœ **ë£¨íŠ¸ ë¹„ë°€ë²ˆí˜¸**ëŠ” ë³µì‚¬í•´ë‘¡ë‹ˆë‹¤.

---

## **ğŸ–¥ï¸ MySQL í´ë¼ì´ì–¸íŠ¸ Pod ìƒì„±**

**3ë²ˆ íƒ­ì—ì„œ ì‹¤í–‰:**

```
kubectl run mydb-mysql-client --rm -i --tty --image bitnami/mysql:8.0.33-debian-11-r0 --namespace default --command -- bash
```

> bitnami/mysql ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒˆë¡œìš´ Pod ìƒì„± (í´ë¼ì´ì–¸íŠ¸ ìš©ë„)

---
## **ğŸ”Œ MySQL í´ë¼ì´ì–¸íŠ¸ë¡œ ì„œë²„ ì ‘ì†**

**í´ë¼ì´ì–¸íŠ¸ Pod ì•ˆì—ì„œ:**

```
mysql -h $SERVICE_NAME -uroot -p
```

> ë¹„ë°€ë²ˆí˜¸ ì…ë ¥: ì•ì„œ ë³µì‚¬í•´ë‘” ë¹„ë°€ë²ˆí˜¸ ë¶™ì—¬ë„£ê¸°

---

### **âœ… ì ‘ì† ì„±ê³µ í›„ ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸**

```
SHOW DATABASES;
```

> ì¶œë ¥: information_schema, mysql, performance_schema, sys ë“±ì˜ ê¸°ë³¸ DB í™•ì¸ ê°€ëŠ¥

---

## **ğŸ³ Minikube ë‚´ Docker ì´ë¯¸ì§€ í™•ì¸ (ë³€í™” í™•ì¸)**

**2ë²ˆ íƒ­ì—ì„œ ë‹¤ì‹œ í™•ì¸:**

```
docker images
```

> ì´ì œ bitnami/mysql ì´ë¯¸ì§€ê°€ ëª©ë¡ì— ì¶”ê°€ë˜ì–´ ìˆìŒ

---

## **ğŸ“‹ ì„¤ì¹˜ ìƒíƒœ ì¬í™•ì¸ (ì–¸ì œë“  ê°€ëŠ¥)**

**1ë²ˆ íƒ­ì—ì„œ Helm ìƒíƒœ í™•ì¸:**

```
helm status mydb
```

> ì¶œë ¥: ì„¤ì¹˜ ì´ë¦„, ë„¤ì„ìŠ¤í˜ì´ìŠ¤, ë°°í¬ ì‹œê°„, ìƒíƒœ(deployed), ì ‘ê·¼ ì •ë³´ ë“±

---
## **ğŸ§¾ ì •ë¦¬**

|**ë‹¨ê³„**|**ì„¤ëª…**|
|---|---|
|âœ… í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸|kubectl get pods, minikube ssh, docker images|
|âœ… Helm Chart ì„¤ì¹˜|helm install mydb bitnami/mysql|
|âœ… ë¹„ë°€ë²ˆí˜¸ ì¶”ì¶œ|Secretì—ì„œ Base64 ë””ì½”ë”©|
|âœ… í´ë¼ì´ì–¸íŠ¸ Pod ìƒì„±|kubectl runìœ¼ë¡œ MySQL í´ë¼ì´ì–¸íŠ¸ Pod ì‹¤í–‰|
|âœ… ì ‘ì† í™•ì¸|mysql ëª…ë ¹ì–´ë¡œ ì„œë²„ ì ‘ì† í›„ DB ì¡°íšŒ|
|âœ… ì„¤ì¹˜ ìƒíƒœ ì ê²€|helm status mydb ë¡œ ì–¸ì œë“  í™•ì¸ ê°€ëŠ¥|

---

## **ğŸ“š ì°¸ê³ **

- [Bitnami MySQL Chart ê³µì‹ ë¬¸ì„œ](https://artifacthub.io/packages/helm/bitnami/mysql)
- minikubeê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•˜ë©°, Helm ë˜í•œ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
