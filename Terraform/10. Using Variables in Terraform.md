## **ğŸ“˜ Terraform Input ë³€ìˆ˜ í™œìš©ë²•**

### **ğŸ§© ë³€ìˆ˜ì— ê°’ ì „ë‹¬í•˜ëŠ” ë‹¤ì–‘í•œ ë°©ë²•**

Terraformì—ì„œ input ë³€ìˆ˜ëŠ” ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ê°’ì„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” default ê°’ì„ ë³€ìˆ˜ ë¸”ë¡ì—ì„œ ì§€ì •í•´ì™”ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ê²ƒì€ **ì—¬ëŸ¬ ê°€ì§€ ë°©ë²• ì¤‘ í•˜ë‚˜**ì¼ ë¿ì´ë©°, ê¼­ default ê°’ì„ ì§€ì •í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.

```
variable "filename" {
  description = "íŒŒì¼ ì´ë¦„"
}
```

**ğŸ’¬ 1. ì¸í„°ë™í‹°ë¸Œ ëª¨ë“œì—ì„œ ì§ì ‘ ì…ë ¥**

default ê°’ì´ ì—†ëŠ” ë³€ìˆ˜ì— ëŒ€í•´ terraform applyë¥¼ ì‹¤í–‰í•˜ë©´, **ì‚¬ìš©ìê°€ ì§ì ‘ ì…ë ¥í•˜ë„ë¡ ìš”ì²­**í•©ë‹ˆë‹¤.

```
var.filename
  Enter a value:
```

**ğŸ’» 2. ì»¤ë§¨ë“œë¼ì¸ ì˜µì…˜ -var ì‚¬ìš©**

ëª…ë ¹ì–´ ì‹¤í–‰ ì‹œ -var í”Œë˜ê·¸ë¥¼ ì‚¬ìš©í•´ ë³€ìˆ˜ì— ê°’ì„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
terraform apply -var="filename=/root/cats.txt"
terraform apply -var="filename=/root/cats.txt" -var="length=2"
```

**ğŸŒ¿ 3. í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©**

TF_VAR_ ì ‘ë‘ì‚¬ë¥¼ ë¶™ì¸ í™˜ê²½ ë³€ìˆ˜ë¡œ ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
export TF_VAR_filename="/root/pets.txt"
export TF_VAR_length=2
```

Terraformì€ ì´ë¥¼ ë³€ìˆ˜ filename, lengthì˜ ê°’ìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤.

**ğŸ“„ 4. ë³€ìˆ˜ ì •ì˜ íŒŒì¼(.tfvars, .tfvars.json) ì‚¬ìš©**

ë³€ìˆ˜ê°€ ë§ì•„ì§ˆ ê²½ìš°, ë³€ìˆ˜ ì •ì˜ íŒŒì¼ì„ í†µí•´ ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ê°’ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
# terraform.tfvars
filename = "/root/pets.txt"
length   = 2
```

ìë™ìœ¼ë¡œ ë¡œë”©ë˜ëŠ” íŒŒì¼:

â€¢ terraform.tfvars
â€¢ terraform.tfvars.json
â€¢ *.auto.tfvars
â€¢ *.auto.tfvars.json

ìë™ ë¡œë”©ë˜ì§€ ì•ŠëŠ” ê²½ìš°, ëª…ì‹œì ìœ¼ë¡œ í”Œë˜ê·¸ë¡œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤:

```
terraform apply -var-file="variables.tfvars"
```

### **âš–ï¸ ë³€ìˆ˜ ê°’ ìš°ì„ ìˆœìœ„(Precedence)**

ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ ê°™ì€ ë³€ìˆ˜ì— ê°’ì„ ì „ë‹¬í•˜ë©´, Terraformì€ ë‹¤ìŒê³¼ ê°™ì€ **ìš°ì„ ìˆœìœ„**ë¥¼ ë”°ë¦…ë‹ˆë‹¤:

1. **í™˜ê²½ ë³€ìˆ˜** (TF_VAR_ í˜•ì‹)
2. **terraform.tfvars** ë˜ëŠ” **terraform.tfvars.json**
3. **.auto.tfvars** ë˜ëŠ” **.auto.tfvars.json** (ì•ŒíŒŒë²³ ìˆœìœ¼ë¡œ ë¡œë”©)
4. **ëª…ë ¹ì–´ í”Œë˜ê·¸ -var ë˜ëŠ” -var-file** âœ… _ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„_

#### **ğŸ§ª ì˜ˆì‹œ**

```
# main.tf
resource "local_file" "pet" {
  filename = var.filename
  content  = "This is your pet file."
}
```

```
export TF_VAR_filename="/root/cats.txt"
# terraform.tfvars -> filename = "/root/pets.txt"
# variable.auto.tfvars -> filename = "/root/mypet.txt"
terraform apply -var="filename=/root/best-pet.txt"
```

ì´ ê²½ìš°, ìµœì¢…ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê°’ì€ /root/best-pet.txtì…ë‹ˆë‹¤. (-var í”Œë˜ê·¸ê°€ ê°€ì¥ ìš°ì„ )
