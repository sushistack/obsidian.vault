### **🔌 Provider는 어떻게 작동하나요?**

이전에 살펴봤듯이, Terraform은 **플러그인 기반 구조**를 가지고 있고, 대부분의 유명한 Provider들은 **Terraform Registry**에 등록되어 있어요.

```
terraform init
```

명령어를 실행하면, **별도 설정 없이 최신 버전의 Provider가 자동으로 설치돼요.**

하지만 항상 최신 버전을 사용하는 게 **좋은 건 아니에요.**

---

### **🤔 왜 특정 버전을 써야 할까?**

- Provider의 기능은 **버전에 따라 크게 달라질 수 있어요.**
- 코드가 작성된 시점의 버전과 다른 버전을 사용하면, 예상대로 작동하지 않을 수 있어요.
- 그래서 우리는 명시적으로 **특정 버전**을 지정해야 할 때가 있어요.

---

### **🔧 특정 버전 지정 방법**

Terraform에서 특정 Provider 버전을 쓰기 위해서는 terraform 블록을 사용해야 해요.

```
terraform {
  required_providers {
    local = {
      source  = "hashicorp/local"
      version = "1.4.0"
    }
  }
}
```

- required_providers: 사용할 Provider와 그 설정을 정의해요.
- version: 설치할 정확한 버전을 지정해요.


이렇게 설정한 후 terraform init을 실행하면, 해당 버전의 Provider가 설치돼요.

---
## **🧩 버전 제약 조건 (Version Constraints)**

버전을 지정할 때는 다양한 제약 조건도 사용할 수 있어요.

### **1️⃣ 정확한 버전**

```
version = "1.4.0"
```

정확히 1.4.0 버전만 설치

---
### **2️⃣ 특정 버전 제외**

```
version = "!= 2.0.0"
```

2.0.0은 제외하고, 가능한 이전 버전을 설치

---

### **3️⃣ 비교 연산자 사용**

```
version = "< 2.0.0"
version = "> 1.2.0"
version = ">= 1.2.0"
```


---

### **4️⃣ 범위로 지정 (AND 조건)**

```
version = "> 1.2.0, < 2.0.0, != 1.4.0"
```

- 1.2.0보다 크고
- 2.0.0보다 작고
- 1.4.0은 제외

→ 이 조건이면 예를 들어 1.3.0 같은 버전이 선택됨

---

### **5️⃣ 비관적 제약 (Pessimistic Constraint Operator)**

```
version = "~> 1.2"
```

- **1.2부터 시작해서 1.x의 소규모 업그레이드 버전**만 허용
- 즉: 1.2, 1.3, 1.4, … 1.9까지 가능
- **2.0 이상은 안 됨**

```
version = "~> 1.2.0"
```

- 이건 더 세밀한 제한: 1.2.0 ~ 1.2.9 사이만 허용

---

## **✅ 마무리**

- 특정 버전을 지정하는 건 Terraform 코드를 **예측 가능하고 안정적**으로 만들기 위한 필수 작업이에요.
- 실습에서 다양한 버전 제약 조건을 직접 써보는 것도 꼭 추천해요!
